import{a as d,d as z,$ as ue}from"./client.CZ4pHLIx.js";import{f as ve,s as _e,a as w,t as V,c as W,b as k,e as Ce}from"./disclose-version.BAK9tArJ.js";import{i as de}from"./legacy.0xCLN7Bn.js";import{h as D,g as X,ap as Le,d as Pe,b as De,Z as xe,aB as Ee,H as Fe,e as se,i as Z,m as y,aE as Q,j as Ae,k as pe,l as He,W as ne,aF as ie,aG as $e,aA as ke,aH as Ue,aI as Ye,aq as ye,ax as we,an as Be,q as Je,aJ as j,aK as ee,ab as Ke,R as oe,aL as Se,aM as qe,aN as Ge,av as Qe,p as be,J as B,D as S,f as We,c as M,t as T,r as I,s as x,aD as Ve,a as ge,M as le,N as Oe}from"./utils.D6mM6Ojo.js";import{M as Xe,r as Ze,b as ze,s as je,a as et,t as tt}from"./Modal.DvupXWw7.js";import{p as at,a as Re}from"./preload-helper.CkRfzCf3.js";import{g as Ne,w as he}from"./index.WIarMszz.js";import{i as rt}from"./if.wMG7fNd6.js";function Ie(t,e){return e}function st(t,e,a,s){for(var n=[],A=e.length,c=0;c<A;c++)$e(e[c].e,n,!0);var _=A>0&&n.length===0&&a!==null;if(_){var E=a.parentNode;ke(E),E.append(a),s.clear(),C(t,e[0].prev,e[A-1].next)}Ue(n,()=>{for(var i=0;i<A;i++){var u=e[i];_||(s.delete(u.k),C(t,u.prev,u.next)),Ye(u.e,!_)}})}function Me(t,e,a,s,n,A=null){var c=t,_={flags:e,items:new Map,first:null},E=(e&Se)!==0;if(E){var i=t;c=D?X(ye(i)):i.appendChild(Le())}D&&Pe();var u=null,b=!1;De(()=>{var r=a(),v=xe(r)?r:r==null?[]:Ee(r),l=v.length;if(b&&l===0)return;b=l===0;let R=!1;if(D){var p=c.data===Fe;p!==(l===0)&&(c=se(),X(c),Z(!1),R=!0)}if(D){for(var g=null,N,O=0;O<l;O++){if(y.nodeType===8&&y.data===we){c=y,R=!0,Z(!1);break}var o=v[O],f=s(o,O);N=me(y,_,g,null,o,f,O,n,e),_.items.set(f,N),g=N}l>0&&X(se())}if(!D){var F=Be;nt(v,_,c,n,e,(F.f&Q)!==0,s)}A!==null&&(l===0?u?Ae(u):u=pe(()=>A(c)):u!==null&&He(u,()=>{u=null})),R&&Z(!0),a()}),D&&(c=y)}function nt(t,e,a,s,n,A,c){var P,K,q,ae;var _=(n&qe)!==0,E=(n&(j|ee))!==0,i=t.length,u=e.items,b=e.first,r=b,v,l=null,R,p=[],g=[],N,O,o,f;if(_)for(f=0;f<i;f+=1)N=t[f],O=c(N,f),o=u.get(O),o!==void 0&&((P=o.a)==null||P.measure(),(R??(R=new Set)).add(o));for(f=0;f<i;f+=1){if(N=t[f],O=c(N,f),o=u.get(O),o===void 0){var F=r?r.e.nodes_start:a;l=me(F,e,l,l===null?e.first:l.next,N,O,f,s,n),u.set(O,l),p=[],g=[],r=l.next;continue}if(E&&it(o,N,f,n),o.e.f&Q&&(Ae(o.e),_&&((K=o.a)==null||K.unfix(),(R??(R=new Set)).delete(o))),o!==r){if(v!==void 0&&v.has(o)){if(p.length<g.length){var H=g[0],h;l=H.prev;var $=p[0],U=p[p.length-1];for(h=0;h<p.length;h+=1)ce(p[h],H,a);for(h=0;h<g.length;h+=1)v.delete(g[h]);C(e,$.prev,U.next),C(e,l,$),C(e,U,H),r=H,l=U,f-=1,p=[],g=[]}else v.delete(o),ce(o,r,a),C(e,o.prev,o.next),C(e,o,l===null?e.first:l.next),C(e,l,o),l=o;continue}for(p=[],g=[];r!==null&&r.k!==O;)(A||!(r.e.f&Q))&&(v??(v=new Set)).add(r),g.push(r),r=r.next;if(r===null)continue;o=r}p.push(o),l=o,r=o.next}if(r!==null||v!==void 0){for(var m=v===void 0?[]:Ee(v);r!==null;)(A||!(r.e.f&Q))&&m.push(r),r=r.next;var L=m.length;if(L>0){var Y=n&Se&&i===0?a:null;if(_){for(f=0;f<L;f+=1)(q=m[f].a)==null||q.measure();for(f=0;f<L;f+=1)(ae=m[f].a)==null||ae.fix()}st(e,m,Y,u)}}_&&Je(()=>{var re;if(R!==void 0)for(o of R)(re=o.a)==null||re.apply()}),ne.first=e.first&&e.first.e,ne.last=l&&l.e}function it(t,e,a,s){s&j&&ie(t.v,e),s&ee?ie(t.i,a):t.i=a}function me(t,e,a,s,n,A,c,_,E){var i=(E&j)!==0,u=(E&Ge)===0,b=i?u?Ke(n):oe(n):n,r=E&ee?oe(c):c,v={i:r,v:b,k:A,a:null,e:null,prev:a,next:s};try{return v.e=pe(()=>_(t,b,r),D),v.e.prev=a&&a.e,v.e.next=s&&s.e,a===null?e.first=v:(a.next=v,a.e.next=v.e),s!==null&&(s.prev=v,s.e.prev=v.e),v}finally{}}function ce(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,A=t.e.nodes_start;A!==s;){var c=Qe(A);n.before(A),A=c}}function C(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}const Tt=[d.JANUARY,d.FEBRUARY,d.MARCH,d.APRIL,d.MAY,d.JUNE,d.JULY,d.AUGUST,d.SEPTEMBER,d.OCTOBER,d.NOVEMBER,d.DECEMBER],Ct=[d.SHORT_SUNDAY,d.SHORT_MONDAY,d.SHORT_TUESDAY,d.SHORT_WEDNESDAY,d.SHORT_THURSDAY,d.SHORT_FRIDAY,d.SHORT_SATURDAY],Lt=365,Pt=new Date(2024,0,1);var J=(t=>(t.EQUIPMENT="EQUIPMENT",t.COMPANION="COMPANION",t.GEMS="GEMS",t.KAMAS="KAMAS",t.WAKFU="WAKFU",t.RUNES="RUNES",t.CHEST="CHEST",t))(J||{});function ot(){const t=he({}),{subscribe:e,set:a}=t;return localStorage.storable&&a(JSON.parse(localStorage.storable)),{subscribe:e,set:s=>{localStorage.storable=JSON.stringify(s),a(s)},update:s=>{const n=s(Ne(t));localStorage.storable=JSON.stringify(n),a(n)}}}const G=ot();function Dt(t,e){if(t){if(t.type===J.EQUIPMENT||t.type===J.COMPANION){if(!e||e[t.rarety])return t.rarety.toLowerCase()}else if(!e||e[t.type])return t.type.toLowerCase()}}var Te=(t=>(t.COMMON="COMMON",t.RARE="RARE",t.KROSMIC="KROSMIC",t.INFINITE="INFINITE",t))(Te||{});const fe=he(void 0),te="T_Profile";async function lt(){const t=await z.from(te).select();if(t.error)throw t.error;return t.data.map(e=>e.name)}async function ct(t){const e=await z.from(te).insert({name:t}).select();if(e.error)throw e.error;return e.data}async function ft(t){const e=await z.from(te).delete().match({name:t}).select();if(e.error)throw e.error;return e.data[0]}function ut(t,e,a){S(e)!==""&&(ct(S(e)),B(a,[...S(a),S(e)]),B(e,""))}var vt=(t,e)=>e(void 0),_t=(t,e,a)=>e(S(a)),dt=(t,e,a,s)=>{confirm(e()(d.PROFILE_DELETE_CONFIRM))&&a(S(s))},Et=V('<div class="svelte-2icnig"><button class="svelte-2icnig"> </button> <button class="material-icon delete-profile svelte-2icnig">delete</button></div>'),At=V('<div> </div> <div class="profiles svelte-2icnig"><div class="svelte-2icnig"><button class="svelte-2icnig"> </button></div> <!></div> <div><b> <span class="required svelte-2icnig">*</span> :</b></div> <input type="text"> <button class="svelte-2icnig"> </button>',1);function xt(t,e){be(e,!1);const a=_e(),s=()=>W(fe,"$currentProfile",a),n=()=>W(ue,"$_",a);let A=at(e,"onclose",8,void 0),c=le(""),_=le([]);function E(b){ft(b),B(_,S(_).filter(r=>r!==b))}function i(b){fe.set(b),A()&&A()()}Re(async()=>{B(_,await lt())}),de();var u=Oe(()=>s()??n()(d.PROFILE_DEFAULT));Xe(t,{get title(){return S(u)},get onclose(){return A()},children:(b,r)=>{var v=At(),l=We(v),R=M(l,!0);T(()=>k(R,n()(d.PROFILE_INFO))),I(l);var p=x(l,2),g=M(p),N=M(g);N.__click=[vt,i];var O=M(N,!0);T(()=>k(O,n()(d.PROFILE_DEFAULT))),I(N),I(g);var o=x(g,2);Me(o,1,()=>S(_),Ie,(m,L)=>{var Y=Et(),P=M(Y);P.__click=[_t,i,L];var K=M(P,!0);I(P);var q=x(P,2);q.__click=[dt,n,E,L],I(Y),T(()=>k(K,S(L))),w(m,Y)}),I(p);var f=x(p,2),F=M(f),H=M(F,!0);T(()=>k(H,n()(d.PROFILE_CREATE_LABEL))),Ve(2),I(F),I(f);var h=x(f,2);Ze(h),T(()=>je(h,"placeholder",n()(d.PROFILE_CREATE_PLACEHOLDER)));var $=x(h,2);$.__click=[ut,c,_];var U=M($,!0);T(()=>k(U,n()(d.PROFILE_CREATE))),I($),ze(h,()=>S(c),m=>B(c,m)),w(b,v)},$$slots:{default:!0}}),ge()}ve(["click"]);var pt=(t,e,a)=>e(S(a)),St=V('<div class="filter svelte-1uygbo0"><button><!></button> </div>'),bt=V('<section class="svelte-1uygbo0"></section>');function Ft(t,e){be(e,!1);const a=_e(),s=()=>W(G,"$localStorageStore",a),n=()=>W(ue,"$_",a);function A(_){G.update(E=>{const i=E.filters;return i&&(i[_]=!i[_]),{...E,filters:i}})}Re(()=>{if(!Ne(G).filters){let E={};for(const i in Te)E[i]=!0;for(const i in J)i!==J.EQUIPMENT&&(E[i]=!0);G.update(i=>({...i,filters:E}))}}),de();var c=bt();Me(c,5,()=>Object.keys(s().filters||{}),Ie,(_,E)=>{var i=St(),u=M(i);u.__click=[pt,A,E];const b=Oe(()=>`${`material-icon ${S(E).toLowerCase()}`??""} svelte-1uygbo0`);var r=M(u);{var v=R=>{var p=Ce("check");w(R,p)};rt(r,R=>{s().filters[S(E)]&&R(v)})}I(u);var l=x(u);T(()=>k(l,` ${n()(S(E))??""}`)),I(i),T(()=>{et(u,S(b)),tt(u,"checked",s().filters[S(E)])}),w(_,i)}),I(c),w(t,c),ge()}ve(["click"]);export{Lt as C,Ct as D,Ft as F,Tt as M,xt as P,J as R,Pt as a,Te as b,fe as c,Me as e,Dt as g,Ie as i,G as l};
