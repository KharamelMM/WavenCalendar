import{a as $,t as N,b as W,i as pe,s as me,c as X,f as we,e as ze}from"../chunks/disclose-version.BJ0bh1Fm.js";import{i as he}from"../chunks/legacy.DxQuUseu.js";import{h as ue,g as He,am as Mt,d as St,b as At,T as Rt,ay as it,H as Nt,e as Ze,i as qe,m as Ae,aB as De,j as ct,k as ut,l as Tt,P as et,aC as tt,aD as Ot,ax as kt,aE as Dt,aF as It,an as Pt,au as wt,ak as Ct,q as Lt,aG as We,aH as Ge,a7 as xt,L as rt,aI as vt,aJ as Ut,aK as Ft,as as Ht,c as y,s as T,r as E,t as U,p as be,N as I,aL as qt,aM as Yt,D as a,a as ge,ah as J,F as Bt,a2 as L,G as Qt,aA as Ce,f as de,aN as ft,aO as at}from"../chunks/utils.C-8QtjWp.js";import{i as j}from"../chunks/if.C9YGHIHd.js";import{m as dt,F as nt,g as Wt,k as Gt}from"../chunks/stats.CDAFqDaT.js";import{p as x,b as _t,s as Le,o as Ke}from"../chunks/preload-helper.BVYu0XUD.js";import{b,s as Je,$ as $e,h as ie}from"../chunks/client.CMWTrY03.js";import{a as Ve,t as je,r as Ie,b as Pe,s as Et,M as mt,C as Kt}from"../chunks/Modal.CoWimMqA.js";import{g as ye,w as ht}from"../chunks/index.Aa73rqEY.js";function _e(t,e){return e}function Jt(t,e,r,n){for(var o=[],d=e.length,l=0;l<d;l++)Ot(e[l].e,o,!0);var u=d>0&&o.length===0&&r!==null;if(u){var i=r.parentNode;kt(i),i.append(r),n.clear(),le(t,e[0].prev,e[d-1].next)}Dt(o,()=>{for(var s=0;s<d;s++){var f=e[s];u||(n.delete(f.k),le(t,f.prev,f.next)),It(f.e,!u)}})}function Ee(t,e,r,n,o,d=null){var l=t,u={flags:e,items:new Map,first:null},i=(e&vt)!==0;if(i){var s=t;l=ue?He(Pt(s)):s.appendChild(Mt())}ue&&St();var f=null,h=!1;At(()=>{var v=r(),_=Rt(v)?v:v==null?[]:it(v),c=_.length;if(h&&c===0)return;h=c===0;let R=!1;if(ue){var g=l.data===Nt;g!==(c===0)&&(l=Ze(),He(l),qe(!1),R=!0)}if(ue){for(var M=null,O,P=0;P<c;P++){if(Ae.nodeType===8&&Ae.data===wt){l=Ae,R=!0,qe(!1);break}var m=_[P],p=n(m,P);O=bt(Ae,u,M,null,m,p,P,o,e),u.items.set(p,O),M=O}c>0&&He(Ze())}if(!ue){var A=Ct;Vt(_,u,l,o,e,(A.f&De)!==0,n)}d!==null&&(c===0?f?ct(f):f=ut(()=>d(l)):f!==null&&Tt(f,()=>{f=null})),R&&qe(!0),r()}),ue&&(l=Ae)}function Vt(t,e,r,n,o,d,l){var Q,z,re,ae;var u=(o&Ut)!==0,i=(o&(We|Ge))!==0,s=t.length,f=e.items,h=e.first,v=h,_,c=null,R,g=[],M=[],O,P,m,p;if(u)for(p=0;p<s;p+=1)O=t[p],P=l(O,p),m=f.get(P),m!==void 0&&((Q=m.a)==null||Q.measure(),(R??(R=new Set)).add(m));for(p=0;p<s;p+=1){if(O=t[p],P=l(O,p),m=f.get(P),m===void 0){var A=v?v.e.nodes_start:r;c=bt(A,e,c,c===null?e.first:c.next,O,P,p,n,o),f.set(P,c),g=[],M=[],v=c.next;continue}if(i&&jt(m,O,p,o),m.e.f&De&&(ct(m.e),u&&((z=m.a)==null||z.unfix(),(R??(R=new Set)).delete(m))),m!==v){if(_!==void 0&&_.has(m)){if(g.length<M.length){var q=M[0],k;c=q.prev;var Y=g[0],H=g[g.length-1];for(k=0;k<g.length;k+=1)ot(g[k],q,r);for(k=0;k<M.length;k+=1)_.delete(M[k]);le(e,Y.prev,H.next),le(e,c,Y),le(e,H,q),v=q,c=H,p-=1,g=[],M=[]}else _.delete(m),ot(m,v,r),le(e,m.prev,m.next),le(e,m,c===null?e.first:c.next),le(e,c,m),c=m;continue}for(g=[],M=[];v!==null&&v.k!==P;)(d||!(v.e.f&De))&&(_??(_=new Set)).add(v),M.push(v),v=v.next;if(v===null)continue;m=v}g.push(m),c=m,v=m.next}if(v!==null||_!==void 0){for(var w=_===void 0?[]:it(_);v!==null;)(d||!(v.e.f&De))&&w.push(v),v=v.next;var C=w.length;if(C>0){var B=o&vt&&s===0?r:null;if(u){for(p=0;p<C;p+=1)(re=w[p].a)==null||re.measure();for(p=0;p<C;p+=1)(ae=w[p].a)==null||ae.fix()}Jt(e,w,B,f)}}u&&Lt(()=>{var ce;if(R!==void 0)for(m of R)(ce=m.a)==null||ce.apply()}),et.first=e.first&&e.first.e,et.last=c&&c.e}function jt(t,e,r,n){n&We&&tt(t.v,e),n&Ge?tt(t.i,r):t.i=r}function bt(t,e,r,n,o,d,l,u,i){var s=(i&We)!==0,f=(i&Ft)===0,h=s?f?xt(o):rt(o):o,v=i&Ge?rt(l):l,_={i:v,v:h,k:d,a:null,e:null,prev:r,next:n};try{return _.e=ut(()=>u(t,h,v),ue),_.e.prev=r&&r.e,_.e.next=n&&n.e,r===null?e.first=_:(r.next=_,r.e.next=_.e),n!==null&&(n.prev=_,n.e.prev=_.e),_}finally{}}function ot(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,d=t.e.nodes_start;d!==n;){var l=Ht(d);o.before(d),d=l}}function le(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const Xt=[b.JANUARY,b.FEBRUARY,b.MARCH,b.APRIL,b.MAY,b.JUNE,b.JULY,b.AUGUST,b.SEPTEMBER,b.OCTOBER,b.NOVEMBER,b.DECEMBER],Re=[b.SHORT_SUNDAY,b.SHORT_MONDAY,b.SHORT_TUESDAY,b.SHORT_WEDNESDAY,b.SHORT_THURSDAY,b.SHORT_FRIDAY,b.SHORT_SATURDAY],xe=new Date(2024,0,1);function gt(t,e){return new Date(e,t+1,0).getDate()}function yt(t,e){return new Date(e,t,1).getDay()}function pt(t,e){return(t-e+Re.length)%Re.length}function zt(t,e,r=0){const n=pt(yt(t,e),r),o=gt(t,e);return Math.ceil((n+o)/7)}function Zt(t,e,r,n,o=0){return r+n*Re.length-pt(yt(t,e),o)+1}function er(t,e){return Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24))}function Ue(t,e){return(er(t,e)%365+365)%365}var D=(t=>(t.EQUIPMENT="EQUIPMENT",t.GEMS="GEMS",t.KAMAS="KAMAS",t.WAKFU="WAKFU",t.RUNES="RUNES",t.CHEST="CHEST",t))(D||{});function tr(){const t=ht({}),{subscribe:e,set:r}=t;return localStorage.storable&&r(JSON.parse(localStorage.storable)),{subscribe:e,set:n=>{localStorage.storable=JSON.stringify(n),r(n)},update:n=>{const o=n(ye(t));localStorage.storable=JSON.stringify(o),r(o)}}}const fe=tr();var rr=N('<span class="text svelte-17j3cvn"> </span>'),ar=N('<section class="tooltip svelte-17j3cvn"><!> <!></section>');function nr(t,e){let r=x(e,"title",8,void 0);var n=ar(),o=y(n);Je(o,e,"default",{});var d=T(o,2);{var l=u=>{var i=rr(),s=y(i,!0);E(i),U(()=>W(s,r())),$(u,i)};j(d,u=>{r()&&u(l)})}E(n),$(t,n)}var or=N("<button><div> </div></button>");function sr(t,e){be(e,!1);const r=me(),n=()=>X($e,"$_",r);let o=x(e,"currentDate",8),d=x(e,"dayOfMonth",8),l=x(e,"reward",8,void 0),u=x(e,"onclick",8);const i=new Date;let s=J("");const f=fe.subscribe(c=>{I(s,h(l(),c.filters))});function h(c,R){if(c){if(c.type===D.EQUIPMENT){if(!R||R[c.rarety])return c.rarety.toLowerCase()}else if(!R||R[c.type])return c.type.toLowerCase()}}function v(){if(l()){let c=`${l().amount}× ${n()(l().type)}`;switch(l().type){case D.RUNES:case D.CHEST:c+=` ${n()(l().equipment)}`;break;case D.EQUIPMENT:c=`${l().amount}× ${n()(l().item)} ${n()(l().rarety)}`;break}return c}}_t(()=>{f()}),qt(()=>(Bt(l()),fe),()=>{I(s,h(l(),ye(fe).filters))}),Yt(),he();var _=L(v);nr(t,{get title(){return a(_)},children:(c,R)=>{var g=or();g.__click=function(...m){var p;(p=u())==null||p.apply(this,m)};const M=L(()=>o().toDateString()===i.toDateString());var O=y(g),P=y(O,!0);E(O),E(g),U(()=>{Ve(g,`${a(s)??""} svelte-14v7im1`),g.disabled=o()>i,je(g,"today",a(M)),W(P,d())}),$(c,g)},$$slots:{default:!0}}),ge()}pe(["click"]);var lr=N('<th class="svelte-t5kud4"> </th>'),ir=N("<td><!></td>"),cr=N("<tr></tr>"),ur=N('<table class="svelte-t5kud4"><thead><tr></tr></thead><tbody></tbody></table>');function vr(t,e){be(e,!1);const r=me(),n=()=>X(dt,"$momentStore",r);let o=x(e,"year",8),d=x(e,"month",8),l=x(e,"onselectday",8),u=x(e,"calendar",8);const i=Re.length;function s(c){let R=Ue(c,xe);return u()[R]}he();var f=ur(),h=y(f),v=y(h);Ee(v,5,()=>({length:i}),_e,(c,R,g)=>{var M=lr(),O=y(M,!0);U(()=>W(O,n()().weekday(g%i).format("dd"))),E(M),$(c,M)}),E(v),E(h);var _=T(h);Ee(_,5,()=>({length:zt(d(),o())}),_e,(c,R,g)=>{var M=cr();const O=L(()=>gt(d(),o()));Ee(M,5,()=>Re,_e,(m,p,A)=>{var q=ir();const k=L(()=>Zt(d(),o(),A,g));var Y=y(q);{var H=w=>{const C=L(()=>new Date(o(),d(),a(k))),B=L(()=>s(a(C)));var Q=Qt(()=>({currentDate:a(C),dayOfMonth:a(k),reward:a(B),onclick:()=>l()(a(C))}));sr(w,Le(()=>a(Q)))};j(Y,w=>{a(k)>0&&a(k)<=a(O)&&w(H)})}E(q),$(m,q)}),E(M),$(c,M)}),E(_),E(f),$(t,f),ge()}var Ye=(t=>(t.COMPANIONS="COMPANIONS",t.SPELLS="SPELLS",t.EQUIPMENTS="EQUIPMENTS",t))(Ye||{}),Be=(t=>(t.RING="RING",t.ARMBAND="ARMBAND",t.COMPANION="COMPANION",t))(Be||{}),Fe=(t=>(t.COMMON="COMMON",t.RARE="RARE",t.KROSMIC="KROSMIC",t.INFINITE="INFINITE",t))(Fe||{});function fr(t,e){be(e,!1);const r=me(),n=()=>X($e,"$_",r);let o=x(e,"key",8);he(),Ce();var d=we();U(()=>W(d,n()(o()))),$(t,d),ge()}var dr=N('<span class="required svelte-u5ui8r">*</span>'),_r=N("<span> <!></span>"),Er=N('<section class="svelte-u5ui8r"><!> <!></section>');function Qe(t,e){let r=x(e,"title",8,void 0),n=x(e,"required",8,!1);var o=Er(),d=y(o);{var l=i=>{var s=_r(),f=y(s),h=T(f);{var v=_=>{var c=dr();$(_,c)};j(h,_=>{n()&&_(v)})}E(s),U(()=>W(f,`${r()??""}: `)),$(i,s)};j(d,i=>{r()&&i(l)})}var u=T(d,2);Je(u,e,"default",{}),E(o),$(t,o)}var mr=(t,e,r)=>e(a(r)),hr=N("<button><!></button>"),br=N('<section class="svelte-aefnkp"></section>');function ke(t,e){let r=x(e,"title",8,void 0),n=x(e,"values",24,()=>[]),o=x(e,"value",12),d=x(e,"required",8,!1);Qe(t,Le(()=>({title:r(),required:d()}),{children:(l,u)=>{var i=br();Ee(i,5,n,_e,(s,f)=>{var h=hr();const v=L(()=>`${a(f).toLowerCase()??""} svelte-aefnkp`);h.__click=[mr,o,f];var _=y(h);fr(_,{get key(){return a(f)}}),E(h),U(()=>{Ve(h,a(v)),je(h,"active",o()===a(f))}),$(s,h)}),E(i),$(l,i)},$$slots:{default:!0}}))}pe(["click"]);function gr(t){return Object.values(t).filter(e=>typeof e!="number")}var yr=N("<!> <!>",1),pr=N('<input type="number" min="100" max="250" step="50">'),$r=N('<input type="number" min="1" max="5000">'),Mr=N('<input type="text">'),Sr=(t,e)=>e()(),Ar=(t,e,r)=>{confirm(e()(b.REWARD_DELETE_CONFIRM))&&r()()},Rr=N('<button class="delete material-icon svelte-tu6hhq">delete</button>'),Nr=N('<section class="svelte-tu6hhq"><!> <!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Tr(t,e){var ce,Me,Te,Se,Oe,ne,oe;be(e,!1);const r=me(),n=()=>X($e,"$_",r);let o=x(e,"oncancel",8),d=x(e,"onsave",8),l=x(e,"ondelete",8,void 0),u=x(e,"reward",8,void 0),i=x(e,"date",8),s=J(((ce=u())==null?void 0:ce.type)??D.EQUIPMENT),f=J(((Me=u())==null?void 0:Me.type)===D.EQUIPMENT?u().rarety:Fe.COMMON),h=J(((Te=u())==null?void 0:Te.type)===D.RUNES||((Se=u())==null?void 0:Se.type)===D.CHEST?u().equipment:Ye.EQUIPMENTS),v=J(((Oe=u())==null?void 0:Oe.type)===D.EQUIPMENT?u().item:Be.RING),_=J(((ne=u())==null?void 0:ne.amount)??1),c=J(((oe=u())==null?void 0:oe.type)===D.EQUIPMENT?u().description:void 0);function R(){let S;const F={cycle_index:Ue(i(),xe),amount:a(_)};switch(a(s)){case D.GEMS:S={...F,type:a(s),amount:a(_)};break;case D.EQUIPMENT:S={...F,type:a(s),rarety:a(f),item:a(v),description:a(c)};break;case D.CHEST:S={...F,type:a(s),equipment:a(h)};break;case D.RUNES:S={...F,type:a(s),equipment:a(h)};break;case D.KAMAS:case D.WAKFU:S={...F,type:a(s)};break}d()(S)}he();var g=Nr(),M=y(g),O=L(()=>n()(b.REWARD_LABEL_TYPE)),P=L(()=>gr(D));ke(M,{get title(){return a(O)},get values(){return a(P)},get value(){return a(s)},set value(S){I(s,S)},required:!0,$$legacy:!0});var m=T(M,2);{var p=S=>{var F=yr(),Z=de(F),ee=L(()=>n()(b.REWARD_LABEL_RARITY)),G=L(()=>Object.keys(Fe));ke(Z,{get title(){return a(ee)},get values(){return a(G)},get value(){return a(f)},set value(te){I(f,te)},required:!0,$$legacy:!0});var se=T(Z,2),K=L(()=>n()(b.REWARD_LABEL_ITEM_TYPE)),V=L(()=>Object.keys(Be));ke(se,{get title(){return a(K)},get values(){return a(V)},get value(){return a(v)},set value(te){I(v,te)},required:!0,$$legacy:!0}),$(S,F)},A=S=>{var F=ze(),Z=de(F);{var ee=G=>{var se=L(()=>n()(b.REWARD_LABEL_EQUIPMENT_TYPE)),K=L(()=>Object.keys(Ye));ke(G,{get title(){return a(se)},get values(){return a(K)},get value(){return a(h)},set value(V){I(h,V)},required:!0,$$legacy:!0})};j(Z,G=>{(a(s)===D.CHEST||a(s)===D.RUNES)&&G(ee)},!0)}$(S,F)};j(m,S=>{a(s)===D.EQUIPMENT?S(p):S(A,!1)})}var q=T(m,2),k=L(()=>n()(b.REWARD_LABEL_AMOUNT));Qe(q,{get title(){return a(k)},required:!0,children:(S,F)=>{var Z=ze(),ee=de(Z);{var G=K=>{var V=pr();Ie(V),Pe(V,()=>a(_),te=>I(_,te)),$(K,V)},se=K=>{var V=$r();Ie(V),Pe(V,()=>a(_),te=>I(_,te)),$(K,V)};j(ee,K=>{a(s)===D.GEMS?K(G):K(se,!1)})}$(S,Z)},$$slots:{default:!0}});var Y=T(q,2);{var H=S=>{var F=L(()=>n()(b.REWARD_LABEL_EQUIPMENT_MORE));Qe(S,{get title(){return a(F)},children:(Z,ee)=>{var G=Mr();Ie(G),U(()=>Et(G,"placeholder",n()(b.EQUIPMENT_MORE_PLACEHOLDER))),Pe(G,()=>a(c),se=>I(c,se)),$(Z,G)},$$slots:{default:!0}})};j(Y,S=>{a(s)===D.EQUIPMENT&&S(H)})}var w=T(Y,2),C=y(w);C.__click=[Sr,o];var B=y(C,!0);U(()=>W(B,n()(b.CANCEL))),E(C);var Q=T(C,2);Q.__click=R;var z=y(Q,!0);U(()=>W(z,n()(b.SAVE))),E(Q);var re=T(Q,2);{var ae=S=>{var F=Rr();F.__click=[Ar,n,l],$(S,F)};j(re,S=>{l()&&S(ae)})}E(w),E(g),$(t,g),ge()}pe(["click"]);var Or=N('<section class="material-icon"><!></section>');function st(t,e){var r=Or(),n=y(r);Je(n,e,"default",{}),E(r),$(t,r)}const Ne="T_Reward";async function kr(t,e){const r=await ie.from(Ne).upsert({...e,profile_name:t},{onConflict:"user_id, profile_name, cycle_index"}).select();if(r.error)throw r.error;return r.data[0]}async function Dr(t,e){let r;if(t?r=await ie.from(Ne).delete().match({profile_name:t,cycle_index:e}).select():r=await ie.from(Ne).delete().match({cycle_index:e}).is("profile_name",null).select(),r.error)throw r.error;return r.data[0]}async function lt(t=null){let e;if(t?e=await ie.from(Ne).select().eq("profile_name",t):e=await ie.from(Ne).select().is("profile_name",null),e.error)throw e.error;const r=e.data,n=[];for(const o of r){const d=o;n[d.cycle_index]=d}return n}const ve=ht(void 0),Xe="T_Profile";async function Ir(){const t=await ie.from(Xe).select();if(t.error)throw t.error;return t.data.map(e=>e.name)}async function Pr(t){const e=await ie.from(Xe).insert({name:t}).select();if(e.error)throw e.error;return e.data}async function wr(t){const e=await ie.from(Xe).delete().match({name:t}).select();if(e.error)throw e.error;return e.data[0]}function Cr(t,e,r){a(e)!==""&&(Pr(a(e)),I(r,[...a(r),a(e)]),I(e,""))}var Lr=(t,e)=>e(void 0),xr=(t,e,r)=>e(a(r)),Ur=(t,e,r,n)=>{confirm(e()(b.PROFILE_DELETE_CONFIRM))&&r(a(n))},Fr=N('<div class="svelte-2icnig"><button class="svelte-2icnig"> </button> <button class="material-icon delete-profile svelte-2icnig">delete</button></div>'),Hr=N('<div> </div> <div class="profiles svelte-2icnig"><div class="svelte-2icnig"><button class="svelte-2icnig"> </button></div> <!></div> <div><b> <span class="required svelte-2icnig">*</span> :</b></div> <input type="text"> <button class="svelte-2icnig"> </button>',1);function qr(t,e){be(e,!1);const r=me(),n=()=>X(ve,"$currentProfile",r),o=()=>X($e,"$_",r);let d=x(e,"onclose",8,void 0),l=J(""),u=J([]);function i(h){wr(h),I(u,a(u).filter(v=>v!==h))}function s(h){ve.set(h),d()&&d()()}Ke(async()=>{I(u,await Ir())}),he();var f=L(()=>n()??o()(b.PROFILE_DEFAULT));mt(t,{get title(){return a(f)},get onclose(){return d()},children:(h,v)=>{var _=Hr(),c=de(_),R=y(c,!0);U(()=>W(R,o()(b.PROFILE_INFO))),E(c);var g=T(c,2),M=y(g),O=y(M);O.__click=[Lr,s];var P=y(O,!0);U(()=>W(P,o()(b.PROFILE_DEFAULT))),E(O),E(M);var m=T(M,2);Ee(m,1,()=>a(u),_e,(w,C)=>{var B=Fr(),Q=y(B);Q.__click=[xr,s,C];var z=y(Q,!0);E(Q);var re=T(Q,2);re.__click=[Ur,o,i,C],E(B),U(()=>W(z,a(C))),$(w,B)}),E(g);var p=T(g,2),A=y(p),q=y(A,!0);U(()=>W(q,o()(b.PROFILE_CREATE_LABEL))),Ce(2),E(A),E(p);var k=T(p,2);Ie(k),U(()=>Et(k,"placeholder",o()(b.PROFILE_CREATE_PLACEHOLDER)));var Y=T(k,2);Y.__click=[Cr,l,u];var H=y(Y,!0);U(()=>W(H,o()(b.PROFILE_CREATE))),E(Y),Pe(k,()=>a(l),w=>I(l,w)),$(h,_)},$$slots:{default:!0}}),ge()}pe(["click"]);var Yr=(t,e,r)=>e(a(r)),Br=N('<div class="filter svelte-1uygbo0"><button><!></button> </div>'),Qr=N('<section class="svelte-1uygbo0"></section>');function Wr(t,e){be(e,!1);const r=me(),n=()=>X(fe,"$localStorageStore",r),o=()=>X($e,"$_",r);function d(u){fe.update(i=>{const s=i.filters;return s&&(s[u]=!s[u]),{...i,filters:s}})}Ke(()=>{if(!ye(fe).filters){let i={};for(const s in Fe)i[s]=!0;for(const s in D)s!==D.EQUIPMENT&&(i[s]=!0);fe.update(s=>({...s,filters:i}))}}),he();var l=Qr();Ee(l,5,()=>Object.keys(n().filters||{}),_e,(u,i)=>{var s=Br(),f=y(s);f.__click=[Yr,d,i];const h=L(()=>`${`material-icon ${a(i).toLowerCase()}`??""} svelte-1uygbo0`);var v=y(f);{var _=R=>{var g=we("check");$(R,g)};j(v,R=>{n().filters[a(i)]&&R(_)})}E(f);var c=T(f);U(()=>W(c,` ${o()(a(i))??""}`)),E(s),U(()=>{Ve(f,a(h)),je(f,"checked",n().filters[a(i)])}),$(u,s)}),E(l),$(t,l),ge()}pe(["click"]);var Gr=N("<div> </div> <!>",1),Kr=(t,e)=>I(e,!0),Jr=(t,e,r)=>{I(e,!0),ft(r,-1)},Vr=(t,e,r)=>{I(e,!1),ft(r)},jr=N('<div class="months svelte-o5e3p2"></div>'),Xr=N('<div class="year svelte-o5e3p2"><!></div>'),zr=N('<header class="svelte-o5e3p2"><button class="profile svelte-o5e3p2"> </button> <div class="year-controls svelte-o5e3p2"><button class="svelte-o5e3p2"><!></button> <h2 class="svelte-o5e3p2"> </h2> <button class="svelte-o5e3p2"><!></button></div> <div><!></div></header> <div class="calendar svelte-o5e3p2"><!></div>',1),Zr=N("<!> <!> <!>",1);function ua(t,e){be(e,!1);const r=me(),n=()=>X(dt,"$momentStore",r),o=()=>X($e,"$_",r),d=()=>X(ve,"$currentProfile",r);let l=J([]),u=J(new Date().getFullYear()),i=J(),s=J(!1),f=J(!0);function h(A){I(i,A)}function v(A){if(!a(i))throw new Error("No selected day");at(l,a(l)[Ue(a(i),xe)]=A),I(i,void 0),kr(ye(ve),A)}function _(){if(!a(i))throw new Error("No selected day");return Ue(a(i),xe)}function c(){if(!a(i))throw new Error("No selected day");const A=_();Dr(ye(ve),A),at(l,a(l)[A]=void 0),I(i,void 0)}const R=ve.subscribe(async A=>{I(l,await lt(A))});Ke(async()=>{I(l,await lt(ye(ve))),console.log(await Wt())}),_t(()=>{R()}),he();var g=Zr(),M=de(g);{var O=A=>{var q=L(()=>n()(a(i)).format("dddd D MMMM yyyy"));mt(A,{get title(){return a(q)},onclose:()=>{I(i,void 0)},children:(k,Y)=>{var H=Gr(),w=de(H),C=y(w,!0);U(()=>W(C,o()(b.REWARDS_FORM_INFO))),E(w);var B=T(w,2);Tr(B,Le({get reward(){return a(l)[_()]},oncancel:()=>{I(i,void 0)}},()=>({onsave:v,date:a(i),ondelete:c}))),$(k,H)},$$slots:{default:!0}})};j(M,A=>{a(i)&&A(O)})}var P=T(M,2);{var m=A=>{qr(A,{onclose:()=>I(s,!1)})};j(P,A=>{a(s)&&A(m)})}var p=T(P,2);nt(p,{children:(A,q)=>{var k=zr(),Y=de(k),H=y(Y);H.__click=[Kr,s];var w=y(H,!0);U(()=>W(w,d()?`${o()(b.PROFILE)} : ${d()}`:o()(b.PROFILE_DEFAULT))),E(H);var C=T(H,2),B=y(C);B.__click=[Jr,f,u];var Q=y(B);st(Q,{children:(ne,oe)=>{Ce();var S=we("arrow_back_ios");$(ne,S)},$$slots:{default:!0}}),E(B);var z=T(B,2),re=y(z,!0);E(z);var ae=T(z,2);ae.__click=[Vr,f,u];var ce=y(ae);st(ce,{children:(ne,oe)=>{Ce();var S=we("arrow_forward_ios");$(ne,S)},$$slots:{default:!0}}),E(ae),E(C);var Me=T(C,2),Te=y(Me);Wr(Te,{}),E(Me),E(Y);var Se=T(Y,2),Oe=y(Se);Gt(Oe,()=>a(u),ne=>{var oe=Xr(),S=y(oe);nt(S,{get leftToRight(){return a(f)},children:(F,Z)=>{var ee=jr();Ee(ee,5,()=>Xt,_e,(G,se,K)=>{var V=L(()=>n()(new Date(0,K)).format("MMMM")),te=L(()=>K===new Date().getMonth()&&a(u)===new Date().getFullYear());Kt(G,{get title(){return a(V)},get outline(){return a(te)},children:($t,ea)=>{vr($t,Le(()=>({month:K,year:a(u),onselectday:h,calendar:a(l)})))},$$slots:{default:!0}})}),E(ee),$(F,ee)},$$slots:{default:!0}}),E(oe),$(ne,oe)}),E(Se),U(()=>W(re,a(u))),$(A,k)},$$slots:{default:!0}}),$(t,g),ge()}pe(["click"]);export{ua as component};
