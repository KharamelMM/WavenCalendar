import{l as it,s as ke,g as Re,b as te,a as y,c as xe,d as we,t as A,e as He,f as ut}from"../chunks/disclose-version.kqF2aIDQ.js";import{i as ve}from"../chunks/legacy.BasM-7ul.js";import{G as Q,H as Ve,aw as vt,ax as ct,a as ft,F as je,P as Xe,O as Ce,U as _t,Q as ne,L as Ne,ai as dt,aj as Et,E as ht,au as ze,J as gt,K as Ye,M as Ae,aq as yt,ay as ye,N as Ze,B as Be,az as bt,aA as pt,at as Mt,aB as Nt,aC as At,ag as St,a5 as mt,y as Qe,aD as Rt,aE as Tt,aF as Ot,ao as It,a8 as et,p as ce,aG as Te,t as G,b as fe,c as m,d as p,e as P,j as n,a0 as T,aH as Dt,v as K,q as C,f as le,aI as tt,aJ as $t}from"../chunks/utils.DrHicdKG.js";import{b as kt,p as $,i as ee,o as xt,s as Fe}from"../chunks/preload-helper.ClhVAyU4.js";import{t as g,h as Pe,d as Ue,r as Se,b as me,i as wt,f as qe,j as We,k as Ct,s as at,M as Pt,C as Ut}from"../chunks/Modal.ChOqFKhB.js";function Lt(e,t,a){Q&&Ve();var r=e,s=_t,o,l=vt()?ct:ft;je(()=>{l(s,s=t())&&(o&&Xe(o),o=Ce(()=>a(r)))}),Q&&(r=ne)}function oe(e,t){return t}function Ht(e,t,a,r){for(var s=[],o=t.length,l=0;l<o;l++)pt(t[l].e,s,!0);var h=o>0&&s.length===0&&a!==null;if(h){var c=a.parentNode;Mt(c),c.append(a),r.clear(),j(e,t[0].prev,t[o-1].next)}Nt(s,()=>{for(var E=0;E<o;E++){var i=t[E];h||(r.delete(i.k),j(e,i.prev,i.next)),At(i.e,!h)}})}function ie(e,t,a,r,s,o=null){var l=e,h={flags:t,items:new Map,first:null};{var c=e;l=Q?Ne(dt(c)):c.appendChild(Et())}Q&&Ve();var E=null,i=!1;je(()=>{var d=a(),u=ht(d)?d:d==null?[]:ze(d),v=u.length;if(i&&v===0)return;i=v===0;let _=!1;if(Q){var R=l.data===gt;R!==(v===0)&&(l=Ye(),Ne(l),Ae(!1),_=!0)}if(Q){for(var M=null,f,b=0;b<v;b++){if(ne.nodeType===8&&ne.data===yt){l=ne,_=!0,Ae(!1);break}var F=u[b],O=r(F,b);f=rt(ne,h,M,null,F,O,b,s,t),h.items.set(O,f),M=f}v>0&&Ne(Ye())}if(!Q){var I=St;Yt(u,h,l,s,t,(I.f&ye)!==0,r)}o!==null&&(v===0?E?Ze(E):E=Ce(()=>o(l)):E!==null&&Xe(E,()=>{E=null})),_&&Ae(!0),a()}),Q&&(l=ne)}function Yt(e,t,a,r,s,o,l){var h=e.length,c=t.items,E=t.first,i=E,d,u=null,v=[],_=[],R,M,f,b;for(b=0;b<h;b+=1){if(R=e[b],M=l(R,b),f=c.get(M),f===void 0){var F=i?i.e.nodes_start:a;u=rt(F,t,u,u===null?t.first:u.next,R,M,b,r,s),c.set(M,u),v=[],_=[],i=u.next;continue}if(Bt(f,R,b),f.e.f&ye&&Ze(f.e),f!==i){if(d!==void 0&&d.has(f)){if(v.length<_.length){var O=_[0],I;u=O.prev;var H=v[0],Y=v[v.length-1];for(I=0;I<v.length;I+=1)Ke(v[I],O,a);for(I=0;I<_.length;I+=1)d.delete(_[I]);j(t,H.prev,Y.next),j(t,u,H),j(t,Y,O),i=O,u=Y,b-=1,v=[],_=[]}else d.delete(f),Ke(f,i,a),j(t,f.prev,f.next),j(t,f,u===null?t.first:u.next),j(t,u,f),u=f;continue}for(v=[],_=[];i!==null&&i.k!==M;)(o||!(i.e.f&ye))&&(d??(d=new Set)).add(i),_.push(i),i=i.next;if(i===null)continue;f=i}v.push(f),u=f,i=f.next}if(i!==null||d!==void 0){for(var k=d===void 0?[]:ze(d);i!==null;)(o||!(i.e.f&ye))&&k.push(i),i=i.next;var X=k.length;if(X>0){var U=h===0?a:null;Ht(t,k,U,c)}}Be.first=t.first&&t.first.e,Be.last=u&&u.e}function Bt(e,t,a,r){bt(e.v,t),e.i=a}function rt(e,t,a,r,s,o,l,h,c){var E=(c&Tt)!==0,i=(c&Ot)===0,d=E?i?mt(s):Qe(s):s,u=c&Rt?Qe(l):l,v={i:u,v:d,k:o,a:null,e:null,prev:a,next:r};try{return v.e=Ce(()=>h(e,d,u),Q),v.e.prev=a&&a.e,v.e.next=r&&r.e,a===null?t.first=v:(a.next=v,a.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function Ke(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,s=t?t.e.nodes_start:a,o=e.e.nodes_start;o!==r;){var l=It(o);s.before(o),o=l}}function j(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Qt(e,t){var a=e.__className,r=Ft(t);Q&&e.className===r?e.__className=r:(a!==r||Q&&e.className!==r)&&(t==null?e.removeAttribute("class"):e.className=r,e.__className=r)}function Ft(e){return e??""}function qt(e,t,a){if(a){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function nt(e,t,a){if(e.multiple)return Gt(e,t);for(var r of e.options){var s=ue(r);if(kt(s,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Wt(e,t){et(()=>{var a=new MutationObserver(()=>{var r=e.__value;nt(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Kt(e,t,a=t){var r=!0;it(e,"change",s=>{var o=s?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),ue);else{var h=e.querySelector(o)??e.querySelector("option:not([disabled])");l=h&&ue(h)}a(l)}),et(()=>{var s=t();if(nt(e,s,r),r&&s===void 0){var o=e.querySelector(":checked");o!==null&&(s=ue(o),a(s))}e.__value=s,r=!1}),Wt(e)}function Gt(e,t){for(var a of e.options)a.selected=~t.indexOf(ue(a))}function ue(e){return"__value"in e?e.__value:e.value}var S=(e=>(e.GEMS="GEMS",e.KAMAS="KAMAS",e.EQUIPMENT="EQUIPMENT",e.CHEST="CHEST",e.WAKFU="WAKFU",e.RUNES="RUNES",e))(S||{});const Jt=[g.JANUARY,g.FEBRUARY,g.MARCH,g.APRIL,g.MAY,g.JUNE,g.JULY,g.AUGUST,g.SEPTEMBER,g.OCTOBER,g.NOVEMBER,g.DECEMBER],se=[g.SHORT_SUNDAY,g.SHORT_MONDAY,g.SHORT_TUESDAY,g.SHORT_WEDNESDAY,g.SHORT_THURSDAY,g.SHORT_FRIDAY,g.SHORT_SATURDAY],be=new Date(2024,0,1);function st(e,t){return new Date(t,e+1,0).getDate()}function lt(e,t){return new Date(t,e,1).getDay()}function ot(e,t){return(e-t+se.length)%se.length}function Vt(e,t,a=0){const r=ot(lt(e,t),a),s=st(e,t);return Math.ceil((r+s)/7)}function jt(e,t,a,r,s=0){return a+r*se.length-ot(lt(e,t),s)+1}function Xt(e,t){return Math.floor((e.getTime()-t.getTime())/(1e3*60*60*24))}function pe(e,t){return(Xt(e,t)%365+365)%365}function zt(e,t){ce(t,!1);const a=ke(),r=()=>xe(Pe,"$_",a);let s=$(t,"key",8);ve(),Te();var o=Re();G(()=>te(o,r()(s()))),y(e,o),fe()}var Zt=A("<th><!></th>"),ea=(e,t,a)=>t()(n(a)),ta=A("<button> </button>"),aa=A("<td><!></td>"),ra=A("<tr></tr>"),na=A("<table><thead><tr></tr></thead><tbody></tbody></table>");function sa(e,t){ce(t,!1);let a=$(t,"year",8),r=$(t,"month",8),s=$(t,"onselectday",8),o=$(t,"calendar",8),l=$(t,"weekOffset",8,1);const h=se.length,c=new Date;function E(_){let R=pe(_,be);if(o()[R]){const M=o()[R];return M.type===S.EQUIPMENT?M.rarety.toLowerCase():M.type.toLowerCase()}}ve();var i=na(),d=m(i),u=m(d);ie(u,5,()=>({length:h}),oe,(_,R,M)=>{var f=Zt(),b=m(f);zt(b,{get key(){return se[(M+l())%h]}}),p(f),y(_,f)}),p(u),p(d);var v=P(d);ie(v,5,()=>({length:Vt(r(),a(),l())}),oe,(_,R,M)=>{var f=ra();const b=T(()=>st(r(),a()));ie(f,5,()=>se,oe,(O,I,H)=>{var Y=aa();const k=T(()=>jt(r(),a(),H,M,l()));var X=m(Y);{var U=x=>{var D=ta();const q=T(()=>new Date(a(),r(),n(k))),_e=T(()=>`${E(n(q))??""} svelte-7ilb2v`);D.__click=[ea,s,q];const V=T(()=>n(q).toDateString()===c.toDateString());var ae=m(D,!0);p(D),G(()=>{Qt(D,n(_e)),D.disabled=n(q)>c,qt(D,"today",n(V)),te(ae,n(k))}),y(x,D)};ee(X,x=>{n(k)>0&&n(k)<=n(b)&&x(U)})}p(Y),y(O,Y)}),p(f),y(_,f)}),p(v),p(i),y(e,i),fe()}we(["click"]);var Oe=(e=>(e.COMPANIONS="COMPANIONS",e.SPELLS="SPELLS",e.EQUIPMENTS="EQUIPMENTS",e))(Oe||{}),Ie=(e=>(e.RING="RING",e.ARMBAND="ARMBAND",e.COMPANION="COMPANION",e))(Ie||{}),De=(e=>(e.COMMON="COMMON",e.RARE="RARE",e.KROSMIC="KROSMIC",e.INFINITE="INFINITE",e))(De||{}),la=A("<span> </span>"),oa=A('<section class="svelte-1j4lmfo"><!> <!></section>');function $e(e,t){let a=$(t,"title",8,void 0);var r=oa(),s=m(r);{var o=h=>{var c=la(),E=m(c);p(c),G(()=>te(E,`${a()??""}:`)),y(h,c)};ee(s,h=>{a()&&h(o)})}var l=P(s,2);Ue(l,t,"default",{}),p(r),y(e,r)}var ia=A("<option> </option>"),ua=A("<select></select>");function ge(e,t){ce(t,!1);const a=ke(),r=()=>xe(Pe,"$_",a);let s=$(t,"title",8,void 0),o=$(t,"values",24,()=>[]),l=$(t,"value",12);ve(),$e(e,{get title(){return s()},children:(h,c)=>{var E=ua();G(()=>{l(),Dt(()=>{o(),r()})}),ie(E,5,o,oe,(i,d)=>{var u=ia(),v={},_=m(u,!0);G(()=>te(_,r()(n(d)))),p(u),G(()=>{v!==(v=n(d))&&(u.value=(u.__value=n(d))==null?"":n(d))}),y(i,u)}),p(E),Kt(E,l),y(h,E)},$$slots:{default:!0}}),fe()}function va(e){return Object.values(e).filter(t=>typeof t!="number")}var ca=A("<!> <!>",1),fa=A('<input type="number" min="100" max="250" step="50">'),_a=A('<input type="number" min="1" max="5000">'),da=A('<input type="text">'),Ea=(e,t)=>t()(),ha=A('<section class="svelte-1hgxb16"><!> <!> <!> <!> <div class="controls svelte-1hgxb16"><button class="secondary svelte-1hgxb16"> </button> <button class="primary svelte-1hgxb16"> </button></div></section>');function ga(e,t){var V,ae,de,Ee,he,Me,Le;ce(t,!1);const a=ke(),r=()=>xe(Pe,"$_",a);let s=$(t,"oncancel",8),o=$(t,"onsave",8),l=$(t,"reward",8,void 0),h=$(t,"date",8),c=K(((V=l())==null?void 0:V.type)??S.EQUIPMENT),E=K(((ae=l())==null?void 0:ae.type)===S.EQUIPMENT?l().rarety:De.COMMON),i=K(((de=l())==null?void 0:de.type)===S.RUNES||((Ee=l())==null?void 0:Ee.type)===S.CHEST?l().equipment:Oe.EQUIPMENTS),d=K(((he=l())==null?void 0:he.type)===S.EQUIPMENT?l().item:Ie.RING),u=K(((Me=l())==null?void 0:Me.amount)??1),v=K(((Le=l())==null?void 0:Le.type)===S.EQUIPMENT?l().description:void 0);function _(){let N;const w={cycle_index:pe(h(),be),amount:n(u)};switch(n(c)){case S.GEMS:N={...w,type:n(c),amount:n(u)};break;case S.EQUIPMENT:N={...w,type:n(c),rarety:n(E),item:n(d),description:n(v)};break;case S.CHEST:N={...w,type:n(c),equipment:n(i)};break;case S.RUNES:N={...w,type:n(c),equipment:n(i)};break;case S.KAMAS:case S.WAKFU:N={...w,type:n(c)};break}o()(N)}ve();var R=ha(),M=m(R),f=T(()=>r()(g.REWARD_LABEL_TYPE)),b=T(()=>va(S));ge(M,{get title(){return n(f)},get values(){return n(b)},get value(){return n(c)},set value(N){C(c,N)},$$legacy:!0});var F=P(M,2);{var O=N=>{var w=ca(),J=le(w),re=T(()=>r()(g.REWARD_LABEL_RARETY)),L=T(()=>Object.keys(De));ge(J,{get title(){return n(re)},get values(){return n(L)},get value(){return n(E)},set value(Z){C(E,Z)},$$legacy:!0});var z=P(J,2),W=T(()=>r()(g.REWARD_LABEL_ITEM_TYPE)),B=T(()=>Object.keys(Ie));ge(z,{get title(){return n(W)},get values(){return n(B)},get value(){return n(d)},set value(Z){C(d,Z)},$$legacy:!0}),y(N,w)},I=N=>{var w=He(),J=le(w);{var re=L=>{var z=T(()=>r()(g.REWARD_LABEL_EQUIPMENT_TYPE)),W=T(()=>Object.keys(Oe));ge(L,{get title(){return n(z)},get values(){return n(W)},get value(){return n(i)},set value(B){C(i,B)},$$legacy:!0})};ee(J,L=>{(n(c)===S.CHEST||n(c)===S.RUNES)&&L(re)},!0)}y(N,w)};ee(F,N=>{n(c)===S.EQUIPMENT?N(O):N(I,!1)})}var H=P(F,2),Y=T(()=>r()(g.REWARD_LABEL_AMOUNT));$e(H,{get title(){return n(Y)},children:(N,w)=>{var J=He(),re=le(J);{var L=W=>{var B=fa();Se(B),me(B,()=>n(u),Z=>C(u,Z)),y(W,B)},z=W=>{var B=_a();Se(B),me(B,()=>n(u),Z=>C(u,Z)),y(W,B)};ee(re,W=>{n(c)===S.GEMS?W(L):W(z,!1)})}y(N,J)},$$slots:{default:!0}});var k=P(H,2);{var X=N=>{var w=T(()=>r()(g.REWARD_LABEL_EQUIPMENT_MORE));$e(N,{get title(){return n(w)},children:(J,re)=>{var L=da();Se(L),G(()=>wt(L,"placeholder",r()(g.EQUIPMENT_MORE_PLACEHOLDER))),me(L,()=>n(v),z=>C(v,z)),y(J,L)},$$slots:{default:!0}})};ee(k,N=>{n(c)===S.EQUIPMENT&&N(X)})}var U=P(k,2),x=m(U);x.__click=[Ea,s];var D=m(x,!0);G(()=>te(D,r()(g.CANCEL))),p(x);var q=P(x,2);q.__click=_;var _e=m(q,!0);G(()=>te(_e,r()(g.SAVE))),p(q),p(U),p(R),y(e,R),fe()}we(["click"]);var ya=A('<section class="svelte-1p5vij8"><!></section>');function Ge(e,t){let a=$(t,"leftToRight",8,!0);const r=1e3;var s=ya(),o=m(s);Ue(o,t,"default",{}),p(s),qe(1,s,()=>We,()=>({delay:250,x:r*(a()?-1:1)})),qe(2,s,()=>We,()=>({duration:250,x:r*(a()?1:-1)})),y(e,s)}var ba=A('<section class="material-icon"><!></section>');function Je(e,t){var a=ba(),r=m(a);Ue(r,t,"default",{}),p(a),y(e,a)}var pa=A('<button class="svelte-4xatps">Se d√©connecter</button>');function Ma(e){var t=pa();ut("click",t,function(...a){var r;(r=Ct)==null||r.apply(this,a)}),y(e,t)}async function Na(e){const t=await at.from("T_Reward").upsert(e).select();if(t.error)throw t.error;return t.data[0]}async function Aa(){const e=await at.from("T_Reward").select();if(e.error)throw e.error;const t=e.data;console.log(t);const a=[];for(const r of t){const s=r;a[s.cycle_index]=s}return a}var Sa=(e,t,a)=>{C(t,!0),tt(a,-1)},ma=(e,t,a)=>{C(t,!1),tt(a)},Ra=A('<div class="months svelte-oihcp3"></div>'),Ta=A('<div class="year svelte-oihcp3"><!></div>'),Oa=A('<header class="svelte-oihcp3"><button class="svelte-oihcp3"><!></button> <h2 class="svelte-oihcp3"> </h2> <button class="svelte-oihcp3"><!></button></header> <div class="calendar svelte-oihcp3"><!></div>',1),Ia=A("<!> <!> <!>",1);function Ca(e,t){ce(t,!1);let a=K([]),r=K(new Date().getFullYear()),s=K(),o=K(!0);function l(_){C(s,_)}function h(_){if(!n(s))throw new Error("No selected day");$t(a,n(a)[pe(n(s),be)]=_),C(s,void 0),Na(_)}function c(){if(!n(s))throw new Error("No selected day");return pe(n(s),be)}xt(async()=>{C(a,await Aa())}),ve();var E=Ia(),i=le(E);{var d=_=>{var R=T(()=>n(s).toDateString());Pt(_,{get title(){return n(R)},onclose:()=>{C(s,void 0)},children:(M,f)=>{ga(M,Fe({get reward(){return n(a)[c()]},oncancel:()=>{C(s,void 0)}},()=>({onsave:h,date:n(s)})))},$$slots:{default:!0}})};ee(i,_=>{n(s)&&_(d)})}var u=P(i,2);Ge(u,{children:(_,R)=>{var M=Oa(),f=le(M),b=m(f);b.__click=[Sa,o,r];var F=m(b);Je(F,{children:(U,x)=>{Te();var D=Re("arrow_back_ios");y(U,D)},$$slots:{default:!0}}),p(b);var O=P(b,2),I=m(O,!0);p(O);var H=P(O,2);H.__click=[ma,o,r];var Y=m(H);Je(Y,{children:(U,x)=>{Te();var D=Re("arrow_forward_ios");y(U,D)},$$slots:{default:!0}}),p(H),p(f);var k=P(f,2),X=m(k);Lt(X,()=>n(r),U=>{var x=Ta(),D=m(x);Ge(D,{get leftToRight(){return n(o)},children:(q,_e)=>{var V=Ra();ie(V,5,()=>Jt,oe,(ae,de,Ee)=>{Ut(ae,{get i18nTitleKey(){return n(de)},children:(he,Me)=>{sa(he,Fe(()=>({month:Ee,year:n(r),onselectday:l,calendar:n(a)})))},$$slots:{default:!0}})}),p(V),y(q,V)},$$slots:{default:!0}}),p(x),y(U,x)}),p(k),G(()=>te(I,n(r))),y(_,M)},$$slots:{default:!0}});var v=P(u,2);Ma(v),y(e,E),fe()}we(["click"]);export{Ca as component};
