import{l as it,a as y,t as p,b as j,d as Ce,s as Me,c as Ne,g as Ie,e as He,f as ut}from"../chunks/disclose-version.kqF2aIDQ.js";import{i as ne}from"../chunks/legacy.BasM-7ul.js";import{G as Q,H as Ve,aw as ct,ax as vt,a as ft,F as je,P as Xe,O as Pe,U as dt,Q as ae,L as Se,ai as _t,aj as Et,E as ht,au as ze,J as gt,K as Ye,M as Re,aq as yt,ay as ge,N as Ze,B as Be,az as bt,aA as Mt,at as Nt,aB as pt,aC as At,ag as mt,a5 as St,y as Qe,aD as Rt,aE as Tt,aF as Ot,ao as It,a8 as et,c as A,e as C,d as b,t as F,p as se,j as s,b as le,a0 as O,aG as De,aH as Dt,v as W,q as x,f as ie,aI as tt,aJ as $t}from"../chunks/utils.DrHicdKG.js";import{b as kt,p as R,i as V,o as wt,s as Fe}from"../chunks/preload-helper.ClhVAyU4.js";import{t as g,d as pe,h as Ae,r as Te,b as Oe,i as xt,f as qe,j as We,k as Ct,s as at,M as Pt,C as Ut}from"../chunks/Modal.CInKUVHh.js";function Lt(e,t,a){Q&&Ve();var r=e,n=dt,i,l=ct()?vt:ft;je(()=>{l(n,n=t())&&(i&&Xe(i),i=Pe(()=>a(r)))}),Q&&(r=ae)}function ue(e,t){return t}function Ht(e,t,a,r){for(var n=[],i=t.length,l=0;l<i;l++)Mt(t[l].e,n,!0);var _=i>0&&n.length===0&&a!==null;if(_){var c=a.parentNode;Nt(c),c.append(a),r.clear(),J(e,t[0].prev,t[i-1].next)}pt(n,()=>{for(var f=0;f<i;f++){var u=t[f];_||(r.delete(u.k),J(e,u.prev,u.next)),At(u.e,!_)}})}function ce(e,t,a,r,n,i=null){var l=e,_={flags:t,items:new Map,first:null};{var c=e;l=Q?Se(_t(c)):c.appendChild(Et())}Q&&Ve();var f=null,u=!1;je(()=>{var h=a(),v=ht(h)?h:h==null?[]:ze(h),o=v.length;if(u&&o===0)return;u=o===0;let E=!1;if(Q){var T=l.data===gt;T!==(o===0)&&(l=Ye(),Se(l),Re(!1),E=!0)}if(Q){for(var M=null,d,N=0;N<o;N++){if(ae.nodeType===8&&ae.data===yt){l=ae,E=!0,Re(!1);break}var H=v[N],D=r(H,N);d=rt(ae,_,M,null,H,D,N,n,t),_.items.set(D,d),M=d}o>0&&Se(Ye())}if(!Q){var I=mt;Yt(v,_,l,n,t,(I.f&ge)!==0,r)}i!==null&&(o===0?f?Ze(f):f=Pe(()=>i(l)):f!==null&&Xe(f,()=>{f=null})),E&&Re(!0),a()}),Q&&(l=ae)}function Yt(e,t,a,r,n,i,l){var _=e.length,c=t.items,f=t.first,u=f,h,v=null,o=[],E=[],T,M,d,N;for(N=0;N<_;N+=1){if(T=e[N],M=l(T,N),d=c.get(M),d===void 0){var H=u?u.e.nodes_start:a;v=rt(H,t,v,v===null?t.first:v.next,T,M,N,r,n),c.set(M,v),o=[],E=[],u=v.next;continue}if(Bt(d,T,N),d.e.f&ge&&Ze(d.e),d!==u){if(h!==void 0&&h.has(d)){if(o.length<E.length){var D=E[0],I;v=D.prev;var P=o[0],U=o[o.length-1];for(I=0;I<o.length;I+=1)Ke(o[I],D,a);for(I=0;I<E.length;I+=1)h.delete(E[I]);J(t,P.prev,U.next),J(t,v,P),J(t,U,D),u=D,v=U,N-=1,o=[],E=[]}else h.delete(d),Ke(d,u,a),J(t,d.prev,d.next),J(t,d,v===null?t.first:v.next),J(t,v,d),v=d;continue}for(o=[],E=[];u!==null&&u.k!==M;)(i||!(u.e.f&ge))&&(h??(h=new Set)).add(u),E.push(u),u=u.next;if(u===null)continue;d=u}o.push(d),v=d,u=d.next}if(u!==null||h!==void 0){for(var Y=h===void 0?[]:ze(h);u!==null;)(i||!(u.e.f&ge))&&Y.push(u),u=u.next;var X=Y.length;if(X>0){var $=_===0?a:null;Ht(t,Y,$,c)}}Be.first=t.first&&t.first.e,Be.last=v&&v.e}function Bt(e,t,a,r){bt(e.v,t),e.i=a}function rt(e,t,a,r,n,i,l,_,c){var f=(c&Tt)!==0,u=(c&Ot)===0,h=f?u?St(n):Qe(n):n,v=c&Rt?Qe(l):l,o={i:v,v:h,k:i,a:null,e:null,prev:a,next:r};try{return o.e=Pe(()=>_(e,h,v),Q),o.e.prev=a&&a.e,o.e.next=r&&r.e,a===null?t.first=o:(a.next=o,a.e.next=o.e),r!==null&&(r.prev=o,r.e.prev=o.e),o}finally{}}function Ke(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,n=t?t.e.nodes_start:a,i=e.e.nodes_start;i!==r;){var l=It(i);n.before(i),i=l}}function J(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Qt(e,t){var a=e.__className,r=Ft(t);Q&&e.className===r?e.__className=r:(a!==r||Q&&e.className!==r)&&(t==null?e.removeAttribute("class"):e.className=r,e.__className=r)}function Ft(e){return e??""}function qt(e,t,a){if(a){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function nt(e,t,a){if(e.multiple)return Gt(e,t);for(var r of e.options){var n=ve(r);if(kt(n,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Wt(e,t){et(()=>{var a=new MutationObserver(()=>{var r=e.__value;nt(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Kt(e,t,a=t){var r=!0;it(e,"change",n=>{var i=n?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(i),ve);else{var _=e.querySelector(i)??e.querySelector("option:not([disabled])");l=_&&ve(_)}a(l)}),et(()=>{var n=t();if(nt(e,n,r),r&&n===void 0){var i=e.querySelector(":checked");i!==null&&(n=ve(i),a(n))}e.__value=n,r=!1}),Wt(e)}function Gt(e,t){for(var a of e.options)a.selected=~t.indexOf(ve(a))}function ve(e){return"__value"in e?e.__value:e.value}var S=(e=>(e.GEMS="GEMS",e.KAMAS="KAMAS",e.EQUIPMENT="EQUIPMENT",e.CHEST="CHEST",e.WAKFU="WAKFU",e.RUNES="RUNES",e))(S||{});const Jt=[g.JANUARY,g.FEBRUARY,g.MARCH,g.APRIL,g.MAY,g.JUNE,g.JULY,g.AUGUST,g.SEPTEMBER,g.OCTOBER,g.NOVEMBER,g.DECEMBER],re=[g.SHORT_SUNDAY,g.SHORT_MONDAY,g.SHORT_TUESDAY,g.SHORT_WEDNESDAY,g.SHORT_THURSDAY,g.SHORT_FRIDAY,g.SHORT_SATURDAY],ye=new Date(2024,0,1);function st(e,t){return new Date(t,e+1,0).getDate()}function lt(e,t){return new Date(t,e,1).getDay()}function ot(e,t){return(e-t+re.length)%re.length}function Vt(e,t,a=0){const r=ot(lt(e,t),a),n=st(e,t);return Math.ceil((r+n)/7)}function jt(e,t,a,r,n=0){return a+r*re.length-ot(lt(e,t),n)+1}function Xt(e,t){return Math.floor((e.getTime()-t.getTime())/(1e3*60*60*24))}function be(e,t){return(Xt(e,t)%365+365)%365}var zt=p('<span class="text svelte-4cg0go"> </span>'),Zt=p('<section class="tooltip svelte-4cg0go"><!> <!></section>');function ea(e,t){let a=R(t,"title",8,void 0);var r=Zt(),n=A(r);pe(n,t,"default",{});var i=C(n,2);{var l=_=>{var c=zt(),f=A(c,!0);b(c),F(()=>j(f,a())),y(_,c)};V(i,_=>{a()&&_(l)})}b(r),y(e,r)}var ta=p("<button> </button>");function aa(e,t){se(t,!1);const a=Me(),r=()=>Ne(Ae,"$_",a);let n=R(t,"currentDate",8),i=R(t,"dayOfMonth",8),l=R(t,"reward",8,void 0),_=R(t,"onclick",8);const c=new Date;function f(){if(l())return l().type===S.EQUIPMENT?l().rarety.toLowerCase():l().type.toLowerCase()}ne();var u=O(()=>l()?`${l().amount}× ${r()(l().type)}`:void 0);ea(e,{get title(){return s(u)},children:(h,v)=>{var o=ta();const E=O(()=>`${f()??""} svelte-7ilb2v`);o.__click=function(...d){var N;(N=_())==null||N.apply(this,d)};const T=O(()=>n().toDateString()===c.toDateString());var M=A(o,!0);b(o),F(()=>{Qt(o,s(E)),o.disabled=n()>c,qt(o,"today",s(T)),j(M,i())}),y(h,o)},$$slots:{default:!0}}),le()}Ce(["click"]);function ra(e,t){se(t,!1);const a=Me(),r=()=>Ne(Ae,"$_",a);let n=R(t,"key",8);ne(),De();var i=Ie();F(()=>j(i,r()(n()))),y(e,i),le()}var na=p("<th><!></th>"),sa=p("<td><!></td>"),la=p("<tr></tr>"),oa=p("<table><thead><tr></tr></thead><tbody></tbody></table>");function ia(e,t){se(t,!1);let a=R(t,"year",8),r=R(t,"month",8),n=R(t,"onselectday",8),i=R(t,"calendar",8),l=R(t,"weekOffset",8,1);const _=re.length;function c(o){let E=be(o,ye);return i()[E]}ne();var f=oa(),u=A(f),h=A(u);ce(h,5,()=>({length:_}),ue,(o,E,T)=>{var M=na(),d=A(M);ra(d,{get key(){return re[(T+l())%_]}}),b(M),y(o,M)}),b(h),b(u);var v=C(u);ce(v,5,()=>({length:Vt(r(),a(),l())}),ue,(o,E,T)=>{var M=la();const d=O(()=>st(r(),a()));ce(M,5,()=>re,ue,(H,D,I)=>{var P=sa();const U=O(()=>jt(r(),a(),I,T,l()));var Y=A(P);{var X=$=>{const k=O(()=>new Date(a(),r(),s(U))),K=O(()=>c(s(k)));aa($,{get currentDate(){return s(k)},get dayOfMonth(){return s(U)},get reward(){return s(K)},onclick:()=>n()(s(k))})};V(Y,$=>{s(U)>0&&s(U)<=s(d)&&$(X)})}b(P),y(H,P)}),b(M),y(o,M)}),b(v),b(f),y(e,f),le()}var $e=(e=>(e.COMPANIONS="COMPANIONS",e.SPELLS="SPELLS",e.EQUIPMENTS="EQUIPMENTS",e))($e||{}),ke=(e=>(e.RING="RING",e.ARMBAND="ARMBAND",e.COMPANION="COMPANION",e))(ke||{}),we=(e=>(e.COMMON="COMMON",e.RARE="RARE",e.KROSMIC="KROSMIC",e.INFINITE="INFINITE",e))(we||{}),ua=p("<span> </span>"),ca=p('<section class="svelte-1j4lmfo"><!> <!></section>');function xe(e,t){let a=R(t,"title",8,void 0);var r=ca(),n=A(r);{var i=_=>{var c=ua(),f=A(c);b(c),F(()=>j(f,`${a()??""}:`)),y(_,c)};V(n,_=>{a()&&_(i)})}var l=C(n,2);pe(l,t,"default",{}),b(r),y(e,r)}var va=p("<option> </option>"),fa=p("<select></select>");function he(e,t){se(t,!1);const a=Me(),r=()=>Ne(Ae,"$_",a);let n=R(t,"title",8,void 0),i=R(t,"values",24,()=>[]),l=R(t,"value",12);ne(),xe(e,{get title(){return n()},children:(_,c)=>{var f=fa();F(()=>{l(),Dt(()=>{i(),r()})}),ce(f,5,i,ue,(u,h)=>{var v=va(),o={},E=A(v,!0);F(()=>j(E,r()(s(h)))),b(v),F(()=>{o!==(o=s(h))&&(v.value=(v.__value=s(h))==null?"":s(h))}),y(u,v)}),b(f),Kt(f,l),y(_,f)},$$slots:{default:!0}}),le()}function da(e){return Object.values(e).filter(t=>typeof t!="number")}var _a=p("<!> <!>",1),Ea=p('<input type="number" min="100" max="250" step="50">'),ha=p('<input type="number" min="1" max="5000">'),ga=p('<input type="text">'),ya=(e,t)=>t()(),ba=p('<section class="svelte-1hgxb16"><!> <!> <!> <!> <div class="controls svelte-1hgxb16"><button class="secondary svelte-1hgxb16"> </button> <button class="primary svelte-1hgxb16"> </button></div></section>');function Ma(e,t){var ee,fe,de,_e,Ee,me,Le;se(t,!1);const a=Me(),r=()=>Ne(Ae,"$_",a);let n=R(t,"oncancel",8),i=R(t,"onsave",8),l=R(t,"reward",8,void 0),_=R(t,"date",8),c=W(((ee=l())==null?void 0:ee.type)??S.EQUIPMENT),f=W(((fe=l())==null?void 0:fe.type)===S.EQUIPMENT?l().rarety:we.COMMON),u=W(((de=l())==null?void 0:de.type)===S.RUNES||((_e=l())==null?void 0:_e.type)===S.CHEST?l().equipment:$e.EQUIPMENTS),h=W(((Ee=l())==null?void 0:Ee.type)===S.EQUIPMENT?l().item:ke.RING),v=W(((me=l())==null?void 0:me.amount)??1),o=W(((Le=l())==null?void 0:Le.type)===S.EQUIPMENT?l().description:void 0);function E(){let m;const w={cycle_index:be(_(),ye),amount:s(v)};switch(s(c)){case S.GEMS:m={...w,type:s(c),amount:s(v)};break;case S.EQUIPMENT:m={...w,type:s(c),rarety:s(f),item:s(h),description:s(o)};break;case S.CHEST:m={...w,type:s(c),equipment:s(u)};break;case S.RUNES:m={...w,type:s(c),equipment:s(u)};break;case S.KAMAS:case S.WAKFU:m={...w,type:s(c)};break}i()(m)}ne();var T=ba(),M=A(T),d=O(()=>r()(g.REWARD_LABEL_TYPE)),N=O(()=>da(S));he(M,{get title(){return s(d)},get values(){return s(N)},get value(){return s(c)},set value(m){x(c,m)},$$legacy:!0});var H=C(M,2);{var D=m=>{var w=_a(),G=ie(w),te=O(()=>r()(g.REWARD_LABEL_RARETY)),L=O(()=>Object.keys(we));he(G,{get title(){return s(te)},get values(){return s(L)},get value(){return s(f)},set value(Z){x(f,Z)},$$legacy:!0});var z=C(G,2),q=O(()=>r()(g.REWARD_LABEL_ITEM_TYPE)),B=O(()=>Object.keys(ke));he(z,{get title(){return s(q)},get values(){return s(B)},get value(){return s(h)},set value(Z){x(h,Z)},$$legacy:!0}),y(m,w)},I=m=>{var w=He(),G=ie(w);{var te=L=>{var z=O(()=>r()(g.REWARD_LABEL_EQUIPMENT_TYPE)),q=O(()=>Object.keys($e));he(L,{get title(){return s(z)},get values(){return s(q)},get value(){return s(u)},set value(B){x(u,B)},$$legacy:!0})};V(G,L=>{(s(c)===S.CHEST||s(c)===S.RUNES)&&L(te)},!0)}y(m,w)};V(H,m=>{s(c)===S.EQUIPMENT?m(D):m(I,!1)})}var P=C(H,2),U=O(()=>r()(g.REWARD_LABEL_AMOUNT));xe(P,{get title(){return s(U)},children:(m,w)=>{var G=He(),te=ie(G);{var L=q=>{var B=Ea();Te(B),Oe(B,()=>s(v),Z=>x(v,Z)),y(q,B)},z=q=>{var B=ha();Te(B),Oe(B,()=>s(v),Z=>x(v,Z)),y(q,B)};V(te,q=>{s(c)===S.GEMS?q(L):q(z,!1)})}y(m,G)},$$slots:{default:!0}});var Y=C(P,2);{var X=m=>{var w=O(()=>r()(g.REWARD_LABEL_EQUIPMENT_MORE));xe(m,{get title(){return s(w)},children:(G,te)=>{var L=ga();Te(L),F(()=>xt(L,"placeholder",r()(g.EQUIPMENT_MORE_PLACEHOLDER))),Oe(L,()=>s(o),z=>x(o,z)),y(G,L)},$$slots:{default:!0}})};V(Y,m=>{s(c)===S.EQUIPMENT&&m(X)})}var $=C(Y,2),k=A($);k.__click=[ya,n];var K=A(k,!0);F(()=>j(K,r()(g.CANCEL))),b(k);var oe=C(k,2);oe.__click=E;var Ue=A(oe,!0);F(()=>j(Ue,r()(g.SAVE))),b(oe),b($),b(T),y(e,T),le()}Ce(["click"]);var Na=p('<section class="svelte-1p5vij8"><!></section>');function Ge(e,t){let a=R(t,"leftToRight",8,!0);const r=1e3;var n=Na(),i=A(n);pe(i,t,"default",{}),b(n),qe(1,n,()=>We,()=>({delay:250,x:r*(a()?-1:1)})),qe(2,n,()=>We,()=>({duration:250,x:r*(a()?1:-1)})),y(e,n)}var pa=p('<section class="material-icon"><!></section>');function Je(e,t){var a=pa(),r=A(a);pe(r,t,"default",{}),b(a),y(e,a)}var Aa=p('<button class="svelte-4xatps">Se déconnecter</button>');function ma(e){var t=Aa();ut("click",t,function(...a){var r;(r=Ct)==null||r.apply(this,a)}),y(e,t)}async function Sa(e){const t=await at.from("T_Reward").upsert(e).select();if(t.error)throw t.error;return t.data[0]}async function Ra(){const e=await at.from("T_Reward").select();if(e.error)throw e.error;const t=e.data;console.log(t);const a=[];for(const r of t){const n=r;a[n.cycle_index]=n}return a}var Ta=(e,t,a)=>{x(t,!0),tt(a,-1)},Oa=(e,t,a)=>{x(t,!1),tt(a)},Ia=p('<div class="months svelte-oihcp3"></div>'),Da=p('<div class="year svelte-oihcp3"><!></div>'),$a=p('<header class="svelte-oihcp3"><button class="svelte-oihcp3"><!></button> <h2 class="svelte-oihcp3"> </h2> <button class="svelte-oihcp3"><!></button></header> <div class="calendar svelte-oihcp3"><!></div>',1),ka=p("<!> <!> <!>",1);function La(e,t){se(t,!1);let a=W([]),r=W(new Date().getFullYear()),n=W(),i=W(!0);function l(E){x(n,E)}function _(E){if(!s(n))throw new Error("No selected day");$t(a,s(a)[be(s(n),ye)]=E),x(n,void 0),Sa(E)}function c(){if(!s(n))throw new Error("No selected day");return be(s(n),ye)}wt(async()=>{x(a,await Ra())}),ne();var f=ka(),u=ie(f);{var h=E=>{var T=O(()=>s(n).toDateString());Pt(E,{get title(){return s(T)},onclose:()=>{x(n,void 0)},children:(M,d)=>{Ma(M,Fe({get reward(){return s(a)[c()]},oncancel:()=>{x(n,void 0)}},()=>({onsave:_,date:s(n)})))},$$slots:{default:!0}})};V(u,E=>{s(n)&&E(h)})}var v=C(u,2);Ge(v,{children:(E,T)=>{var M=$a(),d=ie(M),N=A(d);N.__click=[Ta,i,r];var H=A(N);Je(H,{children:($,k)=>{De();var K=Ie("arrow_back_ios");y($,K)},$$slots:{default:!0}}),b(N);var D=C(N,2),I=A(D,!0);b(D);var P=C(D,2);P.__click=[Oa,i,r];var U=A(P);Je(U,{children:($,k)=>{De();var K=Ie("arrow_forward_ios");y($,K)},$$slots:{default:!0}}),b(P),b(d);var Y=C(d,2),X=A(Y);Lt(X,()=>s(r),$=>{var k=Da(),K=A(k);Ge(K,{get leftToRight(){return s(i)},children:(oe,Ue)=>{var ee=Ia();ce(ee,5,()=>Jt,ue,(fe,de,_e)=>{Ut(fe,{get i18nTitleKey(){return s(de)},children:(Ee,me)=>{ia(Ee,Fe(()=>({month:_e,year:s(r),onselectday:l,calendar:s(a)})))},$$slots:{default:!0}})}),b(ee),y(oe,ee)},$$slots:{default:!0}}),b(k),y($,k)}),b(Y),F(()=>j(I,s(r))),y(E,M)},$$slots:{default:!0}});var o=C(v,2);ma(o),y(e,f),le()}Ce(["click"]);export{La as component};
