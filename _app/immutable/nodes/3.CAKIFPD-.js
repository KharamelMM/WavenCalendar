import{g as pe,s as oe,b as s,a as m,t as v,f as le,c as Z,e as Oe}from"../chunks/disclose-version.DARnoLUY.js";import{i as de}from"../chunks/legacy.uhxq8U6e.js";import{p as Se,P as N,af as B,ag as Ee,G as e,a as _e,ah as I,I as X,a4 as Pe,f as Y,c as u,r as l,s as p,t as x,ai as Ue,aj as Re}from"../chunks/utils.DS7Odsae.js";import{i as b}from"../chunks/if.DRdOVeSS.js";import{l as re,g as xe,T as Le,o as ye,C as ue,R as ne,s as fe,c as ce,e as Ie,i as Ce,a as He,F as Ke,P as Qe,b as be,d as me}from"../chunks/Filters.Dj2uIHTF.js";import{C as Fe,b as ge,t as qe,s as he}from"../chunks/Modal.BNz1O048.js";import{m as $e,F as we}from"../chunks/FlyingSection._X_2QlY3.js";import{t as We,a as De,b as se,d as h}from"../chunks/client.A4bxOfeX.js";import{p as k,b as Ae,s as je}from"../chunks/preload-helper.ClI4wH-8.js";import{g as Me}from"../chunks/index.CiEhDQPL.js";const Ge=[{cycle_index:0,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1},{cycle_index:1,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:2,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:100},{cycle_index:3,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:80},{cycle_index:4,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:5,type:"KAMAS",rarety:null,equipment:null,item:null,amount:5e3},{cycle_index:6,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:7,type:"EQUIPMENT",rarety:"RARE",equipment:null,item:"ARMBAND",amount:20},{cycle_index:8,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2e3},{cycle_index:9,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:10,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:11,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:12,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:13,type:"COMPANION",rarety:"COMMON",equipment:null,item:"COMPANION",amount:10},{cycle_index:14,type:"EQUIPMENT",rarety:"COMMON",equipment:null,item:"ARMBAND",amount:20},{cycle_index:15,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:16,type:"COMPANION",rarety:"KROSMIC",equipment:null,item:"COMPANION",amount:5},{cycle_index:17,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:18,type:"EQUIPMENT",rarety:"KROSMIC",equipment:null,item:"RING",amount:5},{cycle_index:19,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:20,type:"GEMS",rarety:null,equipment:null,item:null,amount:100},{cycle_index:21,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:22,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:23,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:24,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2e3},{cycle_index:25,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:100},{cycle_index:26,type:"WAKFU",rarety:null,equipment:null,item:null,amount:999},{cycle_index:27,type:"EQUIPMENT",rarety:"RARE",equipment:null,item:null,amount:10},{cycle_index:28,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:20},{cycle_index:29,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:2},{cycle_index:30,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:31,type:"WAKFU",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:32,type:"GEMS",rarety:null,equipment:null,item:null,amount:150},{cycle_index:33,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:34,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:35,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:36,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:37,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:40},{cycle_index:38,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:39,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:40,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:80},{cycle_index:41,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:100},{cycle_index:42,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:2},{cycle_index:48,type:"COMPANION",rarety:"RARE",equipment:null,item:"COMPANION",amount:10},{cycle_index:49,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:51,type:"EQUIPMENT",rarety:"RARE",equipment:null,item:"RING",amount:20},{cycle_index:52,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:80},{cycle_index:53,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:5},{cycle_index:54,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:55,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:56,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:57,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:58,type:"COMPANION",rarety:"INFINITE",equipment:null,item:null,amount:1},{cycle_index:59,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:60,type:"EQUIPMENT",rarety:"KROSMIC",equipment:null,item:null,amount:20},{cycle_index:61,type:"KAMAS",rarety:null,equipment:null,item:null,amount:5e3},{cycle_index:62,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:63,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:64,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:65,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:2},{cycle_index:66,type:"GEMS",rarety:null,equipment:null,item:null,amount:200},{cycle_index:67,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:68,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:69,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:70,type:"COMPANION",rarety:"COMMON",equipment:null,item:null,amount:50},{cycle_index:71,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:72,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:73,type:"WAKFU",rarety:null,equipment:null,item:null,amount:3e3},{cycle_index:74,type:"COMPANION",rarety:"RARE",equipment:null,item:null,amount:10},{cycle_index:75,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:76,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:77,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:80,type:"WAKFU",rarety:null,equipment:null,item:null,amount:3e3},{cycle_index:81,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:2},{cycle_index:82,type:"EQUIPMENT",rarety:"INFINITE",equipment:null,item:null,amount:1},{cycle_index:93,type:"GEMS",rarety:null,equipment:null,item:null,amount:100},{cycle_index:103,type:"GEMS",rarety:null,equipment:null,item:null,amount:100},{cycle_index:104,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:105,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:106,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:107,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:5},{cycle_index:130,type:"GEMS",rarety:null,equipment:null,item:null,amount:100},{cycle_index:145,type:"WAKFU",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:146,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:100},{cycle_index:147,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:2},{cycle_index:149,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:150,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:20},{cycle_index:151,type:"COMPANION",rarety:"KROSMIC",equipment:null,item:null,amount:5},{cycle_index:152,type:"COMPANION",rarety:"INFINITE",equipment:null,item:null,amount:1},{cycle_index:153,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:40},{cycle_index:154,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2e3},{cycle_index:155,type:"GEMS",rarety:null,equipment:null,item:null,amount:100},{cycle_index:156,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:157,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:158,type:"COMPANION",rarety:"KROSMIC",equipment:null,item:null,amount:10},{cycle_index:159,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:160,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:163,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:164,type:"EQUIPMENT",rarety:"RARE",equipment:null,item:null,amount:10},{cycle_index:165,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:166,type:"EQUIPMENT",rarety:"INFINITE",equipment:null,item:null,amount:1},{cycle_index:167,type:"WAKFU",rarety:null,equipment:null,item:null,amount:3e3},{cycle_index:168,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:175,type:"EQUIPMENT",rarety:"KROSMIC",equipment:null,item:null,amount:5},{cycle_index:182,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:80},{cycle_index:183,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:184,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:185,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:186,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:187,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:188,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:40},{cycle_index:189,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2e3},{cycle_index:190,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:191,type:"EQUIPMENT",rarety:"COMMON",equipment:null,item:"RING",amount:9},{cycle_index:192,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:100},{cycle_index:193,type:"COMPANION",rarety:"KROSMIC",equipment:null,item:"COMPANION",amount:20},{cycle_index:194,type:"COMPANION",rarety:"INFINITE",equipment:null,item:"COMPANION",amount:5},{cycle_index:195,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:196,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:197,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:198,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:199,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:20},{cycle_index:200,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:2},{cycle_index:201,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:202,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1999},{cycle_index:203,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:20},{cycle_index:204,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:205,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:2},{cycle_index:206,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:207,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:100},{cycle_index:208,type:"EQUIPMENT",rarety:"COMMON",equipment:null,item:null,amount:1},{cycle_index:209,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:210,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:211,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:212,type:"KAMAS",rarety:null,equipment:null,item:null,amount:5e3},{cycle_index:213,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:216,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:217,type:"COMPANION",rarety:"KROSMIC",equipment:null,item:null,amount:5},{cycle_index:218,type:"EQUIPMENT",rarety:"COMMON",equipment:null,item:null,amount:20},{cycle_index:219,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:2},{cycle_index:220,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:80},{cycle_index:221,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:275,type:"EQUIPMENT",rarety:"INFINITE",equipment:null,item:"RING",amount:1},{cycle_index:279,type:"GEMS",rarety:null,equipment:null,item:null,amount:100},{cycle_index:314,type:"EQUIPMENT",rarety:"KROSMIC",equipment:null,item:"ARMBAND",amount:5},{cycle_index:315,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:20},{cycle_index:316,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:2},{cycle_index:317,type:"KAMAS",rarety:null,equipment:null,item:null,amount:9e3},{cycle_index:318,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:2},{cycle_index:319,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:320,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2e3},{cycle_index:321,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:322,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:323,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:324,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:80},{cycle_index:325,type:"COMPANION",rarety:"RARE",equipment:null,item:"COMPANION",amount:10},{cycle_index:326,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:2},{cycle_index:327,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:2},{cycle_index:328,type:"WAKFU",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:329,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:330,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:331,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:332,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:334,type:"EQUIPMENT",rarety:"COMMON",equipment:null,item:null,amount:20},{cycle_index:335,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:336,type:"GEMS",rarety:null,equipment:null,item:null,amount:100},{cycle_index:337,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:338,type:"EQUIPMENT",rarety:"RARE",equipment:null,item:"RING",amount:20},{cycle_index:339,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:20},{cycle_index:340,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:2},{cycle_index:341,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:342,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:343,type:"EQUIPMENT",rarety:"RARE",equipment:null,item:"RING",amount:20},{cycle_index:344,type:"COMPANION",rarety:"COMMON",equipment:null,item:"COMPANION",amount:20},{cycle_index:345,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:1},{cycle_index:346,type:"RUNES",rarety:null,equipment:"EQUIPMENTS",item:null,amount:20},{cycle_index:347,type:"KAMAS",rarety:null,equipment:null,item:null,amount:2e3},{cycle_index:348,type:"EQUIPMENT",rarety:"INFINITE",equipment:null,item:"ARMBAND",amount:5},{cycle_index:349,type:"EQUIPMENT",rarety:"RARE",equipment:null,item:"RING",amount:20},{cycle_index:350,type:"COMPANION",rarety:"COMMON",equipment:null,item:"COMPANION",amount:1},{cycle_index:351,type:"RUNES",rarety:null,equipment:"SPELLS",item:null,amount:100},{cycle_index:352,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:2},{cycle_index:353,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:354,type:"COMPANION",rarety:"COMMON",equipment:null,item:"COMPANION",amount:20},{cycle_index:355,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:20},{cycle_index:356,type:"RUNES",rarety:null,equipment:"COMPANIONS",item:null,amount:100},{cycle_index:357,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:358,type:"WAKFU",rarety:null,equipment:null,item:null,amount:2500},{cycle_index:359,type:"CHEST",rarety:null,equipment:"COMPANIONS",item:null,amount:2},{cycle_index:360,type:"CHEST",rarety:null,equipment:"EQUIPMENTS",item:null,amount:1},{cycle_index:361,type:"KAMAS",rarety:null,equipment:null,item:null,amount:1e3},{cycle_index:362,type:"EQUIPMENT",rarety:"COMMON",equipment:null,item:null,amount:20},{cycle_index:363,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:1},{cycle_index:364,type:"CHEST",rarety:null,equipment:"SPELLS",item:null,amount:2}];var ke=v(" <!>",1),Be=v('<button class="validate material-icon svelte-1df2l99">check_circle</button>'),Ye=v('<div class="header svelte-1df2l99"><small><!></small> <small> </small></div> <b><!></b> <!>',1);function Ve(F,y){Se(y,!1);const T=oe(),O=()=>Z($e,"$momentStore",T),c=()=>Z(se,"$_",T),a=I();let t=k(y,"reward",8),E=k(y,"index",8),o=k(y,"currentIndex",24,()=>-1),H=k(y,"personalCalendar",24,()=>[]),U=I(!1),d=I("");const C=re.subscribe(r=>{N(d,xe(t(),r.filters))});Ae(()=>{C()});async function K(){if(!t())throw new Error("No reward to save");if(!e(a))throw new Error("Cannot save a reward that is not the current day");const r={...t()};r.cycle_index=ye(new Date,ue),r.validated=!0,await fe(Me(ce),r),N(U,!0)}B(()=>(X(E()),X(o())),()=>{N(a,E()===o())}),B(()=>(e(a),X(H()),ue),()=>{var r;e(a)&&N(U,((r=H()[ye(new Date,ue)])==null?void 0:r.validated)??!1)}),B(()=>(X(t()),re),()=>{N(d,xe(t(),Me(re).filters))}),Ee(),de();var g=Pe(()=>O()().add(E()-o(),"days").format("dddd DD MMMM YYYY"));Le(F,{get title(){return e(g)},children:(r,V)=>{Fe(r,je({get classes(){return e(d)},width:"10em",height:"3.5em"},()=>({primary:e(a),outline:e(a)}),{children:(n,ee)=>{var R=Ye(),L=Y(R),A=u(L),$=u(A);{var w=i=>{var S=le();x(()=>s(S,O()().add(E()-o(),"days").format("DD MMM"))),m(i,S)};b($,i=>{o()>0&&i(w)})}l(A);var W=p(A,2),q=u(W,!0);l(W),l(L);var P=p(L,2),Q=u(P);{var D=i=>{var S=ke(),_=Y(S);x(()=>s(_,`${t().amount??""}x ${c()(t().type)??""} `));var M=p(_);{var z=G=>{var J=le();x(()=>s(J,c()(t().rarety))),m(G,J)},ie=G=>{var J=Oe(),ve=Y(J);{var Te=ae=>{var Ne=le();x(()=>s(Ne,c()(t().equipment))),m(ae,Ne)};b(ve,ae=>{(t().type===ne.RUNES||t().type===ne.CHEST)&&ae(Te)},!0)}m(G,J)};b(M,G=>{t().type===ne.EQUIPMENT||t().type===ne.COMPANION?G(z):G(ie,!1)})}m(i,S)},f=i=>{var S=le("-");m(i,S)};b(Q,i=>{t()?i(D):i(f,!1)})}l(P);var j=p(P,2);{var te=i=>{var S=Be();S.__click=K,We(3,S,()=>De,()=>({easing:ge,duration:500})),m(i,S)};b(j,i=>{t()&&e(a)&&!e(U)&&i(te)})}x(()=>s(q,E())),m(n,R)},$$slots:{default:!0}}))},$$slots:{default:!0}}),_e()}pe(["click"]);var ze=v('<td class="svelte-1puj17x"><button class="material-icon svelte-1puj17x" disabled>task_alt</button></td>'),Je=(F,y,T)=>y(e(T)),Xe=v('<td class="svelte-1puj17x"><button class="material-icon svelte-1puj17x">radio_button_unchecked</button></td>'),Ze=v('<tr class="svelte-1puj17x"><td class="svelte-1puj17x"> </td><td class="svelte-1puj17x"> </td><!></tr>'),et=v('<section class="svelte-1puj17x"><table><thead class="svelte-1puj17x"><tr class="svelte-1puj17x"><th class="svelte-1puj17x"> </th><th class="svelte-1puj17x"> </th><th class="svelte-1puj17x"></th></tr></thead><tbody></tbody></table></section> <div class="info svelte-1puj17x"> </div>',1);function tt(F,y){Se(y,!1);const T=oe(),O=()=>Z(se,"$_",T);let c=k(y,"offsetsByScore",8),a=k(y,"currentOffset",12),t=I([]),E=I(0);B(()=>(e(t),X(c())),()=>{N(t,Object.keys(c()).sort((d,C)=>c()[+C]-c()[+d])),N(E,Object.values(c()).reduce((d,C)=>d+C,0)),console.log(c()),a(e(t)[0])}),Ee(),de();var o=Oe(),H=Y(o);{var U=d=>{var C=et(),K=Y(C),g=u(K),r=u(g),V=u(r),n=u(V),ee=u(n,!0);x(()=>s(ee,O()(h.CALENDAR_OFFSET_KEY))),l(n);var R=p(n),L=u(R,!0);x(()=>s(L,O()(h.CALENDAR_OFFSET_PROBABILITY_KEY))),l(R),Ue(),l(V),l(r);var A=p(r);Ie(A,5,()=>e(t),Ce,(W,q)=>{var P=Ze(),Q=u(P),D=u(Q,!0);l(Q);var f=p(Q),j=u(f);x(()=>s(j,`${Math.round(c()[e(q)]/e(E)*1e3)/10}%`)),l(f);var te=p(f);{var i=_=>{var M=ze();m(_,M)},S=_=>{var M=Xe(),z=u(M);z.__click=[Je,a,q],l(M),m(_,M)};b(te,_=>{e(q)===a()?_(i):_(S,!1)})}l(P),x(()=>{qe(Q,"bold",e(q)===a()),s(D,e(q)),qe(f,"bold",e(q)===a())}),m(W,P)}),l(A),l(g),l(K);var $=p(K,2),w=u($,!0);x(()=>s(w,O()(h.CALENDAR_OFFSET_INFO))),l($),m(d,C)};b(H,d=>{Object.keys(c()).length>0&&d(U)})}m(F,o),_e()}pe(["click"]);var lt=(F,y)=>N(y,!0),nt=v('<div class="reward"><!></div>'),ut=v('<div class="body svelte-igihim"><div class="info svelte-igihim"><h2> </h2> <div class="svelte-igihim"> </div></div> <div><button class="profile"> </button></div> <!> <!> <section class="svelte-igihim"></section></div>'),it=v("<!> <!>",1);function _t(F,y){Se(y,!1);const T=oe(),O=()=>Z(se,"$_",T),c=()=>Z(ce,"$currentProfile",T),a=I(),t=I([]);let E=I([]),o=I(-1),H=I(-1),U=I(!1);for(const n of Ge)Re(t,e(t)[n.cycle_index]=n);function d(n){return n<0?-1:(ye(new Date,ue)-n+me)%me}const C=ce.subscribe(async n=>{N(E,await He(n))});Ae(()=>{C()}),B(()=>(e(E),e(t)),()=>{N(a,be(e(E),e(t)))}),B(()=>(e(H),e(o)),()=>{N(H,d(e(o)));const n=document.querySelector(`#reward-${e(H)}`);n&&n.scrollIntoView({block:"center",behavior:"smooth"})}),Ee(),de();var K=it(),g=Y(K);{var r=n=>{Qe(n,{onclose:()=>N(U,!1)})};b(g,n=>{e(U)&&n(r)})}var V=p(g,2);we(V,{children:(n,ee)=>{var R=ut(),L=u(R),A=u(L),$=u(A,!0);x(()=>s($,O()(h.CALENDAR_TITLE))),l(A);var w=p(A,2),W=u(w,!0);x(()=>s(W,O()(h.CALENDAR_INFO))),l(w),l(L);var q=p(L,2),P=u(q);P.__click=[lt,U];var Q=u(P,!0);x(()=>s(Q,c()?`${O()(h.PROFILE)} : ${c()}`:O()(h.PROFILE_DEFAULT))),l(P),l(q);var D=p(q,2);tt(D,{get offsetsByScore(){return e(a)},get currentOffset(){return e(o)},set currentOffset(i){N(o,i)},$$legacy:!0});var f=p(D,2);Ke(f,{});var j=p(f,2);Ie(j,5,()=>({length:me}),Ce,(i,S,_)=>{var M=nt();he(M,"id",`reward-${_}`);var z=u(M),ie=Pe(()=>d(e(o)));Ve(z,{get reward(){return e(t)[_]},index:_,get currentIndex(){return e(ie)},get personalCalendar(){return e(E)}}),l(M),m(i,M)}),l(j),l(R),m(n,R)},$$slots:{default:!0}}),m(F,K),_e()}pe(["click"]);export{_t as component};
