import{g as pe,s as ce,b as G,a as c,t as g,c as Z,f as ke,e as Pe}from"../chunks/disclose-version.DARnoLUY.js";import{i as de}from"../chunks/legacy.uhxq8U6e.js";import{p as ue,P as E,af as Ke,I as Je,ag as Ve,G as e,c as u,r as o,t as Y,a as ve,ah as W,a4 as S,s as P,J as ze,ai as Se,f as ne,aE as Le,aj as Ne}from"../chunks/utils.DS7Odsae.js";import{i as H}from"../chunks/if.DRdOVeSS.js";import{k as Xe}from"../chunks/key.C-fwUKcp.js";import{l as Ee,g as Re,T as Ze,R as m,e as le,i as ie,n as et,D as De,f as tt,h as at,o as ye,C as be,j as Oe,c as oe,a as Te,F as rt,P as st,M as ot,s as nt,k as lt}from"../chunks/Filters.BdRe4Y_Y.js";import{p,b as qe,s as he,o as it}from"../chunks/preload-helper.ClI4wH-8.js";import{m as Ue,F as Ce}from"../chunks/FlyingSection._X_2QlY3.js";import{c as Fe,t as Qe,r as Ae,a as Ie,M as ct,C as dt}from"../chunks/Modal.BNz1O048.js";import{b as ge,s as We,d as Q}from"../chunks/client.A4bxOfeX.js";import{g as me}from"../chunks/index.CiEhDQPL.js";var ut=g("<button><div> </div></button>");function vt(n,t){ue(t,!1);const l=ce(),i=()=>Z(ge,"$_",l);let _=p(t,"currentDate",8),$=p(t,"dayOfMonth",8),a=p(t,"reward",8,void 0),f=p(t,"onclick",8);const r=new Date;let s=W("");const y=Ee.subscribe(h=>{E(s,Re(a(),h.filters))});function b(){if(a()){let h=`${a().amount}× ${i()(a().type)}`;switch(a().type){case m.RUNES:case m.CHEST:h+=` ${i()(a().equipment)}`;break;case m.COMPANION:case m.EQUIPMENT:h=`${a().amount}× ${i()(a().type)} ${i()(a().rarety)}`;break}return h}}qe(()=>{y()}),Ke(()=>(Je(a()),Ee),()=>{E(s,Re(a(),me(Ee).filters))}),Ve(),de();var M=S(b);Ze(n,{get title(){return e(M)},children:(h,R)=>{var w=ut();w.__click=function(...z){var K;(K=f())==null||K.apply(this,z)};const x=S(()=>_().toDateString()===r.toDateString());var N=u(w),L=u(N,!0);o(N),o(w),Y(()=>{Fe(w,`${e(s)??""} svelte-14v7im1`),w.disabled=_()>r,Qe(w,"today",e(x)),G(L,$())}),c(h,w)},$$slots:{default:!0}}),ve()}pe(["click"]);var _t=g('<th class="svelte-t5kud4"> </th>'),ft=g("<td><!></td>"),mt=g("<tr></tr>"),yt=g('<table class="svelte-t5kud4"><thead><tr></tr></thead><tbody></tbody></table>');function bt(n,t){ue(t,!1);const l=ce(),i=()=>Z(Ue,"$momentStore",l);let _=p(t,"year",8),$=p(t,"month",8),a=p(t,"onselectday",8),f=p(t,"calendar",8);const r=De.length;function s(R){let w=ye(R,be);return f()[w]}de();var y=yt(),b=u(y),M=u(b);le(M,5,()=>({length:r}),ie,(R,w,x)=>{var N=_t(),L=u(N,!0);Y(()=>G(L,i()().weekday(x%r).format("dd"))),o(N),c(R,N)}),o(M),o(b);var h=P(b);le(h,5,()=>({length:et($(),_())}),ie,(R,w,x)=>{var N=mt();const L=S(()=>tt($(),_()));le(N,5,()=>De,ie,(K,re,d)=>{var j=ft();const D=S(()=>at($(),_(),d,x));var J=u(j);{var O=T=>{const C=S(()=>new Date(_(),$(),e(D))),q=S(()=>s(e(C)));var ee=ze(()=>({currentDate:e(C),dayOfMonth:e(D),reward:e(q),onclick:()=>a()(e(C))}));vt(T,he(()=>e(ee)))};H(J,T=>{e(D)>0&&e(D)<=e(L)&&T(O)})}o(j),c(K,j)}),o(N),c(R,N)}),o(h),o(y),c(n,y),ve()}var we=(n=>(n.COMPANIONS="COMPANIONS",n.SPELLS="SPELLS",n.EQUIPMENTS="EQUIPMENTS",n))(we||{});function ht(n,t){ue(t,!1);const l=ce(),i=()=>Z(ge,"$_",l);let _=p(t,"key",8);de(),Se();var $=ke();Y(()=>G($,i()(_()))),c(n,$),ve()}var pt=g('<span class="required svelte-u5ui8r">*</span>'),gt=g("<span> <!></span>"),$t=g('<section class="svelte-u5ui8r"><!> <!></section>');function Ye(n,t){let l=p(t,"title",8,void 0),i=p(t,"required",8,!1);var _=$t(),$=u(_);{var a=r=>{var s=gt(),y=u(s),b=P(y);{var M=h=>{var R=pt();c(h,R)};H(b,h=>{i()&&h(M)})}o(s),Y(()=>G(y,`${l()??""}: `)),c(r,s)};H($,r=>{l()&&r(a)})}var f=P($,2);We(f,t,"default",{}),o(_),c(n,_)}var Et=(n,t,l)=>t(e(l)),Mt=g("<button><!></button>"),kt=g('<section class="svelte-aefnkp"></section>');function Me(n,t){let l=p(t,"title",8,void 0),i=p(t,"values",24,()=>[]),_=p(t,"value",12),$=p(t,"required",8,!1);Ye(n,he(()=>({title:l(),required:$()}),{children:(a,f)=>{var r=kt();le(r,5,i,ie,(s,y)=>{var b=Mt();const M=S(()=>`${e(y).toLowerCase()??""} svelte-aefnkp`);b.__click=[Et,_,y];var h=u(b);ht(h,{get key(){return e(y)}}),o(b),Y(()=>{Fe(b,e(M)),Qe(b,"active",_()===e(y))}),c(s,b)}),o(r),c(a,r)},$$slots:{default:!0}}))}pe(["click"]);function St(n){return Object.values(n).filter(t=>typeof t!="number")}var wt=g('<input type="number" min="100" max="250" step="50">'),Pt=g('<input type="number" min="1" max="5000">'),Nt=(n,t)=>t()(),Rt=(n,t,l)=>{confirm(t()(Q.REWARD_DELETE_CONFIRM))&&l()()},Dt=g('<button class="delete material-icon svelte-tu6hhq">delete</button>'),Ot=g('<section class="svelte-tu6hhq"><!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Tt(n,t){var ee,te,_e,ae,fe,se;ue(t,!1);const l=ce(),i=()=>Z(ge,"$_",l);let _=p(t,"oncancel",8),$=p(t,"onsave",8),a=p(t,"ondelete",8,void 0),f=p(t,"reward",8,void 0),r=p(t,"date",8),s=W(((ee=f())==null?void 0:ee.type)??m.EQUIPMENT),y=W(((te=f())==null?void 0:te.type)===m.EQUIPMENT||((_e=f())==null?void 0:_e.type)===m.COMPANION?f().rarety:Oe.COMMON),b=W(((ae=f())==null?void 0:ae.type)===m.RUNES||((fe=f())==null?void 0:fe.type)===m.CHEST?f().equipment:we.EQUIPMENTS),M=W(((se=f())==null?void 0:se.amount)??1);function h(){let v;const k={cycle_index:ye(r(),be),amount:e(M)};switch(e(s)){case m.GEMS:v={...k,type:e(s),amount:e(M)};break;case m.EQUIPMENT:case m.COMPANION:v={...k,type:e(s),rarety:e(y)};break;case m.CHEST:v={...k,type:e(s),equipment:e(b)};break;case m.RUNES:v={...k,type:e(s),equipment:e(b)};break;case m.KAMAS:case m.WAKFU:v={...k,type:e(s)};break}$()(v)}de();var R=Ot(),w=u(R),x=S(()=>i()(Q.REWARD_LABEL_TYPE)),N=S(()=>St(m));Me(w,{get title(){return e(x)},get values(){return e(N)},get value(){return e(s)},set value(v){E(s,v)},required:!0,$$legacy:!0});var L=P(w,2);{var z=v=>{var k=S(()=>i()(Q.REWARD_LABEL_RARITY)),V=S(()=>Object.keys(Oe));Me(v,{get title(){return e(k)},get values(){return e(V)},get value(){return e(y)},set value(A){E(y,A)},required:!0,$$legacy:!0})},K=v=>{var k=Pe(),V=ne(k);{var A=I=>{var B=S(()=>i()(Q.REWARD_LABEL_EQUIPMENT_TYPE)),U=S(()=>Object.keys(we));Me(I,{get title(){return e(B)},get values(){return e(U)},get value(){return e(b)},set value(F){E(b,F)},required:!0,$$legacy:!0})};H(V,I=>{(e(s)===m.CHEST||e(s)===m.RUNES)&&I(A)},!0)}c(v,k)};H(L,v=>{e(s)===m.EQUIPMENT||e(s)===m.COMPANION?v(z):v(K,!1)})}var re=P(L,2),d=S(()=>i()(Q.REWARD_LABEL_AMOUNT));Ye(re,{get title(){return e(d)},required:!0,children:(v,k)=>{var V=Pe(),A=ne(V);{var I=U=>{var F=wt();Ae(F),Ie(F,()=>e(M),X=>E(M,X)),c(U,F)},B=U=>{var F=Pt();Ae(F),Ie(F,()=>e(M),X=>E(M,X)),c(U,F)};H(A,U=>{e(s)===m.GEMS?U(I):U(B,!1)})}c(v,V)},$$slots:{default:!0}});var j=P(re,2),D=u(j);D.__click=[Nt,_];var J=u(D,!0);Y(()=>G(J,i()(Q.CANCEL))),o(D);var O=P(D,2);O.__click=h;var T=u(O,!0);Y(()=>G(T,i()(Q.SAVE))),o(O);var C=P(O,2);{var q=v=>{var k=Dt();k.__click=[Rt,i,a],c(v,k)};H(C,v=>{a()&&v(q)})}o(j),o(R),c(n,R),ve()}pe(["click"]);var Ct=g('<section class="material-icon"><!></section>');function xe(n,t){var l=Ct(),i=u(l);We(i,t,"default",{}),o(l),c(n,l)}var At=g("<div> </div> <!>",1),It=(n,t)=>E(t,!0),xt=(n,t,l)=>{E(t,!0),Le(l,-1)},Lt=(n,t,l)=>{E(t,!1),Le(l)},qt=g('<div class="months svelte-o5e3p2"></div>'),Ut=g('<div class="year svelte-o5e3p2"><!></div>'),Ft=g('<header class="svelte-o5e3p2"><button class="profile svelte-o5e3p2"> </button> <div class="year-controls svelte-o5e3p2"><button class="svelte-o5e3p2"><!></button> <h2 class="svelte-o5e3p2"> </h2> <button class="svelte-o5e3p2"><!></button></div> <div><!></div></header> <div class="calendar svelte-o5e3p2"><!></div>',1),Qt=g("<!> <!> <!>",1);function ta(n,t){ue(t,!1);const l=ce(),i=()=>Z(Ue,"$momentStore",l),_=()=>Z(ge,"$_",l),$=()=>Z(oe,"$currentProfile",l);let a=W([]),f=W(new Date().getFullYear()),r=W(),s=W(!1),y=W(!0);function b(d){E(r,d)}function M(d){if(!e(r))throw new Error("No selected day");d.validated=!1,Ne(a,e(a)[ye(e(r),be)]=d),E(r,void 0),nt(me(oe),d)}function h(){if(!e(r))throw new Error("No selected day");return ye(e(r),be)}function R(){if(!e(r))throw new Error("No selected day");const d=h();lt(me(oe),d),Ne(a,e(a)[d]=void 0),E(r,void 0)}const w=oe.subscribe(async d=>{E(a,await Te(d))});it(async()=>{E(a,await Te(me(oe)))}),qe(()=>{w()}),de();var x=Qt(),N=ne(x);{var L=d=>{var j=S(()=>i()(e(r)).format("dddd D MMMM yyyy"));ct(d,{get title(){return e(j)},onclose:()=>{E(r,void 0)},children:(D,J)=>{var O=At(),T=ne(O),C=u(T,!0);Y(()=>G(C,_()(Q.REWARDS_FORM_INFO))),o(T);var q=P(T,2);Tt(q,he({get reward(){return e(a)[h()]},oncancel:()=>{E(r,void 0)}},()=>({onsave:M,date:e(r),ondelete:R}))),c(D,O)},$$slots:{default:!0}})};H(N,d=>{e(r)&&d(L)})}var z=P(N,2);{var K=d=>{st(d,{onclose:()=>E(s,!1)})};H(z,d=>{e(s)&&d(K)})}var re=P(z,2);Ce(re,{children:(d,j)=>{var D=Ft(),J=ne(D),O=u(J);O.__click=[It,s];var T=u(O,!0);Y(()=>G(T,$()?`${_()(Q.PROFILE)} : ${$()}`:_()(Q.PROFILE_DEFAULT))),o(O);var C=P(O,2),q=u(C);q.__click=[xt,y,f];var ee=u(q);xe(ee,{children:(A,I)=>{Se();var B=ke("arrow_back_ios");c(A,B)},$$slots:{default:!0}}),o(q);var te=P(q,2),_e=u(te,!0);o(te);var ae=P(te,2);ae.__click=[Lt,y,f];var fe=u(ae);xe(fe,{children:(A,I)=>{Se();var B=ke("arrow_forward_ios");c(A,B)},$$slots:{default:!0}}),o(ae),o(C);var se=P(C,2),v=u(se);rt(v,{}),o(se),o(J);var k=P(J,2),V=u(k);Xe(V,()=>e(f),A=>{var I=Ut(),B=u(I);Ce(B,{get leftToRight(){return e(y)},children:(U,F)=>{var X=qt();le(X,5,()=>ot,ie,(je,Wt,$e)=>{var Be=S(()=>i()(new Date(0,$e)).format("MMMM")),He=S(()=>$e===new Date().getMonth()&&e(f)===new Date().getFullYear());dt(je,{get title(){return e(Be)},get outline(){return e(He)},children:(Ge,Yt)=>{bt(Ge,he(()=>({month:$e,year:e(f),onselectday:b,calendar:e(a)})))},$$slots:{default:!0}})}),o(X),c(U,X)},$$slots:{default:!0}}),o(I),c(A,I)}),o(k),Y(()=>G(_e,e(f))),c(d,D)},$$slots:{default:!0}}),c(n,x),ve()}pe(["click"]);export{ta as component};
