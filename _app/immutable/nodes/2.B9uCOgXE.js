import{a as c,t as y,b as B,f as pe,s as ce,c as Z,d as ke,e as Ne}from"../chunks/disclose-version.CLCQgUk-.js";import{i as ve}from"../chunks/legacy.DvMgMy8j.js";import{c as d,s as w,r as n,t as x,p as de,J as E,K as Ge,F as Je,L as Ve,D as e,a as ue,M as Y,O as S,G as ze,aD as we,f as ne,aO as qe,N as De}from"../chunks/utils.BTSv_gmg.js";import{i as j}from"../chunks/if.Bxl-Y-li.js";import{m as Fe,k as Xe}from"../chunks/moment.store.CEAwewTf.js";import{l as Ee,g as Oe,R as m,e as le,i as ie,n as Ze,D as Re,f as et,h as tt,o as ye,d as be,j as Te,c as se,a as Ae,F as at,P as rt,M as ot,s as st,k as nt}from"../chunks/Filters.B_EytDq-.js";import{p as g,o as Ue,s as he,a as lt}from"../chunks/preload-helper.C9HtXfav.js";import{a as Qe,t as We,r as Ce,b as Ie,M as it,C as ct}from"../chunks/Modal.CBiSaMZQ.js";import{s as Pe,$ as $e,a as W}from"../chunks/client.Bqq_WX2i.js";import{g as me}from"../chunks/index.B6Yu7lEF.js";import{F as xe}from"../chunks/FlyingSection.CezfTbyJ.js";var vt=y('<span class="text svelte-17j3cvn"> </span>'),dt=y('<section class="tooltip svelte-17j3cvn"><!> <!></section>');function ut(l,t){let r=g(t,"title",8,void 0);var i=dt(),u=d(i);Pe(u,t,"default",{});var b=w(u,2);{var o=v=>{var a=vt(),s=d(a,!0);n(a),x(()=>B(s,r())),c(v,a)};j(b,v=>{r()&&v(o)})}n(i),c(l,i)}var _t=y("<button><div> </div></button>");function ft(l,t){de(t,!1);const r=ce(),i=()=>Z($e,"$_",r);let u=g(t,"currentDate",8),b=g(t,"dayOfMonth",8),o=g(t,"reward",8,void 0),v=g(t,"onclick",8);const a=new Date;let s=Y("");const h=Ee.subscribe($=>{E(s,Oe(o(),$.filters))});function p(){if(o()){let $=`${o().amount}× ${i()(o().type)}`;switch(o().type){case m.RUNES:case m.CHEST:$+=` ${i()(o().equipment)}`;break;case m.COMPANION:case m.EQUIPMENT:$=`${o().amount}× ${i()(o().type)} ${i()(o().rarety)}`;break}return $}}Ue(()=>{h()}),Ge(()=>(Je(o()),Ee),()=>{E(s,Oe(o(),me(Ee).filters))}),Ve(),ve();var M=S(p);ut(l,{get title(){return e(M)},children:($,D)=>{var P=_t();P.__click=function(...z){var G;(G=v())==null||G.apply(this,z)};const L=S(()=>u().toDateString()===a.toDateString());var N=d(P),q=d(N,!0);n(N),n(P),x(()=>{Qe(P,`${e(s)??""} svelte-14v7im1`),P.disabled=u()>a,We(P,"today",e(L)),B(q,b())}),c($,P)},$$slots:{default:!0}}),ue()}pe(["click"]);var mt=y('<th class="svelte-t5kud4"> </th>'),yt=y("<td><!></td>"),bt=y("<tr></tr>"),ht=y('<table class="svelte-t5kud4"><thead><tr></tr></thead><tbody></tbody></table>');function pt(l,t){de(t,!1);const r=ce(),i=()=>Z(Fe,"$momentStore",r);let u=g(t,"year",8),b=g(t,"month",8),o=g(t,"onselectday",8),v=g(t,"calendar",8);const a=Re.length;function s(D){let P=ye(D,be);return v()[P]}ve();var h=ht(),p=d(h),M=d(p);le(M,5,()=>({length:a}),ie,(D,P,L)=>{var N=mt(),q=d(N,!0);x(()=>B(q,i()().weekday(L%a).format("dd"))),n(N),c(D,N)}),n(M),n(p);var $=w(p);le($,5,()=>({length:Ze(b(),u())}),ie,(D,P,L)=>{var N=bt();const q=S(()=>et(b(),u()));le(N,5,()=>Re,ie,(G,re,_)=>{var H=yt();const O=S(()=>tt(b(),u(),_,L));var J=d(H);{var R=T=>{const A=S(()=>new Date(u(),b(),e(O))),F=S(()=>s(e(A)));var ee=ze(()=>({currentDate:e(A),dayOfMonth:e(O),reward:e(F),onclick:()=>o()(e(A))}));ft(T,he(()=>e(ee)))};j(J,T=>{e(O)>0&&e(O)<=e(q)&&T(R)})}n(H),c(G,H)}),n(N),c(D,N)}),n($),n(h),c(l,h),ue()}var Se=(l=>(l.COMPANIONS="COMPANIONS",l.SPELLS="SPELLS",l.EQUIPMENTS="EQUIPMENTS",l))(Se||{});function $t(l,t){de(t,!1);const r=ce(),i=()=>Z($e,"$_",r);let u=g(t,"key",8);ve(),we();var b=ke();x(()=>B(b,i()(u()))),c(l,b),ue()}var gt=y('<span class="required svelte-u5ui8r">*</span>'),Et=y("<span> <!></span>"),Mt=y('<section class="svelte-u5ui8r"><!> <!></section>');function Ye(l,t){let r=g(t,"title",8,void 0),i=g(t,"required",8,!1);var u=Mt(),b=d(u);{var o=a=>{var s=Et(),h=d(s),p=w(h);{var M=$=>{var D=gt();c($,D)};j(p,$=>{i()&&$(M)})}n(s),x(()=>B(h,`${r()??""}: `)),c(a,s)};j(b,a=>{r()&&a(o)})}var v=w(b,2);Pe(v,t,"default",{}),n(u),c(l,u)}var kt=(l,t,r)=>t(e(r)),wt=y("<button><!></button>"),St=y('<section class="svelte-aefnkp"></section>');function Me(l,t){let r=g(t,"title",8,void 0),i=g(t,"values",24,()=>[]),u=g(t,"value",12),b=g(t,"required",8,!1);Ye(l,he(()=>({title:r(),required:b()}),{children:(o,v)=>{var a=St();le(a,5,i,ie,(s,h)=>{var p=wt();const M=S(()=>`${e(h).toLowerCase()??""} svelte-aefnkp`);p.__click=[kt,u,h];var $=d(p);$t($,{get key(){return e(h)}}),n(p),x(()=>{Qe(p,e(M)),We(p,"active",u()===e(h))}),c(s,p)}),n(a),c(o,a)},$$slots:{default:!0}}))}pe(["click"]);function Pt(l){return Object.values(l).filter(t=>typeof t!="number")}var Nt=y('<input type="number" min="100" max="250" step="50">'),Dt=y('<input type="number" min="1" max="5000">'),Ot=(l,t)=>t()(),Rt=(l,t,r)=>{confirm(t()(W.REWARD_DELETE_CONFIRM))&&r()()},Tt=y('<button class="delete material-icon svelte-tu6hhq">delete</button>'),At=y('<section class="svelte-tu6hhq"><!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Ct(l,t){var ee,te,_e,ae,fe,oe;de(t,!1);const r=ce(),i=()=>Z($e,"$_",r);let u=g(t,"oncancel",8),b=g(t,"onsave",8),o=g(t,"ondelete",8,void 0),v=g(t,"reward",8,void 0),a=g(t,"date",8),s=Y(((ee=v())==null?void 0:ee.type)??m.EQUIPMENT),h=Y(((te=v())==null?void 0:te.type)===m.EQUIPMENT||((_e=v())==null?void 0:_e.type)===m.COMPANION?v().rarety:Te.COMMON),p=Y(((ae=v())==null?void 0:ae.type)===m.RUNES||((fe=v())==null?void 0:fe.type)===m.CHEST?v().equipment:Se.EQUIPMENTS),M=Y(((oe=v())==null?void 0:oe.amount)??1);function $(){let f;const k={cycle_index:ye(a(),be),amount:e(M)};switch(e(s)){case m.GEMS:f={...k,type:e(s),amount:e(M)};break;case m.EQUIPMENT:case m.COMPANION:f={...k,type:e(s),rarety:e(h)};break;case m.CHEST:f={...k,type:e(s),equipment:e(p)};break;case m.RUNES:f={...k,type:e(s),equipment:e(p)};break;case m.KAMAS:case m.WAKFU:f={...k,type:e(s)};break}b()(f)}ve();var D=At(),P=d(D),L=S(()=>i()(W.REWARD_LABEL_TYPE)),N=S(()=>Pt(m));Me(P,{get title(){return e(L)},get values(){return e(N)},get value(){return e(s)},set value(f){E(s,f)},required:!0,$$legacy:!0});var q=w(P,2);{var z=f=>{var k=S(()=>i()(W.REWARD_LABEL_RARITY)),V=S(()=>Object.keys(Te));Me(f,{get title(){return e(k)},get values(){return e(V)},get value(){return e(h)},set value(C){E(h,C)},required:!0,$$legacy:!0})},G=f=>{var k=Ne(),V=ne(k);{var C=I=>{var K=S(()=>i()(W.REWARD_LABEL_EQUIPMENT_TYPE)),U=S(()=>Object.keys(Se));Me(I,{get title(){return e(K)},get values(){return e(U)},get value(){return e(p)},set value(Q){E(p,Q)},required:!0,$$legacy:!0})};j(V,I=>{(e(s)===m.CHEST||e(s)===m.RUNES)&&I(C)},!0)}c(f,k)};j(q,f=>{e(s)===m.EQUIPMENT||e(s)===m.COMPANION?f(z):f(G,!1)})}var re=w(q,2),_=S(()=>i()(W.REWARD_LABEL_AMOUNT));Ye(re,{get title(){return e(_)},required:!0,children:(f,k)=>{var V=Ne(),C=ne(V);{var I=U=>{var Q=Nt();Ce(Q),Ie(Q,()=>e(M),X=>E(M,X)),c(U,Q)},K=U=>{var Q=Dt();Ce(Q),Ie(Q,()=>e(M),X=>E(M,X)),c(U,Q)};j(C,U=>{e(s)===m.GEMS?U(I):U(K,!1)})}c(f,V)},$$slots:{default:!0}});var H=w(re,2),O=d(H);O.__click=[Ot,u];var J=d(O,!0);x(()=>B(J,i()(W.CANCEL))),n(O);var R=w(O,2);R.__click=$;var T=d(R,!0);x(()=>B(T,i()(W.SAVE))),n(R);var A=w(R,2);{var F=f=>{var k=Tt();k.__click=[Rt,i,o],c(f,k)};j(A,f=>{o()&&f(F)})}n(H),n(D),c(l,D),ue()}pe(["click"]);var It=y('<section class="material-icon"><!></section>');function Le(l,t){var r=It(),i=d(r);Pe(i,t,"default",{}),n(r),c(l,r)}var xt=y("<div> </div> <!>",1),Lt=(l,t)=>E(t,!0),qt=(l,t,r)=>{E(t,!0),qe(r,-1)},Ft=(l,t,r)=>{E(t,!1),qe(r)},Ut=y('<div class="months svelte-o5e3p2"></div>'),Qt=y('<div class="year svelte-o5e3p2"><!></div>'),Wt=y('<header class="svelte-o5e3p2"><button class="profile svelte-o5e3p2"> </button> <div class="year-controls svelte-o5e3p2"><button class="svelte-o5e3p2"><!></button> <h2 class="svelte-o5e3p2"> </h2> <button class="svelte-o5e3p2"><!></button></div> <div><!></div></header> <div class="calendar svelte-o5e3p2"><!></div>',1),Yt=y("<!> <!> <!>",1);function ra(l,t){de(t,!1);const r=ce(),i=()=>Z(Fe,"$momentStore",r),u=()=>Z($e,"$_",r),b=()=>Z(se,"$currentProfile",r);let o=Y([]),v=Y(new Date().getFullYear()),a=Y(),s=Y(!1),h=Y(!0);function p(_){E(a,_)}function M(_){if(!e(a))throw new Error("No selected day");De(o,e(o)[ye(e(a),be)]=_),E(a,void 0),st(me(se),_)}function $(){if(!e(a))throw new Error("No selected day");return ye(e(a),be)}function D(){if(!e(a))throw new Error("No selected day");const _=$();nt(me(se),_),De(o,e(o)[_]=void 0),E(a,void 0)}const P=se.subscribe(async _=>{E(o,await Ae(_))});lt(async()=>{E(o,await Ae(me(se)))}),Ue(()=>{P()}),ve();var L=Yt(),N=ne(L);{var q=_=>{var H=S(()=>i()(e(a)).format("dddd D MMMM yyyy"));it(_,{get title(){return e(H)},onclose:()=>{E(a,void 0)},children:(O,J)=>{var R=xt(),T=ne(R),A=d(T,!0);x(()=>B(A,u()(W.REWARDS_FORM_INFO))),n(T);var F=w(T,2);Ct(F,he({get reward(){return e(o)[$()]},oncancel:()=>{E(a,void 0)}},()=>({onsave:M,date:e(a),ondelete:D}))),c(O,R)},$$slots:{default:!0}})};j(N,_=>{e(a)&&_(q)})}var z=w(N,2);{var G=_=>{rt(_,{onclose:()=>E(s,!1)})};j(z,_=>{e(s)&&_(G)})}var re=w(z,2);xe(re,{children:(_,H)=>{var O=Wt(),J=ne(O),R=d(J);R.__click=[Lt,s];var T=d(R,!0);x(()=>B(T,b()?`${u()(W.PROFILE)} : ${b()}`:u()(W.PROFILE_DEFAULT))),n(R);var A=w(R,2),F=d(A);F.__click=[qt,h,v];var ee=d(F);Le(ee,{children:(C,I)=>{we();var K=ke("arrow_back_ios");c(C,K)},$$slots:{default:!0}}),n(F);var te=w(F,2),_e=d(te,!0);n(te);var ae=w(te,2);ae.__click=[Ft,h,v];var fe=d(ae);Le(fe,{children:(C,I)=>{we();var K=ke("arrow_forward_ios");c(C,K)},$$slots:{default:!0}}),n(ae),n(A);var oe=w(A,2),f=d(oe);at(f,{}),n(oe),n(J);var k=w(J,2),V=d(k);Xe(V,()=>e(v),C=>{var I=Qt(),K=d(I);xe(K,{get leftToRight(){return e(h)},children:(U,Q)=>{var X=Ut();le(X,5,()=>ot,ie,(je,jt,ge)=>{var Be=S(()=>i()(new Date(0,ge)).format("MMMM")),He=S(()=>ge===new Date().getMonth()&&e(v)===new Date().getFullYear());ct(je,{get title(){return e(Be)},get outline(){return e(He)},children:(Ke,Bt)=>{pt(Ke,he(()=>({month:ge,year:e(v),onselectday:p,calendar:e(o)})))},$$slots:{default:!0}})}),n(X),c(U,X)},$$slots:{default:!0}}),n(I),c(C,I)}),n(k),x(()=>B(_e,e(v))),c(_,O)},$$slots:{default:!0}}),c(l,L),ue()}pe(["click"]);export{ra as component};
