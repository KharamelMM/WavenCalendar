import{f as pe,s as ce,b as G,a as c,t as $,c as Z,d as ke,e as Pe}from"../chunks/disclose-version.BJNx_y7S.js";import{i as de}from"../chunks/legacy.Db3jXcoH.js";import{p as ue,L as E,M as Ke,I as Je,N as Ve,G as e,c as d,r as s,t as Y,a as ve,O as W,P as w,s as P,J as ze,aD as we,f as ne,aE as Le,Q as Ne}from"../chunks/utils.CUNAnymL.js";import{i as j}from"../chunks/if.BwXDAm1f.js";import{k as Xe}from"../chunks/key.DxTEZYSj.js";import{l as Ee,g as Re,T as Ze,R as m,e as le,i as ie,n as et,D as De,f as tt,h as at,o as ye,d as be,j as Oe,c as se,a as Te,F as rt,P as ot,M as st,s as nt,k as lt}from"../chunks/Filters.BQc8nbA_.js";import{p,o as qe,s as he,a as it}from"../chunks/preload-helper.CF3HKszJ.js";import{m as Ue,F as Ae}from"../chunks/FlyingSection.BmJl-jnE.js";import{a as Fe,t as Qe,r as Ce,b as Ie,M as ct,C as dt}from"../chunks/Modal.CD_ZXbtV.js";import{$ as $e,s as We,t as Q}from"../chunks/client.CyUcCIOj.js";import{g as me}from"../chunks/index.BOtyADB3.js";var ut=$("<button><div> </div></button>");function vt(n,t){ue(t,!1);const l=ce(),i=()=>Z($e,"$_",l);let _=p(t,"currentDate",8),g=p(t,"dayOfMonth",8),a=p(t,"reward",8,void 0),f=p(t,"onclick",8);const r=new Date;let o=W("");const y=Ee.subscribe(h=>{E(o,Re(a(),h.filters))});function b(){if(a()){let h=`${a().amount}× ${i()(a().type)}`;switch(a().type){case m.RUNES:case m.CHEST:h+=` ${i()(a().equipment)}`;break;case m.COMPANION:case m.EQUIPMENT:h=`${a().amount}× ${i()(a().type)} ${i()(a().rarety)}`;break}return h}}qe(()=>{y()}),Ke(()=>(Je(a()),Ee),()=>{E(o,Re(a(),me(Ee).filters))}),Ve(),de();var M=w(b);Ze(n,{get title(){return e(M)},children:(h,R)=>{var S=ut();S.__click=function(...z){var K;(K=f())==null||K.apply(this,z)};const x=w(()=>_().toDateString()===r.toDateString());var N=d(S),L=d(N,!0);s(N),s(S),Y(()=>{Fe(S,`${e(o)??""} svelte-14v7im1`),S.disabled=_()>r,Qe(S,"today",e(x)),G(L,g())}),c(h,S)},$$slots:{default:!0}}),ve()}pe(["click"]);var _t=$('<th class="svelte-t5kud4"> </th>'),ft=$("<td><!></td>"),mt=$("<tr></tr>"),yt=$('<table class="svelte-t5kud4"><thead><tr></tr></thead><tbody></tbody></table>');function bt(n,t){ue(t,!1);const l=ce(),i=()=>Z(Ue,"$momentStore",l);let _=p(t,"year",8),g=p(t,"month",8),a=p(t,"onselectday",8),f=p(t,"calendar",8);const r=De.length;function o(R){let S=ye(R,be);return f()[S]}de();var y=yt(),b=d(y),M=d(b);le(M,5,()=>({length:r}),ie,(R,S,x)=>{var N=_t(),L=d(N,!0);Y(()=>G(L,i()().weekday(x%r).format("dd"))),s(N),c(R,N)}),s(M),s(b);var h=P(b);le(h,5,()=>({length:et(g(),_())}),ie,(R,S,x)=>{var N=mt();const L=w(()=>tt(g(),_()));le(N,5,()=>De,ie,(K,re,u)=>{var B=ft();const D=w(()=>at(g(),_(),u,x));var J=d(B);{var O=T=>{const A=w(()=>new Date(_(),g(),e(D))),q=w(()=>o(e(A)));var ee=ze(()=>({currentDate:e(A),dayOfMonth:e(D),reward:e(q),onclick:()=>a()(e(A))}));vt(T,he(()=>e(ee)))};j(J,T=>{e(D)>0&&e(D)<=e(L)&&T(O)})}s(B),c(K,B)}),s(N),c(R,N)}),s(h),s(y),c(n,y),ve()}var Se=(n=>(n.COMPANIONS="COMPANIONS",n.SPELLS="SPELLS",n.EQUIPMENTS="EQUIPMENTS",n))(Se||{});function ht(n,t){ue(t,!1);const l=ce(),i=()=>Z($e,"$_",l);let _=p(t,"key",8);de(),we();var g=ke();Y(()=>G(g,i()(_()))),c(n,g),ve()}var pt=$('<span class="required svelte-u5ui8r">*</span>'),$t=$("<span> <!></span>"),gt=$('<section class="svelte-u5ui8r"><!> <!></section>');function Ye(n,t){let l=p(t,"title",8,void 0),i=p(t,"required",8,!1);var _=gt(),g=d(_);{var a=r=>{var o=$t(),y=d(o),b=P(y);{var M=h=>{var R=pt();c(h,R)};j(b,h=>{i()&&h(M)})}s(o),Y(()=>G(y,`${l()??""}: `)),c(r,o)};j(g,r=>{l()&&r(a)})}var f=P(g,2);We(f,t,"default",{}),s(_),c(n,_)}var Et=(n,t,l)=>t(e(l)),Mt=$("<button><!></button>"),kt=$('<section class="svelte-aefnkp"></section>');function Me(n,t){let l=p(t,"title",8,void 0),i=p(t,"values",24,()=>[]),_=p(t,"value",12),g=p(t,"required",8,!1);Ye(n,he(()=>({title:l(),required:g()}),{children:(a,f)=>{var r=kt();le(r,5,i,ie,(o,y)=>{var b=Mt();const M=w(()=>`${e(y).toLowerCase()??""} svelte-aefnkp`);b.__click=[Et,_,y];var h=d(b);ht(h,{get key(){return e(y)}}),s(b),Y(()=>{Fe(b,e(M)),Qe(b,"active",_()===e(y))}),c(o,b)}),s(r),c(a,r)},$$slots:{default:!0}}))}pe(["click"]);function wt(n){return Object.values(n).filter(t=>typeof t!="number")}var St=$('<input type="number" min="100" max="250" step="50">'),Pt=$('<input type="number" min="1" max="5000">'),Nt=(n,t)=>t()(),Rt=(n,t,l)=>{confirm(t()(Q.REWARD_DELETE_CONFIRM))&&l()()},Dt=$('<button class="delete material-icon svelte-tu6hhq">delete</button>'),Ot=$('<section class="svelte-tu6hhq"><!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Tt(n,t){var ee,te,_e,ae,fe,oe;ue(t,!1);const l=ce(),i=()=>Z($e,"$_",l);let _=p(t,"oncancel",8),g=p(t,"onsave",8),a=p(t,"ondelete",8,void 0),f=p(t,"reward",8,void 0),r=p(t,"date",8),o=W(((ee=f())==null?void 0:ee.type)??m.EQUIPMENT),y=W(((te=f())==null?void 0:te.type)===m.EQUIPMENT||((_e=f())==null?void 0:_e.type)===m.COMPANION?f().rarety:Oe.COMMON),b=W(((ae=f())==null?void 0:ae.type)===m.RUNES||((fe=f())==null?void 0:fe.type)===m.CHEST?f().equipment:Se.EQUIPMENTS),M=W(((oe=f())==null?void 0:oe.amount)??1);function h(){let v;const k={cycle_index:ye(r(),be),amount:e(M)};switch(e(o)){case m.GEMS:v={...k,type:e(o),amount:e(M)};break;case m.EQUIPMENT:case m.COMPANION:v={...k,type:e(o),rarety:e(y)};break;case m.CHEST:v={...k,type:e(o),equipment:e(b)};break;case m.RUNES:v={...k,type:e(o),equipment:e(b)};break;case m.KAMAS:case m.WAKFU:v={...k,type:e(o)};break}g()(v)}de();var R=Ot(),S=d(R),x=w(()=>i()(Q.REWARD_LABEL_TYPE)),N=w(()=>wt(m));Me(S,{get title(){return e(x)},get values(){return e(N)},get value(){return e(o)},set value(v){E(o,v)},required:!0,$$legacy:!0});var L=P(S,2);{var z=v=>{var k=w(()=>i()(Q.REWARD_LABEL_RARITY)),V=w(()=>Object.keys(Oe));Me(v,{get title(){return e(k)},get values(){return e(V)},get value(){return e(y)},set value(C){E(y,C)},required:!0,$$legacy:!0})},K=v=>{var k=Pe(),V=ne(k);{var C=I=>{var H=w(()=>i()(Q.REWARD_LABEL_EQUIPMENT_TYPE)),U=w(()=>Object.keys(Se));Me(I,{get title(){return e(H)},get values(){return e(U)},get value(){return e(b)},set value(F){E(b,F)},required:!0,$$legacy:!0})};j(V,I=>{(e(o)===m.CHEST||e(o)===m.RUNES)&&I(C)},!0)}c(v,k)};j(L,v=>{e(o)===m.EQUIPMENT||e(o)===m.COMPANION?v(z):v(K,!1)})}var re=P(L,2),u=w(()=>i()(Q.REWARD_LABEL_AMOUNT));Ye(re,{get title(){return e(u)},required:!0,children:(v,k)=>{var V=Pe(),C=ne(V);{var I=U=>{var F=St();Ce(F),Ie(F,()=>e(M),X=>E(M,X)),c(U,F)},H=U=>{var F=Pt();Ce(F),Ie(F,()=>e(M),X=>E(M,X)),c(U,F)};j(C,U=>{e(o)===m.GEMS?U(I):U(H,!1)})}c(v,V)},$$slots:{default:!0}});var B=P(re,2),D=d(B);D.__click=[Nt,_];var J=d(D,!0);Y(()=>G(J,i()(Q.CANCEL))),s(D);var O=P(D,2);O.__click=h;var T=d(O,!0);Y(()=>G(T,i()(Q.SAVE))),s(O);var A=P(O,2);{var q=v=>{var k=Dt();k.__click=[Rt,i,a],c(v,k)};j(A,v=>{a()&&v(q)})}s(B),s(R),c(n,R),ve()}pe(["click"]);var At=$('<section class="material-icon"><!></section>');function xe(n,t){var l=At(),i=d(l);We(i,t,"default",{}),s(l),c(n,l)}var Ct=$("<div> </div> <!>",1),It=(n,t)=>E(t,!0),xt=(n,t,l)=>{E(t,!0),Le(l,-1)},Lt=(n,t,l)=>{E(t,!1),Le(l)},qt=$('<div class="months svelte-o5e3p2"></div>'),Ut=$('<div class="year svelte-o5e3p2"><!></div>'),Ft=$('<header class="svelte-o5e3p2"><button class="profile svelte-o5e3p2"> </button> <div class="year-controls svelte-o5e3p2"><button class="svelte-o5e3p2"><!></button> <h2 class="svelte-o5e3p2"> </h2> <button class="svelte-o5e3p2"><!></button></div> <div><!></div></header> <div class="calendar svelte-o5e3p2"><!></div>',1),Qt=$("<!> <!> <!>",1);function ta(n,t){ue(t,!1);const l=ce(),i=()=>Z(Ue,"$momentStore",l),_=()=>Z($e,"$_",l),g=()=>Z(se,"$currentProfile",l);let a=W([]),f=W(new Date().getFullYear()),r=W(),o=W(!1),y=W(!0);function b(u){E(r,u)}function M(u){if(!e(r))throw new Error("No selected day");Ne(a,e(a)[ye(e(r),be)]=u),E(r,void 0),nt(me(se),u)}function h(){if(!e(r))throw new Error("No selected day");return ye(e(r),be)}function R(){if(!e(r))throw new Error("No selected day");const u=h();lt(me(se),u),Ne(a,e(a)[u]=void 0),E(r,void 0)}const S=se.subscribe(async u=>{E(a,await Te(u))});it(async()=>{E(a,await Te(me(se)))}),qe(()=>{S()}),de();var x=Qt(),N=ne(x);{var L=u=>{var B=w(()=>i()(e(r)).format("dddd D MMMM yyyy"));ct(u,{get title(){return e(B)},onclose:()=>{E(r,void 0)},children:(D,J)=>{var O=Ct(),T=ne(O),A=d(T,!0);Y(()=>G(A,_()(Q.REWARDS_FORM_INFO))),s(T);var q=P(T,2);Tt(q,he({get reward(){return e(a)[h()]},oncancel:()=>{E(r,void 0)}},()=>({onsave:M,date:e(r),ondelete:R}))),c(D,O)},$$slots:{default:!0}})};j(N,u=>{e(r)&&u(L)})}var z=P(N,2);{var K=u=>{ot(u,{onclose:()=>E(o,!1)})};j(z,u=>{e(o)&&u(K)})}var re=P(z,2);Ae(re,{children:(u,B)=>{var D=Ft(),J=ne(D),O=d(J);O.__click=[It,o];var T=d(O,!0);Y(()=>G(T,g()?`${_()(Q.PROFILE)} : ${g()}`:_()(Q.PROFILE_DEFAULT))),s(O);var A=P(O,2),q=d(A);q.__click=[xt,y,f];var ee=d(q);xe(ee,{children:(C,I)=>{we();var H=ke("arrow_back_ios");c(C,H)},$$slots:{default:!0}}),s(q);var te=P(q,2),_e=d(te,!0);s(te);var ae=P(te,2);ae.__click=[Lt,y,f];var fe=d(ae);xe(fe,{children:(C,I)=>{we();var H=ke("arrow_forward_ios");c(C,H)},$$slots:{default:!0}}),s(ae),s(A);var oe=P(A,2),v=d(oe);rt(v,{}),s(oe),s(J);var k=P(J,2),V=d(k);Xe(V,()=>e(f),C=>{var I=Ut(),H=d(I);Ae(H,{get leftToRight(){return e(y)},children:(U,F)=>{var X=qt();le(X,5,()=>st,ie,(Be,Wt,ge)=>{var He=w(()=>i()(new Date(0,ge)).format("MMMM")),je=w(()=>ge===new Date().getMonth()&&e(f)===new Date().getFullYear());dt(Be,{get title(){return e(He)},get outline(){return e(je)},children:(Ge,Yt)=>{bt(Ge,he(()=>({month:ge,year:e(f),onselectday:b,calendar:e(a)})))},$$slots:{default:!0}})}),s(X),c(U,X)},$$slots:{default:!0}}),s(I),c(C,I)}),s(k),Y(()=>G(_e,e(f))),c(u,D)},$$slots:{default:!0}}),c(n,x),ve()}pe(["click"]);export{ta as component};
