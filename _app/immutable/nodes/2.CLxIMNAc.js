import{l as Nt,a as M,t as T,b as W,g as Le,s as Ae,c as oe,f as Fe,e as Ve,i as Rt}from"../chunks/disclose-version.C3GaKkhg.js";import{i as fe}from"../chunks/legacy.ZCOmuoip.js";import{F as j,G as it,ax as Tt,ay as $t,a as wt,E as ut,O as ct,N as Ke,U as St,P as he,K as xe,ak as Ot,aj as It,D as Dt,av as vt,I as Pt,J as je,L as Ue,ar as kt,az as we,M as ft,a9 as Lt,A as Xe,aA as We,aB as ze,aC as Ge,aD as Ct,au as xt,aE as Ut,aF as Ht,aG as _t,ah as Ft,aH as Yt,a4 as Bt,w as Ze,aI as qt,ap as Qt,a7 as dt,c as A,e as I,d,t as F,p as _e,k as n,b as de,$ as x,ae as Se,aJ as Kt,af as K,y as S,f as ye,aK as Et,aL as et}from"../chunks/utils.DZPhWnf5.js";import{b as Wt,p as D,i as z,o as ht,c as Gt,s as tt}from"../chunks/preload-helper.BP17s5xY.js";import{t as y,f as Ce,$ as pe,r as Oe,b as Ie,s as yt,i as rt,j as at,k as Jt,a as ve,M as bt,C as Vt}from"../chunks/Modal.Bb5Bkck3.js";import{w as jt,g as He}from"../chunks/index.Cg1s4e5Y.js";function Xt(t,e,r){j&&it();var a=t,s=St,i,o=Tt()?$t:wt;ut(()=>{o(s,s=e())&&(i&&ct(i),i=Ke(()=>r(a)))}),j&&(a=he)}function be(t,e){return e}function zt(t,e,r,a){for(var s=[],i=e.length,o=0;o<i;o++)Ct(e[o].e,s,!0);var l=i>0&&s.length===0&&r!==null;if(l){var m=r.parentNode;xt(m),m.append(r),a.clear(),le(t,e[0].prev,e[i-1].next)}Ut(s,()=>{for(var c=0;c<i;c++){var h=e[c];l||(a.delete(h.k),le(t,h.prev,h.next)),Ht(h.e,!l)}})}function ge(t,e,r,a,s,i=null){var o=t,l={flags:e,items:new Map,first:null},m=(e&_t)!==0;if(m){var c=t;o=j?xe(Ot(c)):c.appendChild(It())}j&&it();var h=null,p=!1;ut(()=>{var u=r(),f=Dt(u)?u:u==null?[]:vt(u),v=f.length;if(p&&v===0)return;p=v===0;let P=!1;if(j){var b=o.data===Pt;b!==(v===0)&&(o=je(),xe(o),Ue(!1),P=!0)}if(j){for(var N=null,O,$=0;$<v;$++){if(he.nodeType===8&&he.data===kt){o=he,P=!0,Ue(!1);break}var _=f[$],E=a(_,$);O=gt(he,l,N,null,_,E,$,s,e),l.items.set(E,O),N=O}v>0&&xe(je())}if(!j){var g=Ft;Zt(f,l,o,s,e,(g.f&we)!==0,a)}i!==null&&(v===0?h?ft(h):h=Ke(()=>i(o)):h!==null&&ct(h,()=>{h=null})),P&&Ue(!0),r()}),j&&(o=he)}function Zt(t,e,r,a,s,i,o){var Z,te,Ee,re;var l=(s&Yt)!==0,m=(s&(We|Ge))!==0,c=t.length,h=e.items,p=e.first,u=p,f,v=null,P,b=[],N=[],O,$,_,E;if(l)for(E=0;E<c;E+=1)O=t[E],$=o(O,E),_=h.get($),_!==void 0&&((Z=_.a)==null||Z.measure(),(P??(P=new Set)).add(_));for(E=0;E<c;E+=1){if(O=t[E],$=o(O,E),_=h.get($),_===void 0){var g=u?u.e.nodes_start:r;v=gt(g,e,v,v===null?e.first:v.next,O,$,E,a,s),h.set($,v),b=[],N=[],u=v.next;continue}if(m&&er(_,O,E,s),_.e.f&we&&(ft(_.e),l&&((te=_.a)==null||te.unfix(),(P??(P=new Set)).delete(_))),_!==u){if(f!==void 0&&f.has(_)){if(b.length<N.length){var H=N[0],k;v=H.prev;var Y=b[0],U=b[b.length-1];for(k=0;k<b.length;k+=1)nt(b[k],H,r);for(k=0;k<N.length;k+=1)f.delete(N[k]);le(e,Y.prev,U.next),le(e,v,Y),le(e,U,H),u=H,v=U,E-=1,b=[],N=[]}else f.delete(_),nt(_,u,r),le(e,_.prev,_.next),le(e,_,v===null?e.first:v.next),le(e,v,_),v=_;continue}for(b=[],N=[];u!==null&&u.k!==$;)(i||!(u.e.f&we))&&(f??(f=new Set)).add(u),N.push(u),u=u.next;if(u===null)continue;_=u}b.push(_),v=_,u=_.next}if(u!==null||f!==void 0){for(var C=f===void 0?[]:vt(f);u!==null;)(i||!(u.e.f&we))&&C.push(u),u=u.next;var B=C.length;if(B>0){var X=s&_t&&c===0?r:null;if(l){for(E=0;E<B;E+=1)(Ee=C[E].a)==null||Ee.measure();for(E=0;E<B;E+=1)(re=C[E].a)==null||re.fix()}zt(e,C,X,h)}}l&&Lt(()=>{var ie;if(P!==void 0)for(_ of P)(ie=_.a)==null||ie.apply()}),Xe.first=e.first&&e.first.e,Xe.last=v&&v.e}function er(t,e,r,a){a&We&&ze(t.v,e),a&Ge?ze(t.i,r):t.i=r}function gt(t,e,r,a,s,i,o,l,m){var c=(m&We)!==0,h=(m&qt)===0,p=c?h?Bt(s):Ze(s):s,u=m&Ge?Ze(o):o,f={i:u,v:p,k:i,a:null,e:null,prev:r,next:a};try{return f.e=Ke(()=>l(t,p,u),j),f.e.prev=r&&r.e,f.e.next=a&&a.e,r===null?e.first=f:(r.next=f,r.e.next=f.e),a!==null&&(a.prev=f,a.e.prev=f.e),f}finally{}}function nt(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==a;){var o=Qt(i);s.before(i),i=o}}function le(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function tr(t,e){var r=t.__className,a=rr(e);j&&t.className===a?t.__className=a:(r!==a||j&&t.className!==a)&&(e==null?t.removeAttribute("class"):t.className=a,t.__className=a)}function rr(t){return t??""}function ar(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function mt(t,e,r){if(t.multiple)return lr(t,e);for(var a of t.options){var s=Ne(a);if(Wt(s,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function nr(t,e){dt(()=>{var r=new MutationObserver(()=>{var a=t.__value;mt(t,a)});return r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function sr(t,e,r=e){var a=!0;Nt(t,"change",s=>{var i=s?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(i),Ne);else{var l=t.querySelector(i)??t.querySelector("option:not([disabled])");o=l&&Ne(l)}r(o)}),dt(()=>{var s=e();if(mt(t,s,a),a&&s===void 0){var i=t.querySelector(":checked");i!==null&&(s=Ne(i),r(s))}t.__value=s,a=!1}),nr(t)}function lr(t,e){for(var r of t.options)r.selected=~e.indexOf(Ne(r))}function Ne(t){return"__value"in t?t.__value:t.value}const or=[y.JANUARY,y.FEBRUARY,y.MARCH,y.APRIL,y.MAY,y.JUNE,y.JULY,y.AUGUST,y.SEPTEMBER,y.OCTOBER,y.NOVEMBER,y.DECEMBER],me=[y.SHORT_SUNDAY,y.SHORT_MONDAY,y.SHORT_TUESDAY,y.SHORT_WEDNESDAY,y.SHORT_THURSDAY,y.SHORT_FRIDAY,y.SHORT_SATURDAY],De=new Date(2024,0,1);function At(t,e){return new Date(e,t+1,0).getDate()}function pt(t,e){return new Date(e,t,1).getDay()}function Mt(t,e){return(t-e+me.length)%me.length}function ir(t,e,r=0){const a=Mt(pt(t,e),r),s=At(t,e);return Math.ceil((a+s)/7)}function ur(t,e,r,a,s=0){return r+a*me.length-Mt(pt(t,e),s)+1}function cr(t,e){return Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24))}function Pe(t,e){return(cr(t,e)%365+365)%365}var w=(t=>(t.GEMS="GEMS",t.KAMAS="KAMAS",t.EQUIPMENT="EQUIPMENT",t.CHEST="CHEST",t.WAKFU="WAKFU",t.RUNES="RUNES",t))(w||{}),vr=T('<span class="text svelte-1mvyt92"> </span>'),fr=T('<section class="tooltip svelte-1mvyt92"><!> <!></section>');function _r(t,e){let r=D(e,"title",8,void 0);var a=fr(),s=A(a);Ce(s,e,"default",{});var i=I(s,2);{var o=l=>{var m=vr(),c=A(m,!0);d(m),F(()=>W(c,r())),M(l,m)};z(i,l=>{r()&&l(o)})}d(a),M(t,a)}var dr=T("<button><div> </div></button>");function Er(t,e){_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=D(e,"currentDate",8),i=D(e,"dayOfMonth",8),o=D(e,"reward",8,void 0),l=D(e,"onclick",8);const m=new Date;function c(){if(o())return o().type===w.EQUIPMENT?o().rarety.toLowerCase():o().type.toLowerCase()}function h(){if(o()){let u=`${o().amount}× ${a()(o().type)}`;switch(o().type){case w.RUNES:case w.CHEST:u+=` ${a()(o().equipment)}`;break;case w.EQUIPMENT:u=`${o().amount}× ${a()(o().item)} ${a()(o().rarety)}`;break}return u}}fe();var p=x(h);_r(t,{get title(){return n(p)},children:(u,f)=>{var v=dr();const P=x(()=>`${c()??""} svelte-endvbj`);v.__click=function(...$){var _;(_=l())==null||_.apply(this,$)};const b=x(()=>s().toDateString()===m.toDateString());var N=A(v),O=A(N,!0);d(N),d(v),F(()=>{tr(v,n(P)),v.disabled=s()>m,ar(v,"today",n(b)),W(O,i())}),M(u,v)},$$slots:{default:!0}}),de()}Le(["click"]);function hr(t,e){_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=D(e,"key",8);fe(),Se();var i=Fe();F(()=>W(i,a()(s()))),M(t,i),de()}var yr=T("<th><!></th>"),br=T("<td><!></td>"),gr=T("<tr></tr>"),mr=T("<table><thead><tr></tr></thead><tbody></tbody></table>");function Ar(t,e){_e(e,!1);let r=D(e,"year",8),a=D(e,"month",8),s=D(e,"onselectday",8),i=D(e,"calendar",8),o=D(e,"weekOffset",8,1);const l=me.length;function m(f){let v=Pe(f,De);return i()[v]}fe();var c=mr(),h=A(c),p=A(h);ge(p,5,()=>({length:l}),be,(f,v,P)=>{var b=yr(),N=A(b);hr(N,{get key(){return me[(P+o())%l]}}),d(b),M(f,b)}),d(p),d(h);var u=I(h);ge(u,5,()=>({length:ir(a(),r(),o())}),be,(f,v,P)=>{var b=gr();const N=x(()=>At(a(),r()));ge(b,5,()=>me,be,($,_,E)=>{var g=br();const H=x(()=>ur(a(),r(),E,P,o()));var k=A(g);{var Y=U=>{const C=x(()=>new Date(r(),a(),n(H))),B=x(()=>m(n(C)));Er(U,{get currentDate(){return n(C)},get dayOfMonth(){return n(H)},get reward(){return n(B)},onclick:()=>s()(n(C))})};z(k,U=>{n(H)>0&&n(H)<=n(N)&&U(Y)})}d(g),M($,g)}),d(b),M(f,b)}),d(u),d(c),M(t,c),de()}var Ye=(t=>(t.COMPANIONS="COMPANIONS",t.SPELLS="SPELLS",t.EQUIPMENTS="EQUIPMENTS",t))(Ye||{}),Be=(t=>(t.RING="RING",t.ARMBAND="ARMBAND",t.COMPANION="COMPANION",t))(Be||{}),qe=(t=>(t.COMMON="COMMON",t.RARE="RARE",t.KROSMIC="KROSMIC",t.INFINITE="INFINITE",t))(qe||{}),pr=T("<span> </span>"),Mr=T('<section class="svelte-1j4lmfo"><!> <!></section>');function Qe(t,e){let r=D(e,"title",8,void 0);var a=Mr(),s=A(a);{var i=l=>{var m=pr(),c=A(m);d(m),F(()=>W(c,`${r()??""}:`)),M(l,m)};z(s,l=>{r()&&l(i)})}var o=I(s,2);Ce(o,e,"default",{}),d(a),M(t,a)}var Nr=T("<option> </option>"),Rr=T("<select></select>");function $e(t,e){_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=D(e,"title",8,void 0),i=D(e,"values",24,()=>[]),o=D(e,"value",12);fe(),Qe(t,{get title(){return s()},children:(l,m)=>{var c=Rr();F(()=>{o(),Kt(()=>{i(),a()})}),ge(c,5,i,be,(h,p)=>{var u=Nr(),f={},v=A(u,!0);F(()=>W(v,a()(n(p)))),d(u),F(()=>{f!==(f=n(p))&&(u.value=(u.__value=n(p))==null?"":n(p))}),M(h,u)}),d(c),sr(c,o),M(l,c)},$$slots:{default:!0}}),de()}function Tr(t){return Object.values(t).filter(e=>typeof e!="number")}var $r=T("<!> <!>",1),wr=T('<input type="number" min="100" max="250" step="50">'),Sr=T('<input type="number" min="1" max="5000">'),Or=T('<input type="text">'),Ir=(t,e)=>e()(),Dr=T('<button class="delete material-icon svelte-tu6hhq">delete</button>'),Pr=T('<section class="svelte-tu6hhq"><!> <!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function kr(t,e){var ie,Me,Re,ae,ne,se,Te;_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=D(e,"oncancel",8),i=D(e,"onsave",8),o=D(e,"ondelete",8,void 0),l=D(e,"reward",8,void 0),m=D(e,"date",8),c=K(((ie=l())==null?void 0:ie.type)??w.EQUIPMENT),h=K(((Me=l())==null?void 0:Me.type)===w.EQUIPMENT?l().rarety:qe.COMMON),p=K(((Re=l())==null?void 0:Re.type)===w.RUNES||((ae=l())==null?void 0:ae.type)===w.CHEST?l().equipment:Ye.EQUIPMENTS),u=K(((ne=l())==null?void 0:ne.type)===w.EQUIPMENT?l().item:Be.RING),f=K(((se=l())==null?void 0:se.amount)??1),v=K(((Te=l())==null?void 0:Te.type)===w.EQUIPMENT?l().description:void 0);function P(){let R;const L={cycle_index:Pe(m(),De),amount:n(f)};switch(n(c)){case w.GEMS:R={...L,type:n(c),amount:n(f)};break;case w.EQUIPMENT:R={...L,type:n(c),rarety:n(h),item:n(u),description:n(v)};break;case w.CHEST:R={...L,type:n(c),equipment:n(p)};break;case w.RUNES:R={...L,type:n(c),equipment:n(p)};break;case w.KAMAS:case w.WAKFU:R={...L,type:n(c)};break}i()(R)}fe();var b=Pr(),N=A(b),O=x(()=>a()(y.REWARD_LABEL_TYPE)),$=x(()=>Tr(w));$e(N,{get title(){return n(O)},get values(){return n($)},get value(){return n(c)},set value(R){S(c,R)},$$legacy:!0});var _=I(N,2);{var E=R=>{var L=$r(),Q=ye(L),G=x(()=>a()(y.REWARD_LABEL_RARITY)),q=x(()=>Object.keys(qe));$e(Q,{get title(){return n(G)},get values(){return n(q)},get value(){return n(h)},set value(ue){S(h,ue)},$$legacy:!0});var ee=I(Q,2),J=x(()=>a()(y.REWARD_LABEL_ITEM_TYPE)),V=x(()=>Object.keys(Be));$e(ee,{get title(){return n(J)},get values(){return n(V)},get value(){return n(u)},set value(ue){S(u,ue)},$$legacy:!0}),M(R,L)},g=R=>{var L=Ve(),Q=ye(L);{var G=q=>{var ee=x(()=>a()(y.REWARD_LABEL_EQUIPMENT_TYPE)),J=x(()=>Object.keys(Ye));$e(q,{get title(){return n(ee)},get values(){return n(J)},get value(){return n(p)},set value(V){S(p,V)},$$legacy:!0})};z(Q,q=>{(n(c)===w.CHEST||n(c)===w.RUNES)&&q(G)},!0)}M(R,L)};z(_,R=>{n(c)===w.EQUIPMENT?R(E):R(g,!1)})}var H=I(_,2),k=x(()=>a()(y.REWARD_LABEL_AMOUNT));Qe(H,{get title(){return n(k)},children:(R,L)=>{var Q=Ve(),G=ye(Q);{var q=J=>{var V=wr();Oe(V),Ie(V,()=>n(f),ue=>S(f,ue)),M(J,V)},ee=J=>{var V=Sr();Oe(V),Ie(V,()=>n(f),ue=>S(f,ue)),M(J,V)};z(G,J=>{n(c)===w.GEMS?J(q):J(ee,!1)})}M(R,Q)},$$slots:{default:!0}});var Y=I(H,2);{var U=R=>{var L=x(()=>a()(y.REWARD_LABEL_EQUIPMENT_MORE));Qe(R,{get title(){return n(L)},children:(Q,G)=>{var q=Or();Oe(q),F(()=>yt(q,"placeholder",a()(y.EQUIPMENT_MORE_PLACEHOLDER))),Ie(q,()=>n(v),ee=>S(v,ee)),M(Q,q)},$$slots:{default:!0}})};z(Y,R=>{n(c)===w.EQUIPMENT&&R(U)})}var C=I(Y,2),B=A(C);B.__click=[Ir,s];var X=A(B,!0);F(()=>W(X,a()(y.CANCEL))),d(B);var Z=I(B,2);Z.__click=P;var te=A(Z,!0);F(()=>W(te,a()(y.SAVE))),d(Z);var Ee=I(Z,2);{var re=R=>{var L=Dr();L.__click=function(...Q){var G;(G=o())==null||G.apply(this,Q)},M(R,L)};z(Ee,R=>{o()&&R(re)})}d(C),d(b),M(t,b),de()}Le(["click"]);var Lr=T('<section class="svelte-1p5vij8"><!></section>');function st(t,e){let r=D(e,"leftToRight",8,!0);const a=1e3;var s=Lr(),i=A(s);Ce(i,e,"default",{}),d(s),rt(1,s,()=>at,()=>({delay:250,x:a*(r()?-1:1)})),rt(2,s,()=>at,()=>({duration:250,x:a*(r()?1:-1)})),M(t,s)}var Cr=T('<section class="material-icon"><!></section>');function lt(t,e){var r=Cr(),a=A(r);Ce(a,e,"default",{}),d(r),M(t,r)}var xr=T('<button class="svelte-4xatps">Se déconnecter</button>');function Ur(t){var e=xr();Rt("click",e,function(...r){var a;(a=Jt)==null||a.apply(this,r)}),M(t,e)}const ke="T_Reward";async function Hr(t,e){const r=await ve.from(ke).upsert({...e,profile_name:t},{onConflict:"user_id, profile_name, cycle_index"}).select();if(r.error)throw r.error;return r.data[0]}async function Fr(t,e){const r=await ve.from(ke).delete().match({profile_name:t,cycle_index:e}).select();if(r.error)throw r.error;return r.data[0]}async function ot(t=null){let e;if(t?e=await ve.from(ke).select().eq("profile_name",t):e=await ve.from(ke).select().is("profile_name",null),e.error)throw e.error;const r=e.data,a=[];for(const s of r){const i=s;a[i.cycle_index]=i}return a}const ce=jt(void 0),Je="T_Profile";async function Yr(){const t=await ve.from(Je).select();if(t.error)throw t.error;return t.data.map(e=>e.name)}async function Br(t){const e=await ve.from(Je).insert({name:t}).select();if(e.error)throw e.error;return e.data}async function qr(t){const e=await ve.from(Je).delete().match({name:t}).select();if(e.error)throw e.error;return e.data[0]}function Qr(t,e,r){n(e)!==""&&(Br(n(e)),S(r,[...n(r),n(e)]),S(e,""))}var Kr=(t,e)=>e(void 0),Wr=(t,e,r)=>e(n(r)),Gr=(t,e,r)=>e(n(r)),Jr=T('<div class="svelte-1w9alyb"><button class="svelte-1w9alyb"> </button> <button class="material-icon delete-profile svelte-1w9alyb">delete</button></div>'),Vr=T('<div> </div> <div class="profiles svelte-1w9alyb"><div class="svelte-1w9alyb"><button class="svelte-1w9alyb"> </button></div> <!></div> <input type="text"> <button class="svelte-1w9alyb"> </button>',1);function jr(t,e){_e(e,!1);const r=Ae(),a=()=>oe(ce,"$currentProfile",r),s=()=>oe(pe,"$_",r);let i=D(e,"onclose",8,void 0),o=K(""),l=K([]);function m(p){qr(p),S(l,n(l).filter(u=>u!==p))}function c(p){ce.set(p),i()&&i()()}ht(async()=>{S(l,await Yr())}),fe();var h=x(()=>a()??s()(y.PROFILE_DEFAULT));bt(t,{get title(){return n(h)},get onclose(){return i()},children:(p,u)=>{var f=Vr(),v=ye(f),P=A(v,!0);F(()=>W(P,s()(y.PROFILE_INFO))),d(v);var b=I(v,2),N=A(b),O=A(N);O.__click=[Kr,c];var $=A(O,!0);F(()=>W($,s()(y.PROFILE_DEFAULT))),d(O),d(N);var _=I(N,2);ge(_,1,()=>n(l),be,(k,Y)=>{var U=Jr(),C=A(U);C.__click=[Wr,c,Y];var B=A(C,!0);d(C);var X=I(C,2);X.__click=[Gr,m,Y],d(U),F(()=>W(B,n(Y))),M(k,U)}),d(b);var E=I(b,2);Oe(E),F(()=>yt(E,"placeholder",s()(y.PROFILE_CREATE_PLACEHOLDER)));var g=I(E,2);g.__click=[Qr,o,l];var H=A(g,!0);F(()=>W(H,s()(y.PROFILE_CREATE))),d(g),Ie(E,()=>n(o),k=>S(o,k)),M(p,f)},$$slots:{default:!0}}),de()}Le(["click"]);var Xr=(t,e)=>S(e,!0),zr=(t,e,r)=>{S(e,!0),Et(r,-1)},Zr=(t,e,r)=>{S(e,!1),Et(r)},ea=T('<div class="months svelte-gerr5i"></div>'),ta=T('<div class="year svelte-gerr5i"><!></div>'),ra=T('<header class="svelte-gerr5i"><button class="profile svelte-gerr5i"> </button> <div class="year-controls svelte-gerr5i"><button class="svelte-gerr5i"><!></button> <h2 class="svelte-gerr5i"> </h2> <button class="svelte-gerr5i"><!></button></div> <div class="filters svelte-gerr5i"></div></header> <div class="calendar svelte-gerr5i"><!></div>',1),aa=T("<!> <!> <!> <!>",1);function ca(t,e){_e(e,!1);const r=Ae(),a=()=>oe(ce,"$currentProfile",r),s=()=>oe(pe,"$_",r);let i=K([]),o=K(new Date().getFullYear()),l=K(),m=K(!1),c=K(!0);function h(g){S(l,g)}function p(g){if(!n(l))throw new Error("No selected day");et(i,n(i)[Pe(n(l),De)]=g),S(l,void 0),Hr(He(ce),g)}function u(){if(!n(l))throw new Error("No selected day");return Pe(n(l),De)}function f(){if(!n(l))throw new Error("No selected day");const g=u();Fr(He(ce),g),et(i,n(i)[g]=void 0),S(l,void 0)}const v=ce.subscribe(async g=>{S(i,await ot(g))});ht(async()=>{S(i,await ot(He(ce)))}),Gt(()=>{v()}),fe();var P=aa(),b=ye(P);{var N=g=>{var H=x(()=>n(l).toDateString());bt(g,{get title(){return n(H)},onclose:()=>{S(l,void 0)},children:(k,Y)=>{kr(k,tt({get reward(){return n(i)[u()]},oncancel:()=>{S(l,void 0)}},()=>({onsave:p,date:n(l),ondelete:f})))},$$slots:{default:!0}})};z(b,g=>{n(l)&&g(N)})}var O=I(b,2);{var $=g=>{jr(g,{onclose:()=>S(m,!1)})};z(O,g=>{n(m)&&g($)})}var _=I(O,2);st(_,{children:(g,H)=>{var k=ra(),Y=ye(k),U=A(Y);U.__click=[Xr,m];var C=A(U,!0);F(()=>W(C,a()??s()(y.PROFILE_DEFAULT))),d(U);var B=I(U,2),X=A(B);X.__click=[zr,c,o];var Z=A(X);lt(Z,{children:(ae,ne)=>{Se();var se=Fe("arrow_back_ios");M(ae,se)},$$slots:{default:!0}}),d(X);var te=I(X,2),Ee=A(te,!0);d(te);var re=I(te,2);re.__click=[Zr,c,o];var ie=A(re);lt(ie,{children:(ae,ne)=>{Se();var se=Fe("arrow_forward_ios");M(ae,se)},$$slots:{default:!0}}),d(re),d(B),Se(2),d(Y);var Me=I(Y,2),Re=A(Me);Xt(Re,()=>n(o),ae=>{var ne=ta(),se=A(ne);st(se,{get leftToRight(){return n(c)},children:(Te,R)=>{var L=ea();ge(L,5,()=>or,be,(Q,G,q)=>{Vt(Q,{get i18nTitleKey(){return n(G)},children:(ee,J)=>{Ar(ee,tt(()=>({month:q,year:n(o),onselectday:h,calendar:n(i)})))},$$slots:{default:!0}})}),d(L),M(Te,L)},$$slots:{default:!0}}),d(ne),M(ae,ne)}),d(Me),F(()=>W(Ee,n(o))),M(g,k)},$$slots:{default:!0}});var E=I(_,2);Ur(E),M(t,P),de()}Le(["click"]);export{ca as component};
