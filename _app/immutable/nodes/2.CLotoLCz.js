import{i as he,s as ce,b as G,a as i,t as $,c as Z,f as Me,e as Re}from"../chunks/disclose-version.BQDxvDFW.js";import{i as de}from"../chunks/legacy.BIOi2mGH.js";import{p as ue,P as E,aB as Ke,I as Je,aC as Ve,G as e,c as d,r as o,t as Y,a as ve,ai as Q,a4 as w,s as D,J as ze,aA as we,f as ne,aD as Ie,aE as De}from"../chunks/utils.Cpi28qrZ.js";import{i as j}from"../chunks/if.DJvtqlnZ.js";import{k as Xe}from"../chunks/key.BL3zTSPU.js";import{l as Ee,g as Pe,T as Ze,R as m,e as le,i as ie,n as et,D as Te,d as tt,a as at,o as ye,C as be,b as Se,E as Ne,c as oe,f as Oe,F as rt,P as st,M as ot,s as nt,h as lt}from"../chunks/Filters.DsvOpZtX.js";import{p as h,b as Le,s as pe,o as it}from"../chunks/preload-helper.D1FU0czH.js";import{m as Fe,F as Ce}from"../chunks/FlyingSection.DMuoPOeo.js";import{a as Ue,t as We,r as Ae,b as qe,M as ct,C as dt}from"../chunks/Modal.hGolKTix.js";import{e as $e,s as Qe,h as W}from"../chunks/client.BZ72MIe4.js";import{g as me}from"../chunks/index.PUy17aAp.js";var ut=$("<button><div> </div></button>");function vt(u,t){ue(t,!1);const n=ce(),l=()=>Z($e,"$_",n);let _=h(t,"currentDate",8),g=h(t,"dayOfMonth",8),a=h(t,"reward",8,void 0),f=h(t,"onclick",8);const r=new Date;let s=Q("");const y=Ee.subscribe(p=>{E(s,Pe(a(),p.filters))});function b(){if(a()){let p=`${a().amount}× ${l()(a().type)}`;switch(a().type){case m.RUNES:case m.CHEST:p+=` ${l()(a().equipment)}`;break;case m.COMPANION:case m.EQUIPMENT:p=`${a().amount}× ${l()(a().type)} ${l()(a().rarety)}`;break}return p}}Le(()=>{y()}),Ke(()=>(Je(a()),Ee),()=>{E(s,Pe(a(),me(Ee).filters))}),Ve(),de();var k=w(b);Ze(u,{get title(){return e(k)},children:(p,T)=>{var R=ut();R.__click=function(...z){var K;(K=f())==null||K.apply(this,z)};const x=w(()=>_().toDateString()===r.toDateString());var P=d(R),I=d(P,!0);o(P),o(R),Y(()=>{Ue(R,`${e(s)??""} svelte-14v7im1`),R.disabled=_()>r,We(R,"today",e(x)),G(I,g())}),i(p,R)},$$slots:{default:!0}}),ve()}he(["click"]);var _t=$('<th class="svelte-t5kud4"> </th>'),ft=$("<td><!></td>"),mt=$("<tr></tr>"),yt=$('<table class="svelte-t5kud4"><thead><tr></tr></thead><tbody></tbody></table>');function bt(u,t){ue(t,!1);const n=ce(),l=()=>Z(Fe,"$momentStore",n);let _=h(t,"year",8),g=h(t,"month",8),a=h(t,"onselectday",8),f=h(t,"calendar",8);const r=Te.length;function s(T){let R=ye(T,be);return f()[R]}de();var y=yt(),b=d(y),k=d(b);le(k,5,()=>({length:r}),ie,(T,R,x)=>{var P=_t(),I=d(P,!0);Y(()=>G(I,l()().weekday(x%r).format("dd"))),o(P),i(T,P)}),o(k),o(b);var p=D(b);le(p,5,()=>({length:et(g(),_())}),ie,(T,R,x)=>{var P=mt();const I=w(()=>tt(g(),_()));le(P,5,()=>Te,ie,(K,re,c)=>{var B=ft();const S=w(()=>at(g(),_(),c,x));var J=d(B);{var N=O=>{const C=w(()=>new Date(_(),g(),e(S))),L=w(()=>s(e(C)));var ee=ze(()=>({currentDate:e(C),dayOfMonth:e(S),reward:e(L),onclick:()=>a()(e(C))}));vt(O,pe(()=>e(ee)))};j(J,O=>{e(S)>0&&e(S)<=e(I)&&O(N)})}o(B),i(K,B)}),o(P),i(T,P)}),o(p),o(y),i(u,y),ve()}function pt(u,t){ue(t,!1);const n=ce(),l=()=>Z($e,"$_",n);let _=h(t,"key",8);de(),we();var g=Me();Y(()=>G(g,l()(_()))),i(u,g),ve()}var ht=$('<span class="required svelte-u5ui8r">*</span>'),$t=$("<span> <!></span>"),gt=$('<section class="svelte-u5ui8r"><!> <!></section>');function Ye(u,t){let n=h(t,"title",8,void 0),l=h(t,"required",8,!1);var _=gt(),g=d(_);{var a=r=>{var s=$t(),y=d(s),b=D(y);{var k=p=>{var T=ht();i(p,T)};j(b,p=>{l()&&p(k)})}o(s),Y(()=>G(y,`${n()??""}: `)),i(r,s)};j(g,r=>{n()&&r(a)})}var f=D(g,2);Qe(f,t,"default",{}),o(_),i(u,_)}var Et=(u,t,n)=>t(e(n)),kt=$("<button><!></button>"),Mt=$('<section class="svelte-aefnkp"></section>');function ke(u,t){let n=h(t,"title",8,void 0),l=h(t,"values",24,()=>[]),_=h(t,"value",12),g=h(t,"required",8,!1);Ye(u,pe(()=>({title:n(),required:g()}),{children:(a,f)=>{var r=Mt();le(r,5,l,ie,(s,y)=>{var b=kt();const k=w(()=>`${e(y).toLowerCase()??""} svelte-aefnkp`);b.__click=[Et,_,y];var p=d(b);pt(p,{get key(){return e(y)}}),o(b),Y(()=>{Ue(b,e(k)),We(b,"active",_()===e(y))}),i(s,b)}),o(r),i(a,r)},$$slots:{default:!0}}))}he(["click"]);function wt(u){return Object.values(u).filter(t=>typeof t!="number")}var Rt=$('<input type="number" min="100" max="250" step="50">'),Dt=$('<input type="number" min="1" max="5000">'),Pt=(u,t)=>t()(),Tt=(u,t,n)=>{confirm(t()(W.REWARD_DELETE_CONFIRM))&&n()()},St=$('<button class="delete material-icon svelte-tu6hhq">delete</button>'),Nt=$('<section class="svelte-tu6hhq"><!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Ot(u,t){var ee,te,_e,ae,fe,se;ue(t,!1);const n=ce(),l=()=>Z($e,"$_",n);let _=h(t,"oncancel",8),g=h(t,"onsave",8),a=h(t,"ondelete",8,void 0),f=h(t,"reward",8,void 0),r=h(t,"date",8),s=Q(((ee=f())==null?void 0:ee.type)??m.EQUIPMENT),y=Q(((te=f())==null?void 0:te.type)===m.EQUIPMENT||((_e=f())==null?void 0:_e.type)===m.COMPANION?f().rarety:Se.COMMON),b=Q(((ae=f())==null?void 0:ae.type)===m.RUNES||((fe=f())==null?void 0:fe.type)===m.CHEST?f().equipment:Ne.EQUIPMENTS),k=Q(((se=f())==null?void 0:se.amount)??1);function p(){let v;const M={cycle_index:ye(r(),be),amount:e(k)};switch(e(s)){case m.GEMS:v={...M,type:e(s),amount:e(k)};break;case m.EQUIPMENT:case m.COMPANION:v={...M,type:e(s),rarety:e(y)};break;case m.CHEST:v={...M,type:e(s),equipment:e(b)};break;case m.RUNES:v={...M,type:e(s),equipment:e(b)};break;case m.KAMAS:case m.WAKFU:v={...M,type:e(s)};break}g()(v)}de();var T=Nt(),R=d(T),x=w(()=>l()(W.REWARD_LABEL_TYPE)),P=w(()=>wt(m));ke(R,{get title(){return e(x)},get values(){return e(P)},get value(){return e(s)},set value(v){E(s,v)},required:!0,$$legacy:!0});var I=D(R,2);{var z=v=>{var M=w(()=>l()(W.REWARD_LABEL_RARITY)),V=w(()=>Object.keys(Se));ke(v,{get title(){return e(M)},get values(){return e(V)},get value(){return e(y)},set value(A){E(y,A)},required:!0,$$legacy:!0})},K=v=>{var M=Re(),V=ne(M);{var A=q=>{var H=w(()=>l()(W.REWARD_LABEL_EQUIPMENT_TYPE)),F=w(()=>Object.keys(Ne));ke(q,{get title(){return e(H)},get values(){return e(F)},get value(){return e(b)},set value(U){E(b,U)},required:!0,$$legacy:!0})};j(V,q=>{(e(s)===m.CHEST||e(s)===m.RUNES)&&q(A)},!0)}i(v,M)};j(I,v=>{e(s)===m.EQUIPMENT||e(s)===m.COMPANION?v(z):v(K,!1)})}var re=D(I,2),c=w(()=>l()(W.REWARD_LABEL_AMOUNT));Ye(re,{get title(){return e(c)},required:!0,children:(v,M)=>{var V=Re(),A=ne(V);{var q=F=>{var U=Rt();Ae(U),qe(U,()=>e(k),X=>E(k,X)),i(F,U)},H=F=>{var U=Dt();Ae(U),qe(U,()=>e(k),X=>E(k,X)),i(F,U)};j(A,F=>{e(s)===m.GEMS?F(q):F(H,!1)})}i(v,V)},$$slots:{default:!0}});var B=D(re,2),S=d(B);S.__click=[Pt,_];var J=d(S,!0);Y(()=>G(J,l()(W.CANCEL))),o(S);var N=D(S,2);N.__click=p;var O=d(N,!0);Y(()=>G(O,l()(W.SAVE))),o(N);var C=D(N,2);{var L=v=>{var M=St();M.__click=[Tt,l,a],i(v,M)};j(C,v=>{a()&&v(L)})}o(B),o(T),i(u,T),ve()}he(["click"]);var Ct=$('<section class="material-icon"><!></section>');function xe(u,t){var n=Ct(),l=d(n);Qe(l,t,"default",{}),o(n),i(u,n)}var At=$("<div> </div> <!>",1),qt=(u,t)=>E(t,!0),xt=(u,t,n)=>{E(t,!0),Ie(n,-1)},It=(u,t,n)=>{E(t,!1),Ie(n)},Lt=$('<div class="months svelte-o5e3p2"></div>'),Ft=$('<div class="year svelte-o5e3p2"><!></div>'),Ut=$('<header class="svelte-o5e3p2"><button class="profile svelte-o5e3p2"> </button> <div class="year-controls svelte-o5e3p2"><button class="svelte-o5e3p2"><!></button> <h2 class="svelte-o5e3p2"> </h2> <button class="svelte-o5e3p2"><!></button></div> <div><!></div></header> <div class="calendar svelte-o5e3p2"><!></div>',1),Wt=$("<!> <!> <!>",1);function ta(u,t){ue(t,!1);const n=ce(),l=()=>Z(Fe,"$momentStore",n),_=()=>Z($e,"$_",n),g=()=>Z(oe,"$currentProfile",n);let a=Q([]),f=Q(new Date().getFullYear()),r=Q(),s=Q(!1),y=Q(!0);function b(c){E(r,c)}function k(c){if(!e(r))throw new Error("No selected day");c.validated=!1,De(a,e(a)[ye(e(r),be)]=c),E(r,void 0),nt(me(oe),c)}function p(){if(!e(r))throw new Error("No selected day");return ye(e(r),be)}function T(){if(!e(r))throw new Error("No selected day");const c=p();lt(me(oe),c),De(a,e(a)[c]=void 0),E(r,void 0)}const R=oe.subscribe(async c=>{E(a,await Oe(c))});it(async()=>{E(a,await Oe(me(oe)))}),Le(()=>{R()}),de();var x=Wt(),P=ne(x);{var I=c=>{var B=w(()=>l()(e(r)).format("dddd D MMMM yyyy"));ct(c,{get title(){return e(B)},onclose:()=>{E(r,void 0)},children:(S,J)=>{var N=At(),O=ne(N),C=d(O,!0);Y(()=>G(C,_()(W.REWARDS_FORM_INFO))),o(O);var L=D(O,2);Ot(L,pe({get reward(){return e(a)[p()]},oncancel:()=>{E(r,void 0)}},()=>({onsave:k,date:e(r),ondelete:T}))),i(S,N)},$$slots:{default:!0}})};j(P,c=>{e(r)&&c(I)})}var z=D(P,2);{var K=c=>{st(c,{onclose:()=>E(s,!1)})};j(z,c=>{e(s)&&c(K)})}var re=D(z,2);Ce(re,{children:(c,B)=>{var S=Ut(),J=ne(S),N=d(J);N.__click=[qt,s];var O=d(N,!0);Y(()=>G(O,g()?`${_()(W.PROFILE)} : ${g()}`:_()(W.PROFILE_DEFAULT))),o(N);var C=D(N,2),L=d(C);L.__click=[xt,y,f];var ee=d(L);xe(ee,{children:(A,q)=>{we();var H=Me("arrow_back_ios");i(A,H)},$$slots:{default:!0}}),o(L);var te=D(L,2),_e=d(te,!0);o(te);var ae=D(te,2);ae.__click=[It,y,f];var fe=d(ae);xe(fe,{children:(A,q)=>{we();var H=Me("arrow_forward_ios");i(A,H)},$$slots:{default:!0}}),o(ae),o(C);var se=D(C,2),v=d(se);rt(v,{}),o(se),o(J);var M=D(J,2),V=d(M);Xe(V,()=>e(f),A=>{var q=Ft(),H=d(q);Ce(H,{get leftToRight(){return e(y)},children:(F,U)=>{var X=Lt();le(X,5,()=>ot,ie,(Be,Qt,ge)=>{var He=w(()=>l()(new Date(0,ge)).format("MMMM")),je=w(()=>ge===new Date().getMonth()&&e(f)===new Date().getFullYear());dt(Be,{get title(){return e(He)},get outline(){return e(je)},children:(Ge,Yt)=>{bt(Ge,pe(()=>({month:ge,year:e(f),onselectday:b,calendar:e(a)})))},$$slots:{default:!0}})}),o(X),i(F,X)},$$slots:{default:!0}}),o(q),i(A,q)}),o(M),Y(()=>G(_e,e(f))),i(c,S)},$$slots:{default:!0}}),i(u,x),ve()}he(["click"]);export{ta as component};
