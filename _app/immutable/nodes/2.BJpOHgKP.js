import{d as pe,s as ce,b as G,a as c,t as $,c as Z,e as ke,f as Pe}from"../chunks/disclose-version.uy8RbVP_.js";import{i as de}from"../chunks/legacy.Db3jXcoH.js";import{p as ue,L as E,M as Ke,I as Je,N as Ve,G as e,c as u,r as s,t as Y,a as ve,O as W,P as S,s as P,J as ze,aD as Se,f as ne,aE as Le,Q as Ne}from"../chunks/utils.CUNAnymL.js";import{i as j}from"../chunks/if.BwXDAm1f.js";import{k as Xe}from"../chunks/key.DxTEZYSj.js";import{l as Ee,g as Re,T as Ze,R as m,e as le,i as ie,n as et,D as De,f as tt,h as at,o as ye,C as be,j as Oe,c as se,a as Te,F as rt,P as ot,M as st,s as nt,k as lt}from"../chunks/Filters.Co-zQY4P.js";import{p,o as qe,s as he,a as it}from"../chunks/preload-helper.DIGldzjJ.js";import{m as Ue,F as Ce}from"../chunks/FlyingSection.0cTW2p4j.js";import{c as Fe,t as Qe,r as Ae,a as Ie,M as ct,C as dt}from"../chunks/Modal.C6EBVnI4.js";import{$ as $e,d as We,a as Q}from"../chunks/client.Bw9zwrEO.js";import{g as me}from"../chunks/index.BOtyADB3.js";var ut=$("<button><div> </div></button>");function vt(n,t){ue(t,!1);const l=ce(),i=()=>Z($e,"$_",l);let _=p(t,"currentDate",8),g=p(t,"dayOfMonth",8),a=p(t,"reward",8,void 0),f=p(t,"onclick",8);const r=new Date;let o=W("");const y=Ee.subscribe(h=>{E(o,Re(a(),h.filters))});function b(){if(a()){let h=`${a().amount}× ${i()(a().type)}`;switch(a().type){case m.RUNES:case m.CHEST:h+=` ${i()(a().equipment)}`;break;case m.COMPANION:case m.EQUIPMENT:h=`${a().amount}× ${i()(a().type)} ${i()(a().rarety)}`;break}return h}}qe(()=>{y()}),Ke(()=>(Je(a()),Ee),()=>{E(o,Re(a(),me(Ee).filters))}),Ve(),de();var M=S(b);Ze(n,{get title(){return e(M)},children:(h,R)=>{var w=ut();w.__click=function(...z){var K;(K=f())==null||K.apply(this,z)};const x=S(()=>_().toDateString()===r.toDateString());var N=u(w),L=u(N,!0);s(N),s(w),Y(()=>{Fe(w,`${e(o)??""} svelte-14v7im1`),w.disabled=_()>r,Qe(w,"today",e(x)),G(L,g())}),c(h,w)},$$slots:{default:!0}}),ve()}pe(["click"]);var _t=$('<th class="svelte-t5kud4"> </th>'),ft=$("<td><!></td>"),mt=$("<tr></tr>"),yt=$('<table class="svelte-t5kud4"><thead><tr></tr></thead><tbody></tbody></table>');function bt(n,t){ue(t,!1);const l=ce(),i=()=>Z(Ue,"$momentStore",l);let _=p(t,"year",8),g=p(t,"month",8),a=p(t,"onselectday",8),f=p(t,"calendar",8);const r=De.length;function o(R){let w=ye(R,be);return f()[w]}de();var y=yt(),b=u(y),M=u(b);le(M,5,()=>({length:r}),ie,(R,w,x)=>{var N=_t(),L=u(N,!0);Y(()=>G(L,i()().weekday(x%r).format("dd"))),s(N),c(R,N)}),s(M),s(b);var h=P(b);le(h,5,()=>({length:et(g(),_())}),ie,(R,w,x)=>{var N=mt();const L=S(()=>tt(g(),_()));le(N,5,()=>De,ie,(K,re,d)=>{var B=ft();const D=S(()=>at(g(),_(),d,x));var J=u(B);{var O=T=>{const C=S(()=>new Date(_(),g(),e(D))),q=S(()=>o(e(C)));var ee=ze(()=>({currentDate:e(C),dayOfMonth:e(D),reward:e(q),onclick:()=>a()(e(C))}));vt(T,he(()=>e(ee)))};j(J,T=>{e(D)>0&&e(D)<=e(L)&&T(O)})}s(B),c(K,B)}),s(N),c(R,N)}),s(h),s(y),c(n,y),ve()}var we=(n=>(n.COMPANIONS="COMPANIONS",n.SPELLS="SPELLS",n.EQUIPMENTS="EQUIPMENTS",n))(we||{});function ht(n,t){ue(t,!1);const l=ce(),i=()=>Z($e,"$_",l);let _=p(t,"key",8);de(),Se();var g=ke();Y(()=>G(g,i()(_()))),c(n,g),ve()}var pt=$('<span class="required svelte-u5ui8r">*</span>'),$t=$("<span> <!></span>"),gt=$('<section class="svelte-u5ui8r"><!> <!></section>');function Ye(n,t){let l=p(t,"title",8,void 0),i=p(t,"required",8,!1);var _=gt(),g=u(_);{var a=r=>{var o=$t(),y=u(o),b=P(y);{var M=h=>{var R=pt();c(h,R)};j(b,h=>{i()&&h(M)})}s(o),Y(()=>G(y,`${l()??""}: `)),c(r,o)};j(g,r=>{l()&&r(a)})}var f=P(g,2);We(f,t,"default",{}),s(_),c(n,_)}var Et=(n,t,l)=>t(e(l)),Mt=$("<button><!></button>"),kt=$('<section class="svelte-aefnkp"></section>');function Me(n,t){let l=p(t,"title",8,void 0),i=p(t,"values",24,()=>[]),_=p(t,"value",12),g=p(t,"required",8,!1);Ye(n,he(()=>({title:l(),required:g()}),{children:(a,f)=>{var r=kt();le(r,5,i,ie,(o,y)=>{var b=Mt();const M=S(()=>`${e(y).toLowerCase()??""} svelte-aefnkp`);b.__click=[Et,_,y];var h=u(b);ht(h,{get key(){return e(y)}}),s(b),Y(()=>{Fe(b,e(M)),Qe(b,"active",_()===e(y))}),c(o,b)}),s(r),c(a,r)},$$slots:{default:!0}}))}pe(["click"]);function St(n){return Object.values(n).filter(t=>typeof t!="number")}var wt=$('<input type="number" min="100" max="250" step="50">'),Pt=$('<input type="number" min="1" max="5000">'),Nt=(n,t)=>t()(),Rt=(n,t,l)=>{confirm(t()(Q.REWARD_DELETE_CONFIRM))&&l()()},Dt=$('<button class="delete material-icon svelte-tu6hhq">delete</button>'),Ot=$('<section class="svelte-tu6hhq"><!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Tt(n,t){var ee,te,_e,ae,fe,oe;ue(t,!1);const l=ce(),i=()=>Z($e,"$_",l);let _=p(t,"oncancel",8),g=p(t,"onsave",8),a=p(t,"ondelete",8,void 0),f=p(t,"reward",8,void 0),r=p(t,"date",8),o=W(((ee=f())==null?void 0:ee.type)??m.EQUIPMENT),y=W(((te=f())==null?void 0:te.type)===m.EQUIPMENT||((_e=f())==null?void 0:_e.type)===m.COMPANION?f().rarety:Oe.COMMON),b=W(((ae=f())==null?void 0:ae.type)===m.RUNES||((fe=f())==null?void 0:fe.type)===m.CHEST?f().equipment:we.EQUIPMENTS),M=W(((oe=f())==null?void 0:oe.amount)??1);function h(){let v;const k={cycle_index:ye(r(),be),amount:e(M)};switch(e(o)){case m.GEMS:v={...k,type:e(o),amount:e(M)};break;case m.EQUIPMENT:case m.COMPANION:v={...k,type:e(o),rarety:e(y)};break;case m.CHEST:v={...k,type:e(o),equipment:e(b)};break;case m.RUNES:v={...k,type:e(o),equipment:e(b)};break;case m.KAMAS:case m.WAKFU:v={...k,type:e(o)};break}g()(v)}de();var R=Ot(),w=u(R),x=S(()=>i()(Q.REWARD_LABEL_TYPE)),N=S(()=>St(m));Me(w,{get title(){return e(x)},get values(){return e(N)},get value(){return e(o)},set value(v){E(o,v)},required:!0,$$legacy:!0});var L=P(w,2);{var z=v=>{var k=S(()=>i()(Q.REWARD_LABEL_RARITY)),V=S(()=>Object.keys(Oe));Me(v,{get title(){return e(k)},get values(){return e(V)},get value(){return e(y)},set value(A){E(y,A)},required:!0,$$legacy:!0})},K=v=>{var k=Pe(),V=ne(k);{var A=I=>{var H=S(()=>i()(Q.REWARD_LABEL_EQUIPMENT_TYPE)),U=S(()=>Object.keys(we));Me(I,{get title(){return e(H)},get values(){return e(U)},get value(){return e(b)},set value(F){E(b,F)},required:!0,$$legacy:!0})};j(V,I=>{(e(o)===m.CHEST||e(o)===m.RUNES)&&I(A)},!0)}c(v,k)};j(L,v=>{e(o)===m.EQUIPMENT||e(o)===m.COMPANION?v(z):v(K,!1)})}var re=P(L,2),d=S(()=>i()(Q.REWARD_LABEL_AMOUNT));Ye(re,{get title(){return e(d)},required:!0,children:(v,k)=>{var V=Pe(),A=ne(V);{var I=U=>{var F=wt();Ae(F),Ie(F,()=>e(M),X=>E(M,X)),c(U,F)},H=U=>{var F=Pt();Ae(F),Ie(F,()=>e(M),X=>E(M,X)),c(U,F)};j(A,U=>{e(o)===m.GEMS?U(I):U(H,!1)})}c(v,V)},$$slots:{default:!0}});var B=P(re,2),D=u(B);D.__click=[Nt,_];var J=u(D,!0);Y(()=>G(J,i()(Q.CANCEL))),s(D);var O=P(D,2);O.__click=h;var T=u(O,!0);Y(()=>G(T,i()(Q.SAVE))),s(O);var C=P(O,2);{var q=v=>{var k=Dt();k.__click=[Rt,i,a],c(v,k)};j(C,v=>{a()&&v(q)})}s(B),s(R),c(n,R),ve()}pe(["click"]);var Ct=$('<section class="material-icon"><!></section>');function xe(n,t){var l=Ct(),i=u(l);We(i,t,"default",{}),s(l),c(n,l)}var At=$("<div> </div> <!>",1),It=(n,t)=>E(t,!0),xt=(n,t,l)=>{E(t,!0),Le(l,-1)},Lt=(n,t,l)=>{E(t,!1),Le(l)},qt=$('<div class="months svelte-o5e3p2"></div>'),Ut=$('<div class="year svelte-o5e3p2"><!></div>'),Ft=$('<header class="svelte-o5e3p2"><button class="profile svelte-o5e3p2"> </button> <div class="year-controls svelte-o5e3p2"><button class="svelte-o5e3p2"><!></button> <h2 class="svelte-o5e3p2"> </h2> <button class="svelte-o5e3p2"><!></button></div> <div><!></div></header> <div class="calendar svelte-o5e3p2"><!></div>',1),Qt=$("<!> <!> <!>",1);function ta(n,t){ue(t,!1);const l=ce(),i=()=>Z(Ue,"$momentStore",l),_=()=>Z($e,"$_",l),g=()=>Z(se,"$currentProfile",l);let a=W([]),f=W(new Date().getFullYear()),r=W(),o=W(!1),y=W(!0);function b(d){E(r,d)}function M(d){if(!e(r))throw new Error("No selected day");d.validated=!1,Ne(a,e(a)[ye(e(r),be)]=d),E(r,void 0),nt(me(se),d)}function h(){if(!e(r))throw new Error("No selected day");return ye(e(r),be)}function R(){if(!e(r))throw new Error("No selected day");const d=h();lt(me(se),d),Ne(a,e(a)[d]=void 0),E(r,void 0)}const w=se.subscribe(async d=>{E(a,await Te(d))});it(async()=>{E(a,await Te(me(se)))}),qe(()=>{w()}),de();var x=Qt(),N=ne(x);{var L=d=>{var B=S(()=>i()(e(r)).format("dddd D MMMM yyyy"));ct(d,{get title(){return e(B)},onclose:()=>{E(r,void 0)},children:(D,J)=>{var O=At(),T=ne(O),C=u(T,!0);Y(()=>G(C,_()(Q.REWARDS_FORM_INFO))),s(T);var q=P(T,2);Tt(q,he({get reward(){return e(a)[h()]},oncancel:()=>{E(r,void 0)}},()=>({onsave:M,date:e(r),ondelete:R}))),c(D,O)},$$slots:{default:!0}})};j(N,d=>{e(r)&&d(L)})}var z=P(N,2);{var K=d=>{ot(d,{onclose:()=>E(o,!1)})};j(z,d=>{e(o)&&d(K)})}var re=P(z,2);Ce(re,{children:(d,B)=>{var D=Ft(),J=ne(D),O=u(J);O.__click=[It,o];var T=u(O,!0);Y(()=>G(T,g()?`${_()(Q.PROFILE)} : ${g()}`:_()(Q.PROFILE_DEFAULT))),s(O);var C=P(O,2),q=u(C);q.__click=[xt,y,f];var ee=u(q);xe(ee,{children:(A,I)=>{Se();var H=ke("arrow_back_ios");c(A,H)},$$slots:{default:!0}}),s(q);var te=P(q,2),_e=u(te,!0);s(te);var ae=P(te,2);ae.__click=[Lt,y,f];var fe=u(ae);xe(fe,{children:(A,I)=>{Se();var H=ke("arrow_forward_ios");c(A,H)},$$slots:{default:!0}}),s(ae),s(C);var oe=P(C,2),v=u(oe);rt(v,{}),s(oe),s(J);var k=P(J,2),V=u(k);Xe(V,()=>e(f),A=>{var I=Ut(),H=u(I);Ce(H,{get leftToRight(){return e(y)},children:(U,F)=>{var X=qt();le(X,5,()=>st,ie,(Be,Wt,ge)=>{var He=S(()=>i()(new Date(0,ge)).format("MMMM")),je=S(()=>ge===new Date().getMonth()&&e(f)===new Date().getFullYear());dt(Be,{get title(){return e(He)},get outline(){return e(je)},children:(Ge,Yt)=>{bt(Ge,he(()=>({month:ge,year:e(f),onselectday:b,calendar:e(a)})))},$$slots:{default:!0}})}),s(X),c(U,X)},$$slots:{default:!0}}),s(I),c(A,I)}),s(k),Y(()=>G(_e,e(f))),c(d,D)},$$slots:{default:!0}}),c(n,x),ve()}pe(["click"]);export{ta as component};
