import{a as p,t as N,b as Q,i as $e,s as be,c as j,f as we,e as Xe}from"../chunks/disclose-version.BJ0bh1Fm.js";import{i as me}from"../chunks/legacy.DxQuUseu.js";import{h as ue,g as He,am as Mt,d as St,b as At,T as Rt,ay as it,H as Nt,e as Ze,i as qe,m as Ae,aB as De,j as ct,k as ut,l as Tt,P as et,aC as tt,aD as Ot,ax as kt,aE as Dt,aF as It,an as Pt,au as wt,ak as Ct,q as Lt,aG as Qe,aH as We,a7 as xt,L as rt,aI as vt,aJ as Ut,aK as Ft,as as Ht,c as y,s as T,r as E,t as U,p as he,N as I,aL as qt,aM as Yt,D as a,a as ge,ah as K,F as Bt,a2 as L,G as zt,aA as Ce,f as de,aN as ft,aO as at}from"../chunks/utils.C-8QtjWp.js";import{i as V}from"../chunks/if.C9YGHIHd.js";import{m as dt,F as nt,g as Qt,k as Wt}from"../chunks/stats.JVX8n0nu.js";import{p as x,b as _t,s as Le,o as Ge}from"../chunks/preload-helper.BVYu0XUD.js";import{b as h,s as Ke,$ as pe,h as ie}from"../chunks/client.CXakSG2M.js";import{a as Je,t as Ve,r as Ie,b as Pe,s as Et,M as bt,C as Gt}from"../chunks/Modal.Bj6_Pbx9.js";import{g as ye,w as mt}from"../chunks/index.Aa73rqEY.js";function _e(t,e){return e}function Kt(t,e,r,n){for(var o=[],d=e.length,l=0;l<d;l++)Ot(e[l].e,o,!0);var u=d>0&&o.length===0&&r!==null;if(u){var i=r.parentNode;kt(i),i.append(r),n.clear(),le(t,e[0].prev,e[d-1].next)}Dt(o,()=>{for(var s=0;s<d;s++){var f=e[s];u||(n.delete(f.k),le(t,f.prev,f.next)),It(f.e,!u)}})}function Ee(t,e,r,n,o,d=null){var l=t,u={flags:e,items:new Map,first:null},i=(e&vt)!==0;if(i){var s=t;l=ue?He(Pt(s)):s.appendChild(Mt())}ue&&St();var f=null,m=!1;At(()=>{var v=r(),_=Rt(v)?v:v==null?[]:it(v),c=_.length;if(m&&c===0)return;m=c===0;let R=!1;if(ue){var g=l.data===Nt;g!==(c===0)&&(l=Ze(),He(l),qe(!1),R=!0)}if(ue){for(var M=null,O,P=0;P<c;P++){if(Ae.nodeType===8&&Ae.data===wt){l=Ae,R=!0,qe(!1);break}var b=_[P],$=n(b,P);O=ht(Ae,u,M,null,b,$,P,o,e),u.items.set($,O),M=O}c>0&&He(Ze())}if(!ue){var A=Ct;Jt(_,u,l,o,e,(A.f&De)!==0,n)}d!==null&&(c===0?f?ct(f):f=ut(()=>d(l)):f!==null&&Tt(f,()=>{f=null})),R&&qe(!0),r()}),ue&&(l=Ae)}function Jt(t,e,r,n,o,d,l){var z,X,re,ae;var u=(o&Ut)!==0,i=(o&(Qe|We))!==0,s=t.length,f=e.items,m=e.first,v=m,_,c=null,R,g=[],M=[],O,P,b,$;if(u)for($=0;$<s;$+=1)O=t[$],P=l(O,$),b=f.get(P),b!==void 0&&((z=b.a)==null||z.measure(),(R??(R=new Set)).add(b));for($=0;$<s;$+=1){if(O=t[$],P=l(O,$),b=f.get(P),b===void 0){var A=v?v.e.nodes_start:r;c=ht(A,e,c,c===null?e.first:c.next,O,P,$,n,o),f.set(P,c),g=[],M=[],v=c.next;continue}if(i&&Vt(b,O,$,o),b.e.f&De&&(ct(b.e),u&&((X=b.a)==null||X.unfix(),(R??(R=new Set)).delete(b))),b!==v){if(_!==void 0&&_.has(b)){if(g.length<M.length){var q=M[0],k;c=q.prev;var Y=g[0],H=g[g.length-1];for(k=0;k<g.length;k+=1)ot(g[k],q,r);for(k=0;k<M.length;k+=1)_.delete(M[k]);le(e,Y.prev,H.next),le(e,c,Y),le(e,H,q),v=q,c=H,$-=1,g=[],M=[]}else _.delete(b),ot(b,v,r),le(e,b.prev,b.next),le(e,b,c===null?e.first:c.next),le(e,c,b),c=b;continue}for(g=[],M=[];v!==null&&v.k!==P;)(d||!(v.e.f&De))&&(_??(_=new Set)).add(v),M.push(v),v=v.next;if(v===null)continue;b=v}g.push(b),c=b,v=b.next}if(v!==null||_!==void 0){for(var w=_===void 0?[]:it(_);v!==null;)(d||!(v.e.f&De))&&w.push(v),v=v.next;var C=w.length;if(C>0){var B=o&vt&&s===0?r:null;if(u){for($=0;$<C;$+=1)(re=w[$].a)==null||re.measure();for($=0;$<C;$+=1)(ae=w[$].a)==null||ae.fix()}Kt(e,w,B,f)}}u&&Lt(()=>{var ce;if(R!==void 0)for(b of R)(ce=b.a)==null||ce.apply()}),et.first=e.first&&e.first.e,et.last=c&&c.e}function Vt(t,e,r,n){n&Qe&&tt(t.v,e),n&We?tt(t.i,r):t.i=r}function ht(t,e,r,n,o,d,l,u,i){var s=(i&Qe)!==0,f=(i&Ft)===0,m=s?f?xt(o):rt(o):o,v=i&We?rt(l):l,_={i:v,v:m,k:d,a:null,e:null,prev:r,next:n};try{return _.e=ut(()=>u(t,m,v),ue),_.e.prev=r&&r.e,_.e.next=n&&n.e,r===null?e.first=_:(r.next=_,r.e.next=_.e),n!==null&&(n.prev=_,n.e.prev=_.e),_}finally{}}function ot(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,d=t.e.nodes_start;d!==n;){var l=Ht(d);o.before(d),d=l}}function le(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const jt=[h.JANUARY,h.FEBRUARY,h.MARCH,h.APRIL,h.MAY,h.JUNE,h.JULY,h.AUGUST,h.SEPTEMBER,h.OCTOBER,h.NOVEMBER,h.DECEMBER],Re=[h.SHORT_SUNDAY,h.SHORT_MONDAY,h.SHORT_TUESDAY,h.SHORT_WEDNESDAY,h.SHORT_THURSDAY,h.SHORT_FRIDAY,h.SHORT_SATURDAY],xe=new Date(2024,0,1);function gt(t,e){return new Date(e,t+1,0).getDate()}function yt(t,e){return new Date(e,t,1).getDay()}function $t(t,e){return(t-e+Re.length)%Re.length}function Xt(t,e,r=0){const n=$t(yt(t,e),r),o=gt(t,e);return Math.ceil((n+o)/7)}function Zt(t,e,r,n,o=0){return r+n*Re.length-$t(yt(t,e),o)+1}function er(t,e){return Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24))}function Ue(t,e){return(er(t,e)%365+365)%365}var D=(t=>(t.EQUIPMENT="EQUIPMENT",t.GEMS="GEMS",t.KAMAS="KAMAS",t.WAKFU="WAKFU",t.RUNES="RUNES",t.CHEST="CHEST",t))(D||{});function tr(){const t=mt({}),{subscribe:e,set:r}=t;return localStorage.storable&&r(JSON.parse(localStorage.storable)),{subscribe:e,set:n=>{localStorage.storable=JSON.stringify(n),r(n)},update:n=>{const o=n(ye(t));localStorage.storable=JSON.stringify(o),r(o)}}}const fe=tr();var rr=N('<span class="text svelte-17j3cvn"> </span>'),ar=N('<section class="tooltip svelte-17j3cvn"><!> <!></section>');function nr(t,e){let r=x(e,"title",8,void 0);var n=ar(),o=y(n);Ke(o,e,"default",{});var d=T(o,2);{var l=u=>{var i=rr(),s=y(i,!0);E(i),U(()=>Q(s,r())),p(u,i)};V(d,u=>{r()&&u(l)})}E(n),p(t,n)}var or=N("<button><div> </div></button>");function sr(t,e){he(e,!1);const r=be(),n=()=>j(pe,"$_",r);let o=x(e,"currentDate",8),d=x(e,"dayOfMonth",8),l=x(e,"reward",8,void 0),u=x(e,"onclick",8);const i=new Date;let s=K("");const f=fe.subscribe(c=>{I(s,m(l(),c.filters))});function m(c,R){if(c){if(c.type===D.EQUIPMENT){if(!R||R[c.rarety])return c.rarety.toLowerCase()}else if(!R||R[c.type])return c.type.toLowerCase()}}function v(){if(l()){let c=`${l().amount}× ${n()(l().type)}`;switch(l().type){case D.RUNES:case D.CHEST:c+=` ${n()(l().equipment)}`;break;case D.EQUIPMENT:c=`${l().amount}× ${n()(l().item)} ${n()(l().rarety)}`;break}return c}}_t(()=>{f()}),qt(()=>(Bt(l()),fe),()=>{I(s,m(l(),ye(fe).filters))}),Yt(),me();var _=L(v);nr(t,{get title(){return a(_)},children:(c,R)=>{var g=or();g.__click=function(...b){var $;($=u())==null||$.apply(this,b)};const M=L(()=>o().toDateString()===i.toDateString());var O=y(g),P=y(O,!0);E(O),E(g),U(()=>{Je(g,`${a(s)??""} svelte-14v7im1`),g.disabled=o()>i,Ve(g,"today",a(M)),Q(P,d())}),p(c,g)},$$slots:{default:!0}}),ge()}$e(["click"]);var lr=N('<th class="svelte-t5kud4"> </th>'),ir=N("<td><!></td>"),cr=N("<tr></tr>"),ur=N('<table class="svelte-t5kud4"><thead><tr></tr></thead><tbody></tbody></table>');function vr(t,e){he(e,!1);const r=be(),n=()=>j(dt,"$momentStore",r);let o=x(e,"year",8),d=x(e,"month",8),l=x(e,"onselectday",8),u=x(e,"calendar",8);const i=Re.length;function s(c){let R=Ue(c,xe);return u()[R]}me();var f=ur(),m=y(f),v=y(m);Ee(v,5,()=>({length:i}),_e,(c,R,g)=>{var M=lr(),O=y(M,!0);U(()=>Q(O,n()().weekday(g%i).format("dd"))),E(M),p(c,M)}),E(v),E(m);var _=T(m);Ee(_,5,()=>({length:Xt(d(),o())}),_e,(c,R,g)=>{var M=cr();const O=L(()=>gt(d(),o()));Ee(M,5,()=>Re,_e,(b,$,A)=>{var q=ir();const k=L(()=>Zt(d(),o(),A,g));var Y=y(q);{var H=w=>{const C=L(()=>new Date(o(),d(),a(k))),B=L(()=>s(a(C)));var z=zt(()=>({currentDate:a(C),dayOfMonth:a(k),reward:a(B),onclick:()=>l()(a(C))}));sr(w,Le(()=>a(z)))};V(Y,w=>{a(k)>0&&a(k)<=a(O)&&w(H)})}E(q),p(b,q)}),E(M),p(c,M)}),E(_),E(f),p(t,f),ge()}var Ye=(t=>(t.COMPANIONS="COMPANIONS",t.SPELLS="SPELLS",t.EQUIPMENTS="EQUIPMENTS",t))(Ye||{}),Be=(t=>(t.RING="RING",t.ARMBAND="ARMBAND",t.COMPANION="COMPANION",t))(Be||{}),Fe=(t=>(t.COMMON="COMMON",t.RARE="RARE",t.KROSMIC="KROSMIC",t.INFINITE="INFINITE",t))(Fe||{});function fr(t,e){he(e,!1);const r=be(),n=()=>j(pe,"$_",r);let o=x(e,"key",8);me(),Ce();var d=we();U(()=>Q(d,n()(o()))),p(t,d),ge()}var dr=N('<span class="required svelte-u5ui8r">*</span>'),_r=N("<span> <!></span>"),Er=N('<section class="svelte-u5ui8r"><!> <!></section>');function ze(t,e){let r=x(e,"title",8,void 0),n=x(e,"required",8,!1);var o=Er(),d=y(o);{var l=i=>{var s=_r(),f=y(s),m=T(f);{var v=_=>{var c=dr();p(_,c)};V(m,_=>{n()&&_(v)})}E(s),U(()=>Q(f,`${r()??""}: `)),p(i,s)};V(d,i=>{r()&&i(l)})}var u=T(d,2);Ke(u,e,"default",{}),E(o),p(t,o)}var br=(t,e,r)=>e(a(r)),mr=N("<button><!></button>"),hr=N('<section class="svelte-aefnkp"></section>');function ke(t,e){let r=x(e,"title",8,void 0),n=x(e,"values",24,()=>[]),o=x(e,"value",12),d=x(e,"required",8,!1);ze(t,Le(()=>({title:r(),required:d()}),{children:(l,u)=>{var i=hr();Ee(i,5,n,_e,(s,f)=>{var m=mr();const v=L(()=>`${a(f).toLowerCase()??""} svelte-aefnkp`);m.__click=[br,o,f];var _=y(m);fr(_,{get key(){return a(f)}}),E(m),U(()=>{Je(m,a(v)),Ve(m,"active",o()===a(f))}),p(s,m)}),E(i),p(l,i)},$$slots:{default:!0}}))}$e(["click"]);function gr(t){return Object.values(t).filter(e=>typeof e!="number")}var yr=N("<!> <!>",1),$r=N('<input type="number" min="100" max="250" step="50">'),pr=N('<input type="number" min="1" max="5000">'),Mr=N('<input type="text">'),Sr=(t,e)=>e()(),Ar=(t,e,r)=>{confirm(e()(h.REWARD_DELETE_CONFIRM))&&r()()},Rr=N('<button class="delete material-icon svelte-tu6hhq">delete</button>'),Nr=N('<section class="svelte-tu6hhq"><!> <!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Tr(t,e){var ce,Me,Te,Se,Oe,ne,oe;he(e,!1);const r=be(),n=()=>j(pe,"$_",r);let o=x(e,"oncancel",8),d=x(e,"onsave",8),l=x(e,"ondelete",8,void 0),u=x(e,"reward",8,void 0),i=x(e,"date",8),s=K(((ce=u())==null?void 0:ce.type)??D.EQUIPMENT),f=K(((Me=u())==null?void 0:Me.type)===D.EQUIPMENT?u().rarety:Fe.COMMON),m=K(((Te=u())==null?void 0:Te.type)===D.RUNES||((Se=u())==null?void 0:Se.type)===D.CHEST?u().equipment:Ye.EQUIPMENTS),v=K(((Oe=u())==null?void 0:Oe.type)===D.EQUIPMENT?u().item:Be.RING),_=K(((ne=u())==null?void 0:ne.amount)??1),c=K(((oe=u())==null?void 0:oe.type)===D.EQUIPMENT?u().description:void 0);function R(){let S;const F={cycle_index:Ue(i(),xe),amount:a(_)};switch(a(s)){case D.GEMS:S={...F,type:a(s),amount:a(_)};break;case D.EQUIPMENT:S={...F,type:a(s),rarety:a(f),item:a(v),description:a(c)};break;case D.CHEST:S={...F,type:a(s),equipment:a(m)};break;case D.RUNES:S={...F,type:a(s),equipment:a(m)};break;case D.KAMAS:case D.WAKFU:S={...F,type:a(s)};break}d()(S)}me();var g=Nr(),M=y(g),O=L(()=>n()(h.REWARD_LABEL_TYPE)),P=L(()=>gr(D));ke(M,{get title(){return a(O)},get values(){return a(P)},get value(){return a(s)},set value(S){I(s,S)},required:!0,$$legacy:!0});var b=T(M,2);{var $=S=>{var F=yr(),Z=de(F),ee=L(()=>n()(h.REWARD_LABEL_RARITY)),W=L(()=>Object.keys(Fe));ke(Z,{get title(){return a(ee)},get values(){return a(W)},get value(){return a(f)},set value(te){I(f,te)},required:!0,$$legacy:!0});var se=T(Z,2),G=L(()=>n()(h.REWARD_LABEL_ITEM_TYPE)),J=L(()=>Object.keys(Be));ke(se,{get title(){return a(G)},get values(){return a(J)},get value(){return a(v)},set value(te){I(v,te)},required:!0,$$legacy:!0}),p(S,F)},A=S=>{var F=Xe(),Z=de(F);{var ee=W=>{var se=L(()=>n()(h.REWARD_LABEL_EQUIPMENT_TYPE)),G=L(()=>Object.keys(Ye));ke(W,{get title(){return a(se)},get values(){return a(G)},get value(){return a(m)},set value(J){I(m,J)},required:!0,$$legacy:!0})};V(Z,W=>{(a(s)===D.CHEST||a(s)===D.RUNES)&&W(ee)},!0)}p(S,F)};V(b,S=>{a(s)===D.EQUIPMENT?S($):S(A,!1)})}var q=T(b,2),k=L(()=>n()(h.REWARD_LABEL_AMOUNT));ze(q,{get title(){return a(k)},required:!0,children:(S,F)=>{var Z=Xe(),ee=de(Z);{var W=G=>{var J=$r();Ie(J),Pe(J,()=>a(_),te=>I(_,te)),p(G,J)},se=G=>{var J=pr();Ie(J),Pe(J,()=>a(_),te=>I(_,te)),p(G,J)};V(ee,G=>{a(s)===D.GEMS?G(W):G(se,!1)})}p(S,Z)},$$slots:{default:!0}});var Y=T(q,2);{var H=S=>{var F=L(()=>n()(h.REWARD_LABEL_EQUIPMENT_MORE));ze(S,{get title(){return a(F)},children:(Z,ee)=>{var W=Mr();Ie(W),U(()=>Et(W,"placeholder",n()(h.EQUIPMENT_MORE_PLACEHOLDER))),Pe(W,()=>a(c),se=>I(c,se)),p(Z,W)},$$slots:{default:!0}})};V(Y,S=>{a(s)===D.EQUIPMENT&&S(H)})}var w=T(Y,2),C=y(w);C.__click=[Sr,o];var B=y(C,!0);U(()=>Q(B,n()(h.CANCEL))),E(C);var z=T(C,2);z.__click=R;var X=y(z,!0);U(()=>Q(X,n()(h.SAVE))),E(z);var re=T(z,2);{var ae=S=>{var F=Rr();F.__click=[Ar,n,l],p(S,F)};V(re,S=>{l()&&S(ae)})}E(w),E(g),p(t,g),ge()}$e(["click"]);var Or=N('<section class="material-icon"><!></section>');function st(t,e){var r=Or(),n=y(r);Ke(n,e,"default",{}),E(r),p(t,r)}const Ne="T_Reward";async function kr(t,e){const r=await ie.from(Ne).upsert({...e,profile_name:t},{onConflict:"user_id, profile_name, cycle_index"}).select();if(r.error)throw r.error;return r.data[0]}async function Dr(t,e){let r;if(t?r=await ie.from(Ne).delete().match({profile_name:t,cycle_index:e}).select():r=await ie.from(Ne).delete().match({cycle_index:e}).is("profile_name",null).select(),r.error)throw r.error;return r.data[0]}async function lt(t=null){let e;if(t?e=await ie.from(Ne).select().eq("profile_name",t):e=await ie.from(Ne).select().is("profile_name",null),e.error)throw e.error;const r=e.data,n=[];for(const o of r){const d=o;n[d.cycle_index]=d}return n}const ve=mt(void 0),je="T_Profile";async function Ir(){const t=await ie.from(je).select();if(t.error)throw t.error;return t.data.map(e=>e.name)}async function Pr(t){const e=await ie.from(je).insert({name:t}).select();if(e.error)throw e.error;return e.data}async function wr(t){const e=await ie.from(je).delete().match({name:t}).select();if(e.error)throw e.error;return e.data[0]}function Cr(t,e,r){a(e)!==""&&(Pr(a(e)),I(r,[...a(r),a(e)]),I(e,""))}var Lr=(t,e)=>e(void 0),xr=(t,e,r)=>e(a(r)),Ur=(t,e,r,n)=>{confirm(e()(h.PROFILE_DELETE_CONFIRM))&&r(a(n))},Fr=N('<div class="svelte-2icnig"><button class="svelte-2icnig"> </button> <button class="material-icon delete-profile svelte-2icnig">delete</button></div>'),Hr=N('<div> </div> <div class="profiles svelte-2icnig"><div class="svelte-2icnig"><button class="svelte-2icnig"> </button></div> <!></div> <div><b> <span class="required svelte-2icnig">*</span> :</b></div> <input type="text"> <button class="svelte-2icnig"> </button>',1);function qr(t,e){he(e,!1);const r=be(),n=()=>j(ve,"$currentProfile",r),o=()=>j(pe,"$_",r);let d=x(e,"onclose",8,void 0),l=K(""),u=K([]);function i(m){wr(m),I(u,a(u).filter(v=>v!==m))}function s(m){ve.set(m),d()&&d()()}Ge(async()=>{I(u,await Ir())}),me();var f=L(()=>n()??o()(h.PROFILE_DEFAULT));bt(t,{get title(){return a(f)},get onclose(){return d()},children:(m,v)=>{var _=Hr(),c=de(_),R=y(c,!0);U(()=>Q(R,o()(h.PROFILE_INFO))),E(c);var g=T(c,2),M=y(g),O=y(M);O.__click=[Lr,s];var P=y(O,!0);U(()=>Q(P,o()(h.PROFILE_DEFAULT))),E(O),E(M);var b=T(M,2);Ee(b,1,()=>a(u),_e,(w,C)=>{var B=Fr(),z=y(B);z.__click=[xr,s,C];var X=y(z,!0);E(z);var re=T(z,2);re.__click=[Ur,o,i,C],E(B),U(()=>Q(X,a(C))),p(w,B)}),E(g);var $=T(g,2),A=y($),q=y(A,!0);U(()=>Q(q,o()(h.PROFILE_CREATE_LABEL))),Ce(2),E(A),E($);var k=T($,2);Ie(k),U(()=>Et(k,"placeholder",o()(h.PROFILE_CREATE_PLACEHOLDER)));var Y=T(k,2);Y.__click=[Cr,l,u];var H=y(Y,!0);U(()=>Q(H,o()(h.PROFILE_CREATE))),E(Y),Pe(k,()=>a(l),w=>I(l,w)),p(m,_)},$$slots:{default:!0}}),ge()}$e(["click"]);var Yr=(t,e,r)=>e(a(r)),Br=N('<div class="filter svelte-1uygbo0"><button><!></button> </div>'),zr=N('<section class="svelte-1uygbo0"></section>');function Qr(t,e){he(e,!1);const r=be(),n=()=>j(fe,"$localStorageStore",r),o=()=>j(pe,"$_",r);function d(u){fe.update(i=>{const s=i.filters;return s&&(s[u]=!s[u]),{...i,filters:s}})}Ge(()=>{if(!ye(fe).filters){let i={};for(const s in Fe)i[s]=!0;for(const s in D)s!==D.EQUIPMENT&&(i[s]=!0);fe.update(s=>({...s,filters:i}))}}),me();var l=zr();Ee(l,5,()=>Object.keys(n().filters||{}),_e,(u,i)=>{var s=Br(),f=y(s);f.__click=[Yr,d,i];const m=L(()=>`${`material-icon ${a(i).toLowerCase()}`??""} svelte-1uygbo0`);var v=y(f);{var _=R=>{var g=we("check");p(R,g)};V(v,R=>{n().filters[a(i)]&&R(_)})}E(f);var c=T(f);U(()=>Q(c,` ${o()(a(i))??""}`)),E(s),U(()=>{Je(f,a(m)),Ve(f,"checked",n().filters[a(i)])}),p(u,s)}),E(l),p(t,l),ge()}$e(["click"]);var Wr=N("<div> </div> <!>",1),Gr=(t,e)=>I(e,!0),Kr=(t,e,r)=>{I(e,!0),ft(r,-1)},Jr=(t,e,r)=>{I(e,!1),ft(r)},Vr=N('<div class="months svelte-18bzzu6"></div>'),jr=N('<div class="year svelte-18bzzu6"><!></div>'),Xr=N('<header class="svelte-18bzzu6"><button class="profile svelte-18bzzu6"> </button> <div class="year-controls svelte-18bzzu6"><button class="svelte-18bzzu6"><!></button> <h2 class="svelte-18bzzu6"> </h2> <button class="svelte-18bzzu6"><!></button></div> <div><!></div></header> <div class="calendar svelte-18bzzu6"><!></div>',1),Zr=N("<!> <!> <!>",1);function ua(t,e){he(e,!1);const r=be(),n=()=>j(dt,"$momentStore",r),o=()=>j(pe,"$_",r),d=()=>j(ve,"$currentProfile",r);let l=K([]),u=K(new Date().getFullYear()),i=K(),s=K(!1),f=K(!0);function m(A){I(i,A)}function v(A){if(!a(i))throw new Error("No selected day");at(l,a(l)[Ue(a(i),xe)]=A),I(i,void 0),kr(ye(ve),A)}function _(){if(!a(i))throw new Error("No selected day");return Ue(a(i),xe)}function c(){if(!a(i))throw new Error("No selected day");const A=_();Dr(ye(ve),A),at(l,a(l)[A]=void 0),I(i,void 0)}const R=ve.subscribe(async A=>{I(l,await lt(A))});Ge(async()=>{I(l,await lt(ye(ve))),console.log(await Qt())}),_t(()=>{R()}),me();var g=Zr(),M=de(g);{var O=A=>{var q=L(()=>n()(a(i)).format("dddd D MMMM yyyy"));bt(A,{get title(){return a(q)},onclose:()=>{I(i,void 0)},children:(k,Y)=>{var H=Wr(),w=de(H),C=y(w,!0);U(()=>Q(C,o()(h.REWARDS_FORM_INFO))),E(w);var B=T(w,2);Tr(B,Le({get reward(){return a(l)[_()]},oncancel:()=>{I(i,void 0)}},()=>({onsave:v,date:a(i),ondelete:c}))),p(k,H)},$$slots:{default:!0}})};V(M,A=>{a(i)&&A(O)})}var P=T(M,2);{var b=A=>{qr(A,{onclose:()=>I(s,!1)})};V(P,A=>{a(s)&&A(b)})}var $=T(P,2);nt($,{children:(A,q)=>{var k=Xr(),Y=de(k),H=y(Y);H.__click=[Gr,s];var w=y(H,!0);U(()=>Q(w,d()?`${o()(h.PROFILE)} : ${d()}`:o()(h.PROFILE_DEFAULT))),E(H);var C=T(H,2),B=y(C);B.__click=[Kr,f,u];var z=y(B);st(z,{children:(ne,oe)=>{Ce();var S=we("arrow_back_ios");p(ne,S)},$$slots:{default:!0}}),E(B);var X=T(B,2),re=y(X,!0);E(X);var ae=T(X,2);ae.__click=[Jr,f,u];var ce=y(ae);st(ce,{children:(ne,oe)=>{Ce();var S=we("arrow_forward_ios");p(ne,S)},$$slots:{default:!0}}),E(ae),E(C);var Me=T(C,2),Te=y(Me);Qr(Te,{}),E(Me),E(Y);var Se=T(Y,2),Oe=y(Se);Wt(Oe,()=>a(u),ne=>{var oe=jr(),S=y(oe);nt(S,{get leftToRight(){return a(f)},children:(F,Z)=>{var ee=Vr();Ee(ee,5,()=>jt,_e,(W,se,G)=>{var J=L(()=>n()(new Date(0,G)).format("MMMM")),te=L(()=>G===new Date().getMonth()&&a(u)===new Date().getFullYear());Gt(W,{get title(){return a(J)},get outline(){return a(te)},children:(pt,ea)=>{vr(pt,Le(()=>({month:G,year:a(u),onselectday:m,calendar:a(l)})))},$$slots:{default:!0}})}),E(ee),p(F,ee)},$$slots:{default:!0}}),E(oe),p(ne,oe)}),E(Se),U(()=>Q(re,a(u))),p(A,k)},$$slots:{default:!0}}),p(t,g),ge()}$e(["click"]);export{ua as component};
