import{l as nt,s as Oe,g as pe,b as te,a as N,c as $e,e as ke,t as m,i as Ce}from"../chunks/disclose-version.YqBX7MJI.js";import{i as ce}from"../chunks/legacy.BpL08Wjz.js";import{G as Q,H as Ge,aw as st,ax as lt,a as ot,F as qe,P as Je,O as xe,U as it,Q as se,L as Ne,ai as ut,aj as vt,E as ct,au as Ve,J as ft,K as Le,M as Me,aq as _t,ay as ge,N as ze,B as He,az as dt,aA as Et,at as ht,aB as gt,aC as yt,ag as Nt,a4 as Mt,x as Ye,aD as bt,aE as At,aF as pt,ao as St,a8 as je,p as fe,aG as Se,t as K,d as _e,e as S,g as y,h as L,j as n,$ as I,aH as mt,a7 as W,z as P,f as oe,aI as Xe,aJ as Rt}from"../chunks/utils.BBj7zY7F.js";import{b as Tt,p as O,i as ee,s as It}from"../chunks/preload-helper.C4-QGtM_.js";import{t as E,h as Pe,d as Ue,r as be,b as Ae,i as Dt,f as Be,j as Qe,M as Ot,C as $t}from"../chunks/Modal.CQ7T8Op_.js";function kt(e,t,a){Q&&Ge();var r=e,s=it,o,l=st()?lt:ot;qe(()=>{l(s,s=t())&&(o&&Je(o),o=xe(()=>a(r)))}),Q&&(r=se)}function ie(e,t){return t}function xt(e,t,a,r){for(var s=[],o=t.length,l=0;l<o;l++)Et(t[l].e,s,!0);var v=o>0&&s.length===0&&a!==null;if(v){var h=a.parentNode;ht(h),h.append(a),r.clear(),z(e,t[0].prev,t[o-1].next)}gt(s,()=>{for(var d=0;d<o;d++){var i=t[d];v||(r.delete(i.k),z(e,i.prev,i.next)),yt(i.e,!v)}})}function ue(e,t,a,r,s,o=null){var l=e,v={flags:t,items:new Map,first:null};{var h=e;l=Q?Ne(ut(h)):h.appendChild(vt())}Q&&Ge();var d=null,i=!1;qe(()=>{var f=a(),c=ct(f)?f:f==null?[]:Ve(f),u=c.length;if(i&&u===0)return;i=u===0;let g=!1;if(Q){var R=l.data===ft;R!==(u===0)&&(l=Le(),Ne(l),Me(!1),g=!0)}if(Q){for(var M=null,_,b=0;b<u;b++){if(se.nodeType===8&&se.data===_t){l=se,g=!0,Me(!1);break}var H=c[b],$=r(H,b);_=Ze(se,v,M,null,H,$,b,s,t),v.items.set($,_),M=_}u>0&&Ne(Le())}if(!Q){var T=Nt;Pt(c,v,l,s,t,(T.f&ge)!==0,r)}o!==null&&(u===0?d?ze(d):d=xe(()=>o(l)):d!==null&&Je(d,()=>{d=null})),g&&Me(!0),a()}),Q&&(l=se)}function Pt(e,t,a,r,s,o,l){var v=e.length,h=t.items,d=t.first,i=d,f,c=null,u=[],g=[],R,M,_,b;for(b=0;b<v;b+=1){if(R=e[b],M=l(R,b),_=h.get(M),_===void 0){var H=i?i.e.nodes_start:a;c=Ze(H,t,c,c===null?t.first:c.next,R,M,b,r,s),h.set(M,c),u=[],g=[],i=c.next;continue}if(Ut(_,R,b),_.e.f&ge&&ze(_.e),_!==i){if(f!==void 0&&f.has(_)){if(u.length<g.length){var $=g[0],T;c=$.prev;var q=u[0],k=u[u.length-1];for(T=0;T<u.length;T+=1)Fe(u[T],$,a);for(T=0;T<g.length;T+=1)f.delete(g[T]);z(t,q.prev,k.next),z(t,c,q),z(t,k,$),i=$,c=k,b-=1,u=[],g=[]}else f.delete(_),Fe(_,i,a),z(t,_.prev,_.next),z(t,_,c===null?t.first:c.next),z(t,c,_),c=_;continue}for(u=[],g=[];i!==null&&i.k!==M;)(o||!(i.e.f&ge))&&(f??(f=new Set)).add(i),g.push(i),i=i.next;if(i===null)continue;_=i}u.push(_),c=_,i=_.next}if(i!==null||f!==void 0){for(var U=f===void 0?[]:Ve(f);i!==null;)(o||!(i.e.f&ge))&&U.push(i),i=i.next;var w=U.length;if(w>0){var D=v===0?a:null;xt(t,U,D,h)}}He.first=t.first&&t.first.e,He.last=c&&c.e}function Ut(e,t,a,r){dt(e.v,t),e.i=a}function Ze(e,t,a,r,s,o,l,v,h){var d=(h&At)!==0,i=(h&pt)===0,f=d?i?Mt(s):Ye(s):s,c=h&bt?Ye(l):l,u={i:c,v:f,k:o,a:null,e:null,prev:a,next:r};try{return u.e=xe(()=>v(e,f,c),Q),u.e.prev=a&&a.e,u.e.next=r&&r.e,a===null?t.first=u:(a.next=u,a.e.next=u.e),r!==null&&(r.prev=u,r.e.prev=u.e),u}finally{}}function Fe(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,s=t?t.e.nodes_start:a,o=e.e.nodes_start;o!==r;){var l=St(o);s.before(o),o=l}}function z(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function wt(e,t){var a=e.__className,r=Ct(t);Q&&e.className===r?e.__className=r:(a!==r||Q&&e.className!==r)&&(t==null?e.removeAttribute("class"):e.className=r,e.__className=r)}function Ct(e){return e??""}function Lt(e,t,a){if(a){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function et(e,t,a){if(e.multiple)return Bt(e,t);for(var r of e.options){var s=ve(r);if(Tt(s,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Ht(e,t){je(()=>{var a=new MutationObserver(()=>{var r=e.__value;et(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Yt(e,t,a=t){var r=!0;nt(e,"change",s=>{var o=s?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),ve);else{var v=e.querySelector(o)??e.querySelector("option:not([disabled])");l=v&&ve(v)}a(l)}),je(()=>{var s=t();if(et(e,s,r),r&&s===void 0){var o=e.querySelector(":checked");o!==null&&(s=ve(o),a(s))}e.__value=s,r=!1}),Ht(e)}function Bt(e,t){for(var a of e.options)a.selected=~t.indexOf(ve(a))}function ve(e){return"__value"in e?e.__value:e.value}var p=(e=>(e.GEMS="GEMS",e.KAMAS="KAMAS",e.EQUIPMENT="EQUIPMENT",e.CHEST="CHEST",e.WAKFU="WAKFU",e.RUNES="RUNES",e))(p||{});const Qt=[E.JANUARY,E.FEBRUARY,E.MARCH,E.APRIL,E.MAY,E.JUNE,E.JULY,E.AUGUST,E.SEPTEMBER,E.OCTOBER,E.NOVEMBER,E.DECEMBER],le=[E.SHORT_SUNDAY,E.SHORT_MONDAY,E.SHORT_TUESDAY,E.SHORT_WEDNESDAY,E.SHORT_THURSDAY,E.SHORT_FRIDAY,E.SHORT_SATURDAY];function tt(e,t){return new Date(t,e+1,0).getDate()}function at(e,t){return new Date(t,e,1).getDay()}function rt(e,t){return(e-t+le.length)%le.length}function Ft(e,t,a=0){const r=rt(at(e,t),a),s=tt(e,t);return Math.ceil((r+s)/7)}function Wt(e,t,a,r,s=0){return a+r*le.length-rt(at(e,t),s)+1}function Kt(e,t){return Math.floor((e.getTime()-t.getTime())/(1e3*60*60*24))}function me(e,t){return(Kt(e,t)%365+365)%365}function Gt(e,t){fe(t,!1);const a=Oe(),r=()=>$e(Pe,"$_",a);let s=O(t,"key",8);ce(),Se();var o=pe();K(()=>te(o,r()(s()))),N(e,o),_e()}var qt=m("<th><!></th>"),Jt=(e,t,a)=>t()(n(a)),Vt=m("<button> </button>"),zt=m("<td><!></td>"),jt=m("<tr></tr>"),Xt=m("<table><thead><tr></tr></thead><tbody></tbody></table>");function Zt(e,t){fe(t,!1);let a=O(t,"year",8),r=O(t,"month",8),s=O(t,"onselectday",8),o=O(t,"calendar",8),l=O(t,"weekOffset",8,1);const v=le.length,h=new Date;function d(g){let R=me(g,o().startDate);if(o().rewards[R]){const M=o().rewards[R];return M.type===p.EQUIPMENT?M.rarety.toLowerCase():M.type.toLowerCase()}}ce();var i=Xt(),f=S(i),c=S(f);ue(c,5,()=>({length:v}),ie,(g,R,M)=>{var _=qt(),b=S(_);Gt(b,{get key(){return le[(M+l())%v]}}),y(_),N(g,_)}),y(c),y(f);var u=L(f);ue(u,5,()=>({length:Ft(r(),a(),l())}),ie,(g,R,M)=>{var _=jt();const b=I(()=>tt(r(),a()));ue(_,5,()=>le,ie,($,T,q)=>{var k=zt();const U=I(()=>Wt(r(),a(),q,M,l()));var w=S(k);{var D=Y=>{var x=Vt();const j=I(()=>new Date(a(),r(),n(U))),J=I(()=>`${d(n(j))??""} svelte-mqzbt`);x.__click=[Jt,s,j];const ae=I(()=>n(j).toDateString()===h.toDateString());var re=S(x,!0);y(x),K(()=>{wt(x,n(J)),x.disabled=n(j)>h,Lt(x,"today",n(ae)),te(re,n(U))}),N(Y,x)};ee(w,Y=>{n(U)>0&&n(U)<=n(b)&&Y(D)})}y(k),N($,k)}),y(_),N(g,_)}),y(u),y(i),N(e,i),_e()}ke(["click"]);var Re=(e=>(e.COMPANIONS="COMPANIONS",e.SPELLS="SPELLS",e.EQUIPMENTS="EQUIPMENTS",e))(Re||{}),Te=(e=>(e.RING="RING",e.ARMBAND="ARMBAND",e.COMPANION="COMPANION",e))(Te||{}),Ie=(e=>(e.COMMON="COMMON",e.RARE="RARE",e.KROSMIC="KROSMIC",e.INFINITE="INFINITE",e))(Ie||{}),ea=m("<span> </span>"),ta=m('<section class="svelte-1j4lmfo"><!> <!></section>');function De(e,t){let a=O(t,"title",8,void 0);var r=ta(),s=S(r);{var o=v=>{var h=ea(),d=S(h);y(h),K(()=>te(d,`${a()??""}:`)),N(v,h)};ee(s,v=>{a()&&v(o)})}var l=L(s,2);Ue(l,t,"default",{}),y(r),N(e,r)}var aa=m("<option> </option>"),ra=m("<select></select>");function he(e,t){fe(t,!1);const a=Oe(),r=()=>$e(Pe,"$_",a);let s=O(t,"title",8,void 0),o=O(t,"values",24,()=>[]),l=O(t,"value",12);ce(),De(e,{get title(){return s()},children:(v,h)=>{var d=ra();K(()=>{l(),mt(()=>{o(),r()})}),ue(d,5,o,ie,(i,f)=>{var c=aa(),u={},g=S(c,!0);K(()=>te(g,r()(n(f)))),y(c),K(()=>{u!==(u=n(f))&&(c.value=(c.__value=n(f))==null?"":n(f))}),N(i,c)}),y(d),Yt(d,l),N(v,d)},$$slots:{default:!0}}),_e()}function na(e){return Object.values(e).filter(t=>typeof t!="number")}var sa=m("<!> <!>",1),la=m('<input type="number" min="100" max="250" step="50">'),oa=m('<input type="number" min="1" max="5000">'),ia=m('<input type="text">'),ua=(e,t)=>t()(),va=m('<section class="svelte-1hgxb16"><!> <!> <!> <!> <div class="controls svelte-1hgxb16"><button class="secondary svelte-1hgxb16"> </button> <button class="primary svelte-1hgxb16"> </button></div></section>');function ca(e,t){var J,ae,re,de,Ee,ye,we;fe(t,!1);const a=Oe(),r=()=>$e(Pe,"$_",a);let s=O(t,"oncancel",8),o=O(t,"onsave",8),l=O(t,"reward",8,void 0),v=W(((J=l())==null?void 0:J.type)??p.EQUIPMENT),h=W(((ae=l())==null?void 0:ae.type)===p.EQUIPMENT?l().rarety:Ie.COMMON),d=W(((re=l())==null?void 0:re.type)===p.RUNES||((de=l())==null?void 0:de.type)===p.CHEST?l().kind:Re.EQUIPMENTS),i=W(((Ee=l())==null?void 0:Ee.type)===p.EQUIPMENT?l().kind:Te.RING),f=W(((ye=l())==null?void 0:ye.amount)??1),c=W(((we=l())==null?void 0:we.type)===p.EQUIPMENT?l().description:void 0);function u(){let A;switch(n(v)){case p.GEMS:A={type:n(v),amount:n(f)};break;case p.EQUIPMENT:A={type:n(v),rarety:n(h),kind:n(i),amount:n(f),description:n(c)};break;case p.CHEST:A={type:n(v),kind:n(d),amount:n(f)};break;case p.RUNES:A={type:n(v),kind:n(d),amount:n(f)};break;case p.KAMAS:case p.WAKFU:A={type:n(v),amount:n(f)};break}o()(A)}ce();var g=va(),R=S(g),M=I(()=>r()(E.REWARD_LABEL_TYPE)),_=I(()=>na(p));he(R,{get title(){return n(M)},get values(){return n(_)},get value(){return n(v)},set value(A){P(v,A)},$$legacy:!0});var b=L(R,2);{var H=A=>{var V=sa(),G=oe(V),ne=I(()=>r()(E.REWARD_LABEL_RARETY)),C=I(()=>Object.keys(Ie));he(G,{get title(){return n(ne)},get values(){return n(C)},get value(){return n(h)},set value(Z){P(h,Z)},$$legacy:!0});var X=L(G,2),F=I(()=>r()(E.REWARD_LABEL_ITEM_TYPE)),B=I(()=>Object.keys(Te));he(X,{get title(){return n(F)},get values(){return n(B)},get value(){return n(i)},set value(Z){P(i,Z)},$$legacy:!0}),N(A,V)},$=A=>{var V=Ce(),G=oe(V);{var ne=C=>{var X=I(()=>r()(E.REWARD_LABEL_EQUIPMENT_TYPE)),F=I(()=>Object.keys(Re));he(C,{get title(){return n(X)},get values(){return n(F)},get value(){return n(d)},set value(B){P(d,B)},$$legacy:!0})};ee(G,C=>{(n(v)===p.CHEST||n(v)===p.RUNES)&&C(ne)},!0)}N(A,V)};ee(b,A=>{n(v)===p.EQUIPMENT?A(H):A($,!1)})}var T=L(b,2),q=I(()=>r()(E.REWARD_LABEL_AMOUNT));De(T,{get title(){return n(q)},children:(A,V)=>{var G=Ce(),ne=oe(G);{var C=F=>{var B=la();be(B),Ae(B,()=>n(f),Z=>P(f,Z)),N(F,B)},X=F=>{var B=oa();be(B),Ae(B,()=>n(f),Z=>P(f,Z)),N(F,B)};ee(ne,F=>{n(v)===p.GEMS?F(C):F(X,!1)})}N(A,G)},$$slots:{default:!0}});var k=L(T,2);{var U=A=>{var V=I(()=>r()(E.REWARD_LABEL_EQUIPMENT_MORE));De(A,{get title(){return n(V)},children:(G,ne)=>{var C=ia();be(C),K(()=>Dt(C,"placeholder",r()(E.EQUIPMENT_MORE_PLACEHOLDER))),Ae(C,()=>n(c),X=>P(c,X)),N(G,C)},$$slots:{default:!0}})};ee(k,A=>{n(v)===p.EQUIPMENT&&A(U)})}var w=L(k,2),D=S(w);D.__click=[ua,s];var Y=S(D,!0);K(()=>te(Y,r()(E.CANCEL))),y(D);var x=L(D,2);x.__click=u;var j=S(x,!0);K(()=>te(j,r()(E.SAVE))),y(x),y(w),y(g),N(e,g),_e()}ke(["click"]);var fa=m('<section class="svelte-1p5vij8"><!></section>');function We(e,t){let a=O(t,"leftToRight",8,!0);const r=1e3;var s=fa(),o=S(s);Ue(o,t,"default",{}),y(s),Be(1,s,()=>Qe,()=>({delay:250,x:r*(a()?-1:1)})),Be(2,s,()=>Qe,()=>({duration:250,x:r*(a()?1:-1)})),N(e,s)}var _a=m('<section class="material-icon"><!></section>');function Ke(e,t){var a=_a(),r=S(a);Ue(r,t,"default",{}),y(a),N(e,a)}var da=(e,t,a)=>{P(t,!0),Xe(a,-1)},Ea=(e,t,a)=>{P(t,!1),Xe(a)},ha=m('<div class="months svelte-oihcp3"></div>'),ga=m('<div class="year svelte-oihcp3"><!></div>'),ya=m('<header class="svelte-oihcp3"><button class="svelte-oihcp3"><!></button> <h2 class="svelte-oihcp3"> </h2> <button class="svelte-oihcp3"><!></button></header> <div class="calendar svelte-oihcp3"><!></div>',1),Na=m("<!> <!>",1);function ma(e,t){fe(t,!1);const a=W({startDate:new Date,rewards:[]});let r=W(new Date().getFullYear()),s=W(),o=W(!0);function l(u){P(s,u)}function v(u){if(!n(s))throw new Error("No selected day");Rt(a,n(a).rewards[me(n(s),n(a).startDate)]=u),P(s,void 0)}function h(){if(!n(s))throw new Error("No selected day");return me(n(s),n(a).startDate)}ce();var d=Na(),i=oe(d);{var f=u=>{var g=I(()=>n(s).toDateString());Ot(u,{get title(){return n(g)},onclose:()=>{P(s,void 0)},children:(R,M)=>{ca(R,{get reward(){return n(a).rewards[h()]},oncancel:()=>{P(s,void 0)},onsave:v})},$$slots:{default:!0}})};ee(i,u=>{n(s)&&u(f)})}var c=L(i,2);We(c,{children:(u,g)=>{var R=ya(),M=oe(R),_=S(M);_.__click=[da,o,r];var b=S(_);Ke(b,{children:(w,D)=>{Se();var Y=pe("arrow_back_ios");N(w,Y)},$$slots:{default:!0}}),y(_);var H=L(_,2),$=S(H,!0);y(H);var T=L(H,2);T.__click=[Ea,o,r];var q=S(T);Ke(q,{children:(w,D)=>{Se();var Y=pe("arrow_forward_ios");N(w,Y)},$$slots:{default:!0}}),y(T),y(M);var k=L(M,2),U=S(k);kt(U,()=>n(r),w=>{var D=ga(),Y=S(D);We(Y,{get leftToRight(){return n(o)},children:(x,j)=>{var J=ha();ue(J,5,()=>Qt,ie,(ae,re,de)=>{$t(ae,{get i18nTitleKey(){return n(re)},children:(Ee,ye)=>{Zt(Ee,It(()=>({month:de,year:n(r),onselectday:l,calendar:n(a)})))},$$slots:{default:!0}})}),y(J),N(x,J)},$$slots:{default:!0}}),y(D),N(w,D)}),y(k),K(()=>te($,n(r))),N(u,R)},$$slots:{default:!0}}),N(e,d),_e()}ke(["click"]);export{ma as component};
