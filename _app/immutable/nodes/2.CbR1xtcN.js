import{l as Rt,a as p,t as N,b as K,g as Le,s as Ae,c as oe,f as He,e as Xe,i as Nt}from"../chunks/disclose-version.BkvbPEs2.js";import{i as de}from"../chunks/legacy.DJrPHVTs.js";import{F as z,G as ot,ax as Tt,ay as $t,a as St,E as ut,O as ct,N as We,U as Ot,P as he,D as It,av as vt,I as Pt,J as je,K as xe,L as Ue,ar as wt,az as Oe,M as ft,A as ze,aA as Ze,aB as Dt,au as kt,aC as Lt,aD as Ct,ak as xt,aj as Ut,ah as qt,a9 as Ht,aE as Ge,aF as Je,a4 as Ft,w as et,aG as dt,aH as Bt,aI as Yt,ap as Qt,a7 as _t,c as y,e as $,d as E,t as U,p as _e,k as n,b as Ee,$ as C,ae as Re,aJ as Kt,af as G,y as w,f as ge,aK as Et,aL as tt}from"../chunks/utils.4eq3sUcA.js";import{b as Wt,p as S,i as Z,s as Fe,o as ht,c as Gt}from"../chunks/preload-helper.CT2v3pSg.js";import{t as h,f as Ce,$ as pe,r as Ie,b as Pe,s as gt,i as rt,j as at,k as Jt,a as fe,M as yt,C as Vt}from"../chunks/Modal.Dl3y3g6u.js";import{w as Xt,g as qe}from"../chunks/index.DM6ivsI2.js";function jt(t,e,r){z&&ot();var a=t,s=Ot,i,l=Tt()?$t:St;ut(()=>{l(s,s=e())&&(i&&ct(i),i=We(()=>r(a)))}),z&&(a=he)}function ye(t,e){return e}function zt(t,e,r,a){for(var s=[],i=e.length,l=0;l<i;l++)Dt(e[l].e,s,!0);var o=i>0&&s.length===0&&r!==null;if(o){var b=r.parentNode;kt(b),b.append(r),a.clear(),ie(t,e[0].prev,e[i-1].next)}Lt(s,()=>{for(var f=0;f<i;f++){var _=e[f];o||(a.delete(_.k),ie(t,_.prev,_.next)),Ct(_.e,!o)}})}function be(t,e,r,a,s,i=null){var l=t,o={flags:e,items:new Map,first:null},b=(e&dt)!==0;if(b){var f=t;l=z?xe(xt(f)):f.appendChild(Ut())}z&&ot();var _=null,M=!1;ut(()=>{var u=r(),c=It(u)?u:u==null?[]:vt(u),v=c.length;if(M&&v===0)return;M=v===0;let O=!1;if(z){var m=l.data===Pt;m!==(v===0)&&(l=je(),xe(l),Ue(!1),O=!0)}if(z){for(var R=null,D,I=0;I<v;I++){if(he.nodeType===8&&he.data===wt){l=he,O=!0,Ue(!1);break}var d=c[I],g=a(d,I);D=bt(he,o,R,null,d,g,I,s,e),o.items.set(g,D),R=D}v>0&&xe(je())}if(!z){var A=qt;Zt(c,o,l,s,e,(A.f&Oe)!==0,a)}i!==null&&(v===0?_?ft(_):_=We(()=>i(l)):_!==null&&ct(_,()=>{_=null})),O&&Ue(!0),r()}),z&&(l=he)}function Zt(t,e,r,a,s,i,l){var Y,ee,re,ae;var o=(s&Bt)!==0,b=(s&(Ge|Je))!==0,f=t.length,_=e.items,M=e.first,u=M,c,v=null,O,m=[],R=[],D,I,d,g;if(o)for(g=0;g<f;g+=1)D=t[g],I=l(D,g),d=_.get(I),d!==void 0&&((Y=d.a)==null||Y.measure(),(O??(O=new Set)).add(d));for(g=0;g<f;g+=1){if(D=t[g],I=l(D,g),d=_.get(I),d===void 0){var A=u?u.e.nodes_start:r;v=bt(A,e,v,v===null?e.first:v.next,D,I,g,a,s),_.set(I,v),m=[],R=[],u=v.next;continue}if(b&&er(d,D,g,s),d.e.f&Oe&&(ft(d.e),o&&((ee=d.a)==null||ee.unfix(),(O??(O=new Set)).delete(d))),d!==u){if(c!==void 0&&c.has(d)){if(m.length<R.length){var q=R[0],k;v=q.prev;var F=m[0],B=m[m.length-1];for(k=0;k<m.length;k+=1)nt(m[k],q,r);for(k=0;k<R.length;k+=1)c.delete(R[k]);ie(e,F.prev,B.next),ie(e,v,F),ie(e,B,q),u=q,v=B,g-=1,m=[],R=[]}else c.delete(d),nt(d,u,r),ie(e,d.prev,d.next),ie(e,d,v===null?e.first:v.next),ie(e,v,d),v=d;continue}for(m=[],R=[];u!==null&&u.k!==I;)(i||!(u.e.f&Oe))&&(c??(c=new Set)).add(u),R.push(u),u=u.next;if(u===null)continue;d=u}m.push(d),v=d,u=d.next}if(u!==null||c!==void 0){for(var x=c===void 0?[]:vt(c);u!==null;)(i||!(u.e.f&Oe))&&x.push(u),u=u.next;var H=x.length;if(H>0){var J=s&dt&&f===0?r:null;if(o){for(g=0;g<H;g+=1)(re=x[g].a)==null||re.measure();for(g=0;g<H;g+=1)(ae=x[g].a)==null||ae.fix()}zt(e,x,J,_)}}o&&Ht(()=>{var ue;if(O!==void 0)for(d of O)(ue=d.a)==null||ue.apply()}),ze.first=e.first&&e.first.e,ze.last=v&&v.e}function er(t,e,r,a){a&Ge&&Ze(t.v,e),a&Je?Ze(t.i,r):t.i=r}function bt(t,e,r,a,s,i,l,o,b){var f=(b&Ge)!==0,_=(b&Yt)===0,M=f?_?Ft(s):et(s):s,u=b&Je?et(l):l,c={i:u,v:M,k:i,a:null,e:null,prev:r,next:a};try{return c.e=We(()=>o(t,M,u),z),c.e.prev=r&&r.e,c.e.next=a&&a.e,r===null?e.first=c:(r.next=c,r.e.next=c.e),a!==null&&(a.prev=c,a.e.prev=c.e),c}finally{}}function nt(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==a;){var l=Qt(i);s.before(i),i=l}}function ie(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function tr(t,e){var r=t.__className,a=rr(e);z&&t.className===a?t.__className=a:(r!==a||z&&t.className!==a)&&(e==null?t.removeAttribute("class"):t.className=a,t.__className=a)}function rr(t){return t??""}function ar(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function mt(t,e,r){if(t.multiple)return lr(t,e);for(var a of t.options){var s=Ne(a);if(Wt(s,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function nr(t,e){_t(()=>{var r=new MutationObserver(()=>{var a=t.__value;mt(t,a)});return r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function sr(t,e,r=e){var a=!0;Rt(t,"change",s=>{var i=s?"[selected]":":checked",l;if(t.multiple)l=[].map.call(t.querySelectorAll(i),Ne);else{var o=t.querySelector(i)??t.querySelector("option:not([disabled])");l=o&&Ne(o)}r(l)}),_t(()=>{var s=e();if(mt(t,s,a),a&&s===void 0){var i=t.querySelector(":checked");i!==null&&(s=Ne(i),r(s))}t.__value=s,a=!1}),nr(t)}function lr(t,e){for(var r of t.options)r.selected=~e.indexOf(Ne(r))}function Ne(t){return"__value"in t?t.__value:t.value}const ir=[h.JANUARY,h.FEBRUARY,h.MARCH,h.APRIL,h.MAY,h.JUNE,h.JULY,h.AUGUST,h.SEPTEMBER,h.OCTOBER,h.NOVEMBER,h.DECEMBER],me=[h.SHORT_SUNDAY,h.SHORT_MONDAY,h.SHORT_TUESDAY,h.SHORT_WEDNESDAY,h.SHORT_THURSDAY,h.SHORT_FRIDAY,h.SHORT_SATURDAY],we=new Date(2024,0,1);function At(t,e){return new Date(e,t+1,0).getDate()}function pt(t,e){return new Date(e,t,1).getDay()}function Mt(t,e){return(t-e+me.length)%me.length}function or(t,e,r=0){const a=Mt(pt(t,e),r),s=At(t,e);return Math.ceil((a+s)/7)}function ur(t,e,r,a,s=0){return r+a*me.length-Mt(pt(t,e),s)+1}function cr(t,e){return Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24))}function De(t,e){return(cr(t,e)%365+365)%365}var P=(t=>(t.GEMS="GEMS",t.KAMAS="KAMAS",t.EQUIPMENT="EQUIPMENT",t.CHEST="CHEST",t.WAKFU="WAKFU",t.RUNES="RUNES",t))(P||{}),vr=N('<span class="text svelte-1mvyt92"> </span>'),fr=N('<section class="tooltip svelte-1mvyt92"><!> <!></section>');function dr(t,e){let r=S(e,"title",8,void 0);var a=fr(),s=y(a);Ce(s,e,"default",{});var i=$(s,2);{var l=o=>{var b=vr(),f=y(b,!0);E(b),U(()=>K(f,r())),p(o,b)};Z(i,o=>{r()&&o(l)})}E(a),p(t,a)}var _r=N("<button><div> </div></button>");function Er(t,e){_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=S(e,"currentDate",8),i=S(e,"dayOfMonth",8),l=S(e,"reward",8,void 0),o=S(e,"onclick",8);const b=new Date;function f(){if(l())return l().type===P.EQUIPMENT?l().rarety.toLowerCase():l().type.toLowerCase()}function _(){if(l()){let u=`${l().amount}× ${a()(l().type)}`;switch(l().type){case P.RUNES:case P.CHEST:u+=` ${a()(l().equipment)}`;break;case P.EQUIPMENT:u=`${l().amount}× ${a()(l().item)} ${a()(l().rarety)}`;break}return u}}de();var M=C(_);dr(t,{get title(){return n(M)},children:(u,c)=>{var v=_r();const O=C(()=>`${f()??""} svelte-endvbj`);v.__click=function(...I){var d;(d=o())==null||d.apply(this,I)};const m=C(()=>s().toDateString()===b.toDateString());var R=y(v),D=y(R,!0);E(R),E(v),U(()=>{tr(v,n(O)),v.disabled=s()>b,ar(v,"today",n(m)),K(D,i())}),p(u,v)},$$slots:{default:!0}}),Ee()}Le(["click"]);function hr(t,e){_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=S(e,"key",8);de(),Re();var i=He();U(()=>K(i,a()(s()))),p(t,i),Ee()}var gr=N("<th><!></th>"),yr=N("<td><!></td>"),br=N("<tr></tr>"),mr=N("<table><thead><tr></tr></thead><tbody></tbody></table>");function Ar(t,e){_e(e,!1);let r=S(e,"year",8),a=S(e,"month",8),s=S(e,"onselectday",8),i=S(e,"calendar",8),l=S(e,"weekOffset",8,1);const o=me.length;function b(c){let v=De(c,we);return i()[v]}de();var f=mr(),_=y(f),M=y(_);be(M,5,()=>({length:o}),ye,(c,v,O)=>{var m=gr(),R=y(m);hr(R,{get key(){return me[(O+l())%o]}}),E(m),p(c,m)}),E(M),E(_);var u=$(_);be(u,5,()=>({length:or(a(),r(),l())}),ye,(c,v,O)=>{var m=br();const R=C(()=>At(a(),r()));be(m,5,()=>me,ye,(I,d,g)=>{var A=yr();const q=C(()=>ur(a(),r(),g,O,l()));var k=y(A);{var F=B=>{const x=C(()=>new Date(r(),a(),n(q))),H=C(()=>b(n(x)));Er(B,{get currentDate(){return n(x)},get dayOfMonth(){return n(q)},get reward(){return n(H)},onclick:()=>s()(n(x))})};Z(k,B=>{n(q)>0&&n(q)<=n(R)&&B(F)})}E(A),p(I,A)}),E(m),p(c,m)}),E(u),E(f),p(t,f),Ee()}var Be=(t=>(t.COMPANIONS="COMPANIONS",t.SPELLS="SPELLS",t.EQUIPMENTS="EQUIPMENTS",t))(Be||{}),Ye=(t=>(t.RING="RING",t.ARMBAND="ARMBAND",t.COMPANION="COMPANION",t))(Ye||{}),Qe=(t=>(t.COMMON="COMMON",t.RARE="RARE",t.KROSMIC="KROSMIC",t.INFINITE="INFINITE",t))(Qe||{}),pr=N('<span class="required svelte-u5ui8r">*</span>'),Mr=N("<span> <!></span>"),Rr=N('<section class="svelte-u5ui8r"><!> <!></section>');function Ke(t,e){let r=S(e,"title",8,void 0),a=S(e,"required",8,!1);var s=Rr(),i=y(s);{var l=b=>{var f=Mr(),_=y(f),M=$(_);{var u=c=>{var v=pr();p(c,v)};Z(M,c=>{a()&&c(u)})}E(f),U(()=>K(_,`${r()??""}: `)),p(b,f)};Z(i,b=>{r()&&b(l)})}var o=$(i,2);Ce(o,e,"default",{}),E(s),p(t,s)}var Nr=N("<option> </option>"),Tr=N("<select></select>");function Se(t,e){_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=S(e,"title",8,void 0),i=S(e,"values",24,()=>[]),l=S(e,"value",12),o=S(e,"required",8,!1);de(),Ke(t,Fe(()=>({title:s(),required:o()}),{children:(b,f)=>{var _=Tr();U(()=>{l(),Kt(()=>{i(),a()})}),be(_,5,i,ye,(M,u)=>{var c=Nr(),v={},O=y(c,!0);U(()=>K(O,a()(n(u)))),E(c),U(()=>{v!==(v=n(u))&&(c.value=(c.__value=n(u))==null?"":n(u))}),p(M,c)}),E(_),sr(_,l),p(b,_)},$$slots:{default:!0}})),Ee()}function $r(t){return Object.values(t).filter(e=>typeof e!="number")}var Sr=N("<!> <!>",1),Or=N('<input type="number" min="100" max="250" step="50">'),Ir=N('<input type="number" min="1" max="5000">'),Pr=N('<input type="text">'),wr=(t,e)=>e()(),Dr=N('<button class="delete material-icon svelte-tu6hhq">delete</button>'),kr=N('<section class="svelte-tu6hhq"><!> <!> <!> <!> <div class="controls svelte-tu6hhq"><button class="secondary svelte-tu6hhq"> </button> <button class="primary svelte-tu6hhq"> </button> <!></div></section>');function Lr(t,e){var ue,Me,Te,ne,se,le,$e;_e(e,!1);const r=Ae(),a=()=>oe(pe,"$_",r);let s=S(e,"oncancel",8),i=S(e,"onsave",8),l=S(e,"ondelete",8,void 0),o=S(e,"reward",8,void 0),b=S(e,"date",8),f=G(((ue=o())==null?void 0:ue.type)??P.EQUIPMENT),_=G(((Me=o())==null?void 0:Me.type)===P.EQUIPMENT?o().rarety:Qe.COMMON),M=G(((Te=o())==null?void 0:Te.type)===P.RUNES||((ne=o())==null?void 0:ne.type)===P.CHEST?o().equipment:Be.EQUIPMENTS),u=G(((se=o())==null?void 0:se.type)===P.EQUIPMENT?o().item:Ye.RING),c=G(((le=o())==null?void 0:le.amount)??1),v=G((($e=o())==null?void 0:$e.type)===P.EQUIPMENT?o().description:void 0);function O(){let T;const L={cycle_index:De(b(),we),amount:n(c)};switch(n(f)){case P.GEMS:T={...L,type:n(f),amount:n(c)};break;case P.EQUIPMENT:T={...L,type:n(f),rarety:n(_),item:n(u),description:n(v)};break;case P.CHEST:T={...L,type:n(f),equipment:n(M)};break;case P.RUNES:T={...L,type:n(f),equipment:n(M)};break;case P.KAMAS:case P.WAKFU:T={...L,type:n(f)};break}i()(T)}de();var m=kr(),R=y(m),D=C(()=>a()(h.REWARD_LABEL_TYPE)),I=C(()=>$r(P));Se(R,{get title(){return n(D)},get values(){return n(I)},get value(){return n(f)},set value(T){w(f,T)},required:!0,$$legacy:!0});var d=$(R,2);{var g=T=>{var L=Sr(),W=ge(L),V=C(()=>a()(h.REWARD_LABEL_RARITY)),Q=C(()=>Object.keys(Qe));Se(W,{get title(){return n(V)},get values(){return n(Q)},get value(){return n(_)},set value(ce){w(_,ce)},required:!0,$$legacy:!0});var te=$(W,2),X=C(()=>a()(h.REWARD_LABEL_ITEM_TYPE)),j=C(()=>Object.keys(Ye));Se(te,{get title(){return n(X)},get values(){return n(j)},get value(){return n(u)},set value(ce){w(u,ce)},required:!0,$$legacy:!0}),p(T,L)},A=T=>{var L=Xe(),W=ge(L);{var V=Q=>{var te=C(()=>a()(h.REWARD_LABEL_EQUIPMENT_TYPE)),X=C(()=>Object.keys(Be));Se(Q,{get title(){return n(te)},get values(){return n(X)},get value(){return n(M)},set value(j){w(M,j)},required:!0,$$legacy:!0})};Z(W,Q=>{(n(f)===P.CHEST||n(f)===P.RUNES)&&Q(V)},!0)}p(T,L)};Z(d,T=>{n(f)===P.EQUIPMENT?T(g):T(A,!1)})}var q=$(d,2),k=C(()=>a()(h.REWARD_LABEL_AMOUNT));Ke(q,{get title(){return n(k)},required:!0,children:(T,L)=>{var W=Xe(),V=ge(W);{var Q=X=>{var j=Or();Ie(j),Pe(j,()=>n(c),ce=>w(c,ce)),p(X,j)},te=X=>{var j=Ir();Ie(j),Pe(j,()=>n(c),ce=>w(c,ce)),p(X,j)};Z(V,X=>{n(f)===P.GEMS?X(Q):X(te,!1)})}p(T,W)},$$slots:{default:!0}});var F=$(q,2);{var B=T=>{var L=C(()=>a()(h.REWARD_LABEL_EQUIPMENT_MORE));Ke(T,{get title(){return n(L)},children:(W,V)=>{var Q=Pr();Ie(Q),U(()=>gt(Q,"placeholder",a()(h.EQUIPMENT_MORE_PLACEHOLDER))),Pe(Q,()=>n(v),te=>w(v,te)),p(W,Q)},$$slots:{default:!0}})};Z(F,T=>{n(f)===P.EQUIPMENT&&T(B)})}var x=$(F,2),H=y(x);H.__click=[wr,s];var J=y(H,!0);U(()=>K(J,a()(h.CANCEL))),E(H);var Y=$(H,2);Y.__click=O;var ee=y(Y,!0);U(()=>K(ee,a()(h.SAVE))),E(Y);var re=$(Y,2);{var ae=T=>{var L=Dr();L.__click=function(...W){var V;(V=l())==null||V.apply(this,W)},p(T,L)};Z(re,T=>{l()&&T(ae)})}E(x),E(m),p(t,m),Ee()}Le(["click"]);var Cr=N('<section class="svelte-1p5vij8"><!></section>');function st(t,e){let r=S(e,"leftToRight",8,!0);const a=1e3;var s=Cr(),i=y(s);Ce(i,e,"default",{}),E(s),rt(1,s,()=>at,()=>({delay:250,x:a*(r()?-1:1)})),rt(2,s,()=>at,()=>({duration:250,x:a*(r()?1:-1)})),p(t,s)}var xr=N('<section class="material-icon"><!></section>');function lt(t,e){var r=xr(),a=y(r);Ce(a,e,"default",{}),E(r),p(t,r)}var Ur=N('<button class="svelte-4xatps">Se déconnecter</button>');function qr(t){var e=Ur();Nt("click",e,function(...r){var a;(a=Jt)==null||a.apply(this,r)}),p(t,e)}const ke="T_Reward";async function Hr(t,e){const r=await fe.from(ke).upsert({...e,profile_name:t},{onConflict:"user_id, profile_name, cycle_index"}).select();if(r.error)throw r.error;return r.data[0]}async function Fr(t,e){const r=await fe.from(ke).delete().match({profile_name:t,cycle_index:e}).select();if(r.error)throw r.error;return r.data[0]}async function it(t=null){let e;if(t?e=await fe.from(ke).select().eq("profile_name",t):e=await fe.from(ke).select().is("profile_name",null),e.error)throw e.error;const r=e.data,a=[];for(const s of r){const i=s;a[i.cycle_index]=i}return a}const ve=Xt(void 0),Ve="T_Profile";async function Br(){const t=await fe.from(Ve).select();if(t.error)throw t.error;return t.data.map(e=>e.name)}async function Yr(t){const e=await fe.from(Ve).insert({name:t}).select();if(e.error)throw e.error;return e.data}async function Qr(t){const e=await fe.from(Ve).delete().match({name:t}).select();if(e.error)throw e.error;return e.data[0]}function Kr(t,e,r){n(e)!==""&&(Yr(n(e)),w(r,[...n(r),n(e)]),w(e,""))}var Wr=(t,e)=>e(void 0),Gr=(t,e,r)=>e(n(r)),Jr=(t,e,r)=>e(n(r)),Vr=N('<div class="svelte-2icnig"><button class="svelte-2icnig"> </button> <button class="material-icon delete-profile svelte-2icnig">delete</button></div>'),Xr=N('<div> </div> <div class="profiles svelte-2icnig"><div class="svelte-2icnig"><button class="svelte-2icnig"> </button></div> <!></div> <div><b> <span class="required svelte-2icnig">*</span> :</b></div> <input type="text"> <button class="svelte-2icnig"> </button>',1);function jr(t,e){_e(e,!1);const r=Ae(),a=()=>oe(ve,"$currentProfile",r),s=()=>oe(pe,"$_",r);let i=S(e,"onclose",8,void 0),l=G(""),o=G([]);function b(M){Qr(M),w(o,n(o).filter(u=>u!==M))}function f(M){ve.set(M),i()&&i()()}ht(async()=>{w(o,await Br())}),de();var _=C(()=>a()??s()(h.PROFILE_DEFAULT));yt(t,{get title(){return n(_)},get onclose(){return i()},children:(M,u)=>{var c=Xr(),v=ge(c),O=y(v,!0);U(()=>K(O,s()(h.PROFILE_INFO))),E(v);var m=$(v,2),R=y(m),D=y(R);D.__click=[Wr,f];var I=y(D,!0);U(()=>K(I,s()(h.PROFILE_DEFAULT))),E(D),E(R);var d=$(R,2);be(d,1,()=>n(o),ye,(x,H)=>{var J=Vr(),Y=y(J);Y.__click=[Gr,f,H];var ee=y(Y,!0);E(Y);var re=$(Y,2);re.__click=[Jr,b,H],E(J),U(()=>K(ee,n(H))),p(x,J)}),E(m);var g=$(m,2),A=y(g),q=y(A,!0);U(()=>K(q,s()(h.PROFILE_CREATE_LABEL))),Re(2),E(A),E(g);var k=$(g,2);Ie(k),U(()=>gt(k,"placeholder",s()(h.PROFILE_CREATE_PLACEHOLDER)));var F=$(k,2);F.__click=[Kr,l,o];var B=y(F,!0);U(()=>K(B,s()(h.PROFILE_CREATE))),E(F),Pe(k,()=>n(l),x=>w(l,x)),p(M,c)},$$slots:{default:!0}}),Ee()}Le(["click"]);var zr=(t,e)=>w(e,!0),Zr=(t,e,r)=>{w(e,!0),Et(r,-1)},ea=(t,e,r)=>{w(e,!1),Et(r)},ta=N('<div class="months svelte-gerr5i"></div>'),ra=N('<div class="year svelte-gerr5i"><!></div>'),aa=N('<header class="svelte-gerr5i"><button class="profile svelte-gerr5i"> </button> <div class="year-controls svelte-gerr5i"><button class="svelte-gerr5i"><!></button> <h2 class="svelte-gerr5i"> </h2> <button class="svelte-gerr5i"><!></button></div> <div class="filters svelte-gerr5i"></div></header> <div class="calendar svelte-gerr5i"><!></div>',1),na=N("<!> <!> <!> <!>",1);function va(t,e){_e(e,!1);const r=Ae(),a=()=>oe(ve,"$currentProfile",r),s=()=>oe(pe,"$_",r);let i=G([]),l=G(new Date().getFullYear()),o=G(),b=G(!1),f=G(!0);function _(A){w(o,A)}function M(A){if(!n(o))throw new Error("No selected day");tt(i,n(i)[De(n(o),we)]=A),w(o,void 0),Hr(qe(ve),A)}function u(){if(!n(o))throw new Error("No selected day");return De(n(o),we)}function c(){if(!n(o))throw new Error("No selected day");const A=u();Fr(qe(ve),A),tt(i,n(i)[A]=void 0),w(o,void 0)}const v=ve.subscribe(async A=>{w(i,await it(A))});ht(async()=>{w(i,await it(qe(ve)))}),Gt(()=>{v()}),de();var O=na(),m=ge(O);{var R=A=>{var q=C(()=>n(o).toDateString());yt(A,{get title(){return n(q)},onclose:()=>{w(o,void 0)},children:(k,F)=>{Lr(k,Fe({get reward(){return n(i)[u()]},oncancel:()=>{w(o,void 0)}},()=>({onsave:M,date:n(o),ondelete:c})))},$$slots:{default:!0}})};Z(m,A=>{n(o)&&A(R)})}var D=$(m,2);{var I=A=>{jr(A,{onclose:()=>w(b,!1)})};Z(D,A=>{n(b)&&A(I)})}var d=$(D,2);st(d,{children:(A,q)=>{var k=aa(),F=ge(k),B=y(F);B.__click=[zr,b];var x=y(B,!0);U(()=>K(x,a()??s()(h.PROFILE_DEFAULT))),E(B);var H=$(B,2),J=y(H);J.__click=[Zr,f,l];var Y=y(J);lt(Y,{children:(ne,se)=>{Re();var le=He("arrow_back_ios");p(ne,le)},$$slots:{default:!0}}),E(J);var ee=$(J,2),re=y(ee,!0);E(ee);var ae=$(ee,2);ae.__click=[ea,f,l];var ue=y(ae);lt(ue,{children:(ne,se)=>{Re();var le=He("arrow_forward_ios");p(ne,le)},$$slots:{default:!0}}),E(ae),E(H),Re(2),E(F);var Me=$(F,2),Te=y(Me);jt(Te,()=>n(l),ne=>{var se=ra(),le=y(se);st(le,{get leftToRight(){return n(f)},children:($e,T)=>{var L=ta();be(L,5,()=>ir,ye,(W,V,Q)=>{Vt(W,{get i18nTitleKey(){return n(V)},children:(te,X)=>{Ar(te,Fe(()=>({month:Q,year:n(l),onselectday:_,calendar:n(i)})))},$$slots:{default:!0}})}),E(L),p($e,L)},$$slots:{default:!0}}),E(se),p(ne,se)}),E(Me),U(()=>K(re,n(l))),p(A,k)},$$slots:{default:!0}});var g=$(d,2);qr(g),p(t,O),Ee()}Le(["click"]);export{va as component};
